<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מציאת מינימום של פונקציות - Gradient Descent</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .slide {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 40px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            display: none;
            animation: slideIn 0.5s ease-in-out;
        }

        .slide.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #3498db;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        h3 {
            color: #e74c3c;
            font-size: 1.5em;
            margin: 20px 0 15px 0;
        }

        .navigation {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 20px;
            margin: 0 5px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .nav-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .simulation-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            align-items: center;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .control-group label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        input[type="range"] {
            width: 150px;
            appearance: none;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }

        input[type="number"] {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 5px;
            width: 80px;
            text-align: center;
        }

        .btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .results {
            background: #e8f5e8;
            border: 2px solid #27ae60;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }

        .exercise {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .formula {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            text-align: center;
            border: 2px solid #dee2e6;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }

        .story-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            font-size: 1.1em;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .tip {
            background: #d1ecf1;
            border: 2px solid #bee5eb;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-right: 5px solid #17a2b8;
        }

        .highlight {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        .step-counter {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(52, 152, 219, 0.9);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .slide {
                padding: 20px;
            }

            h1 {
                font-size: 2em;
            }

            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="step-counter">
            שלב <span id="step-number">1</span> מתוך <span id="total-steps">12</span>
        </div>

        <!-- שלב 1: כותרת ומבוא -->
        <div class="slide active">
            <h1>🏔️ מציאת מינימום של פונקציות</h1>
            <h2>שיטת הירידה בשיפוע (Gradient Descent)</h2>
            
            <div class="story-box">
                <h3>🎯 מטרות השיעור:</h3>
                <ul style="font-size: 1.1em; line-height: 1.8;">
                    <li>להבין מהו מינימום של פונקציה ולמה זה חשוב</li>
                    <li>ללמוד את השיטה של Gradient Descent</li>
                    <li>להתנסות בחישוב מינימום באמצעות סימולציות</li>
                    <li>לפתור תרגילים מעשיים</li>
                </ul>
            </div>

            <div class="tip">
                <strong>💡 טיפ:</strong> בשיעור הזה נלמד איך מחשבים מוצאים את הנקודה הנמוכה ביותר של פונקציה מתמטית, כמו מטייל שמחפש את העמק הכי נמוך בהרים!
            </div>
        </div>

        <!-- שלב 2: הסיפור -->
        <div class="slide">
            <h2>📖 הסיפור: מטייל בערפל</h2>
            
            <div class="story-box">
                <p style="font-size: 1.2em;">
                    🌫️ דמיינו שאתם מטיילים בערפל כבד על הר במטרה להגיע לעמק הכי נמוך.
                </p>
                <p style="margin-top: 15px;">
                    הבעיה היא שאתם לא יכולים לראות רחוק – רק להרגיש את השיפוע מתחת לרגליים שלכם.
                </p>
                <p style="margin-top: 15px; font-weight: bold; color: #f1c40f;">
                    🤔 מהי הדרך הכי טובה לרדת?
                </p>
            </div>

            <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h3>💡 הפתרון:</h3>
                <ol style="font-size: 1.1em; line-height: 2;">
                    <li><strong>למדוד בכל כיוון</strong> את השיפוע של הקרקע</li>
                    <li><strong>להתקדם צעד אחד</strong> לכיוון הירידה התלולה ביותר</li>
                    <li><strong>לחזור על התהליך</strong> עד הגעה לעמק</li>
                </ol>
            </div>

            <div class="tip">
                <strong>⚠️ זהירות:</strong> אם תלכו צעדים גדולים מדי – אולי תפספסו את העמק האמיתי. אם תלכו צעדים קטנים מדי – זה ייקח הרבה זמן.
            </div>
        </div>

        <!-- שלב 3: מעבר למתמטיקה -->
        <div class="slide">
            <h2>🔬 מעבר לעולם המתמטי</h2>
            
            <p style="font-size: 1.2em; margin-bottom: 25px;">
                בעולם המתמטיקה, ה"הר" שלנו הוא פונקציה, וה"עמק" הוא המינימום שלה.
            </p>

            <div class="simulation-container">
                <h3>🎮 סימולציה: פונקציה פשוטה</h3>
                <div class="formula">
                    f(x) = x² + 4x + 1,  f'(x) = 2x + 4
                </div>

                <div class="chart-container">
                    <canvas id="simpleChart"></canvas>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <label>נקודת התחלה (x):</label>
                        <input type="range" id="startX" min="-8" max="4" value="1" step="0.1">
                        <span id="startXValue">1</span>
                    </div>
                    <button class="btn" onclick="demonstrateStep()">הראה צעד אחד</button>
                    <button class="btn" onclick="runFullAnimation()">הרץ אנימציה מלאה</button>
                </div>

                <div class="results" id="stepResult" style="display: none;">
                    <h4>תוצאות הצעד:</h4>
                    <p id="stepInfo"></p>
                </div>
            </div>
        </div>

        <!-- שלב 4: האלגוריתם -->
        <div class="slide">
            <h2>⚙️ האלגוריתם של Gradient Descent</h2>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                <div>
                    <h3>🔍 1. מציאת כיוון הירידה</h3>
                    <p>בכל נקודה, מחשבים את הנגזרת (השיפוע) ומוצאים את כיוון הירידה התלולה ביותר.</p>
                </div>
                
                <div>
                    <h3>👣 2. ביצוע צעד</h3>
                    <p>מתקדמים בכיוון הירידה בגודל צעד המחושב לפי השיפוע.</p>
                </div>
                
                <div>
                    <h3>🔄 3. חזרה על התהליך</h3>
                    <p>חוזרים על החישוב והתנועה עד להתכנסות לנקודת המינימום.</p>
                </div>
                
                <div>
                    <h3>🎯 4. בדיקת התכנסות</h3>
                    <p>בודקים אם הגענו למינימום (השיפוע קרוב ל-0).</p>
                </div>
            </div>

            <div class="formula">
                <strong>הנוסחה המתמטית:</strong><br>
                 f'(x) × α - <sub>ישן</sub>x = <sub>חדש</sub>x
                <br><br>
                כאשר α הוא קצב הלמידה (Learning Rate)
            </div>
        </div>

        <!-- שלב 5: היפר-פרמטרים -->
        <div class="slide">
            <h2>🎛️ היפר-פרמטרים</h2>
            
            <p style="font-size: 1.1em; margin-bottom: 20px;">
                הפרמטרים המגדירים את המודל שאיתו אנחנו מנסים למצוא את המינימום של הפונקציה:
            </p>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="tip">
                    <h3>📊 Learning Rate (α)</h3>
                    <p>משפיע על גודל הצעד בכל איטרציה. קצב גבוה מדי עלול לגרום לחוסר התכנסות, בעוד קצב נמוך מדי יאט את התהליך.</p>
                </div>

                <div class="tip">
                    <h3>🔢 Epochs</h3>
                    <p>מספר הפעמים שהאלגוריתם יחזור על עצמו. יש לבחור מספר מספיק גדול כדי להבטיח התכנסות.</p>
                </div>

                <div class="tip">
                    <h3>🎯 Epsilon (ε)</h3>
                    <p>הקרבה למינימום שאנחנו מקווים שמציג שיפוע אפס. ערך זה קובע את הדיוק של התוצאה הסופית.</p>
                </div>

                <div class="tip">
                    <h3>🚀 Starting Point</h3>
                    <p>נקודת ההתחלה של האלגוריתם. יכולה להשפיע על איכות התוצאה הסופית.</p>
                </div>
            </div>

            <div class="simulation-container">
                <h3>🧪 נסו בעצמכם: השפעת היפר-פרמטרים</h3>
                <div class="controls">
                    <div class="control-group">
                        <label>Learning Rate:</label>
                        <input type="range" id="learningRate" min="0.01" max="0.5" value="0.1" step="0.01">
                        <span id="learningRateValue">0.1</span>
                    </div>
                    <div class="control-group">
                        <label>נקודת התחלה:</label>
                        <input type="range" id="startPoint" min="-6" max="4" value="3" step="0.1">
                        <span id="startPointValue">3</span>
                    </div>
                    <button class="btn" onclick="testParameters()">בדוק פרמטרים</button>
                </div>
                <div class="results" id="parameterResults" style="display: none;"></div>
            </div>
        </div>

        <!-- שלב 6: תרגיל 1 -->
        <div class="slide">
            <h2>📝 תרגיל 1: פונקציה בסיסית</h2>
            
            <div class="exercise">
                <h3>🎯 משימה:</h3>
                <p>מצאו את המינימום של הפונקציה: <strong>f(x) = x² - 6x + 9</strong></p>
                
                <div class="simulation-container">
                    <div class="chart-container">
                        <canvas id="exercise1Chart"></canvas>
                    </div>
                    
                    <div class="controls">
                        <div class="control-group">
                            <label>נקודת התחלה:</label>
                            <input type="number" id="ex1Start" value="0" step="0.1">
                        </div>
                        <div class="control-group">
                            <label>Learning Rate:</label>
                            <input type="number" id="ex1LR" value="0.1" step="0.01" min="0.01" max="0.5">
                        </div>
                        <button class="btn" onclick="solveExercise1()">פתור!</button>
                    </div>
                    
                    <div class="results" id="ex1Results" style="display: none;">
                        <h4>תוצאות:</h4>
                        <div id="ex1Output"></div>
                    </div>
                </div>

                <div class="tip">
                    <strong>💡 רמז:</strong> נסו נקודות התחלה שונות וראו איך זה משפיע על מהירות ההתכנסות!
                </div>
            </div>
        </div>

        <!-- שלב 7: פונקציות מורכבות -->
        <div class="slide">
            <h2>🔬 פונקציות מורכבות וכלל השרשרת</h2>
            
            <p style="font-size: 1.1em; margin-bottom: 20px;">
                לעיתים אנו רוצים למצוא מינימום של פונקציה מורכבת. במקרה הזה, למצוא נגזרת כרוך בהרבה עבודה ולא תמיד ברור איך לעשות את זה!
            </p>

            <div class="formula">
                f(x) = e^(-(2x+3)²/(5x+4))
            </div>

            <div style="background: #e8f4fd; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h3>🔗 כלל השרשרת</h3>
                <p>כאשר גוזרים פונקציה עם כמה משתנים לפי משתנה אחד, מתייחסים אל כל שאר המשתנים כאל מספרים קבועים.</p>
                
                <div class="formula" style="margin: 15px 0;">
                    לדוגמה: J(w) = (4w - 2)⁴<br>
                    נציג את J כפונקציה מורכבת אחרת: f(w)<br>
                    f(w) = 4w - 2<br>
                    J(f) = f⁴<br><br>
                    כלל השרשרת אומר:<br>
                    dJ/dw = (dJ/df) × (df/dw)<br>
                    כלומר:<br>
                    dJ/dw = 4f³ × 4 = 16(4w - 2)³
                </div>
            </div>

            <div class="tip">
                <strong>🎯 המטרה:</strong> לפרק פונקציות מורכבות לחלקים פשוטים שקל לגזור!
            </div>
        </div>

        <!-- שלב 8: תרגיל 2 -->
        <div class="slide">
            <h2>📝 תרגיל 2: פונקציה מורכבת</h2>
            
            <div class="exercise">
                <h3>🎯 משימה:</h3>
                <p>מצאו את המינימום של הפונקציה: <strong>J(w) = (4w - 2)⁴ + 3</strong></p>
                
                <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>🔍 שלבי הפתרון:</h4>
                    <ol>
                        <li>פרקו את הפונקציה: f(w) = 4w - 2, g(f) = f⁴, J(g) = g + 3</li>
                        <li>חשבו את הנגזרות החלקיות</li>
                        <li>החילו את כלל השרשרת</li>
                        <li>הריצו את האלגוריתם</li>
                    </ol>
                </div>

                <div class="simulation-container">
                    <div class="chart-container">
                        <canvas id="exercise2Chart"></canvas>
                    </div>
                    
                    <div class="controls">
                        <div class="control-group">
                            <label>נקודת התחלה:</label>
                            <input type="number" id="ex2Start" value="2" step="0.1">
                        </div>
                        <div class="control-group">
                            <label>Learning Rate:</label>
                            <input type="number" id="ex2LR" value="0.01" step="0.001" min="0.001" max="0.1">
                        </div>
                        <button class="btn" onclick="solveExercise2()">פתור!</button>
                    </div>
                    
                    <div class="results" id="ex2Results" style="display: none;">
                        <div id="ex2Output"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- שלב 9: פונקציות דו-משתניות -->
        <div class="slide">
            <h2>🗻 פונקציות דו-משתניות</h2>
            
            <div class="story-box">
                <p style="font-size: 1.1em;">
                    דמיין שאתה מטייל על הרים וגבעות עם מפה ביד. בכל נקודה שבה אתה נמצא, הקרקע יכולה לנטות לכיוונים שונים.
                </p>
                <p style="margin-top: 15px;">
                    🌊 אם נשפוך מים על שולחן קטן שהנחנו על הקרקע, הם יזרמו בכיוון הכי תלול כלפי מטה. ברור לנו שהם יזרמו בזוית כלשהו - יהיה שינוי גם בכיוון צפון-דרום וגם בכיוון מזרח-מערב.
                </p>
            </div>

            <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h3>🧮 נגזרת חלקית</h3>
                <p>נגזרת חלקית של פונקציה עם יותר ממשתנה אחד היא נגזרת לפי אחד המשתנים בלבד.</p>
                
                <div class="formula">
                    לדוגמה: f(w,b) = 2w² + 2wb + 2b²<br><br>
                    ∂f(w,b)/∂w = 4w + 2b<br>
                    ∂f(w,b)/∂b = 2w + 4b
                </div>

                <p style="margin-top: 15px;">
                    <strong>כלל:</strong> כאשר גוזרים פונקציה עם כמה משתנים לפי משתנה אחד, מתייחסים אל כל שאר המשתנים כאל מספרים קבועים.
                </p>
            </div>
        </div>

        <!-- שלב 10: תרגיל 3 -->
        <div class="slide">
            <h2>📝 תרגיל 3: פונקציה דו-משתנית</h2>
            
            <div class="exercise">
                <h3>🎯 משימה:</h3>
                <p>מצאו את המינימום של הפונקציה: <strong>f(w,b) = w² + 6w + wb + b² + 12</strong></p>
                
                <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4>🔍 מה צריך לחשב:</h4>
                    <ol>
                        <li>∂f/∂w = 2w + 6 + b</li>
                        <li>∂f/∂b = w + 2b</li>
                        <li>לעדכן את שני המשתנים בכל איטרציה</li>
                    </ol>
                </div>

                <div class="simulation-container">
                    <div class="controls">
                        <div class="control-group">
                            <label>w התחלתי:</label>
                            <input type="number" id="ex3StartW" value="0" step="0.1">
                        </div>
                        <div class="control-group">
                            <label>b התחלתי:</label>
                            <input type="number" id="ex3StartB" value="0" step="0.1">
                        </div>
                        <div class="control-group">
                            <label>Learning Rate:</label>
                            <input type="number" id="ex3LR" value="0.1" step="0.01" min="0.01" max="0.5">
                        </div>
                        <button class="btn" onclick="solveExercise3()">פתור!</button>
                    </div>
                    
                    <div class="results" id="ex3Results" style="display: none;">
                        <div id="ex3Output"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- שלב 11: יישומים מעשיים -->
        <div class="slide">
            <h2>🌍 יישומים מעשיים</h2>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="tip">
                    <h3>🤖 למידת מכונה</h3>
                    <p>Gradient Descent הוא הבסיס לאימון רשתות נוירונים ואלגוריתמים של בינה מלאכותית. כל אפליקציה שמזהה תמונות או מתרגמת טקסט משתמשת בשיטה הזו!</p>
                </div>

                <div class="tip">
                    <h3>📈 כלכלה ופיננסים</h3>
                    <p>מציאת התיק האופטימלי להשקעה, מזעור סיכונים, ואופטימיזציה של מחירים - כולם משתמשים בעקרונות דומים.</p>
                </div>

                <div class="tip">
                    <h3>🏭 הנדסה</h3>
                    <p>אופטימיזציה של תהליכי ייצור, חיסכון באנרגיה, ועיצוב מוצרים יעילים יותר.</p>
                </div>

                <div class="tip">
                    <h3>🎮 גיימינג ואנימציה</h3>
                    <p>יצירת אנימציות מציאותיות, AI של דמויות במשחקים, ואופטימיזציה של גרפיקה.</p>
                </div>
            </div>

            <div class="story-box">
                <h3>💡 דוגמה: חברת נטפליקס</h3>
                <p>נטפליקס משתמשת באלגוריתמים דומים כדי לממזער את השגיאה בהמלצות הסרטים שלה. הם מנסים למצוא את הפונקציה שתנבא הכי טוב איזה סרט תאהבו!</p>
            </div>
        </div>

        <!-- שלב 12: סיכום ושאלות -->
        <div class="slide">
            <h2>🎯 סיכום השיעור</h2>
            
            <div style="background: white; padding: 25px; border-radius: 15px; margin: 20px 0;">
                <h3>✅ מה למדנו היום:</h3>
                <ul style="font-size: 1.1em; line-height: 2;">
                    <li><strong>מהו מינימום של פונקציה</strong> ולמה זה חשוב</li>
                    <li><strong>שיטת Gradient Descent</strong> כפתרון לבעיית האופטימיזציה</li>
                    <li><strong>היפר-פרמטרים</strong> והשפעתם על התוצאה</li>
                    <li><strong>כלל השרשרת</strong> לפונקציות מורכבות</li>
                    <li><strong>נגזרות חלקיות</strong> לפונקציות דו-משתניות</li>
                    <li><strong>יישומים מעשיים</strong> בעולם האמיתי</li>
                </ul>
            </div>

            <div class="exercise">
                <h3>🤔 שאלות לדיון:</h3>
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li>איך אפשר לדעת שהגענו לנקודה הנמוכה ביותר?</li>
                    <li>מה קורה אם נעשה צעדים גדולים מדי?</li>
                    <li>מה יקרה אם השיפוע יהיה כמעט אפס?</li>
                    <li>איך הייתם מסבירים את השיטה לחבר שלא בא לשיעור?</li>
                </ol>
            </div>

            <div class="tip">
                <h3>🏠 עבודה בבית:</h3>
                <p>נסו למצוא את המינימום של הפונקציה f(x) = x³ - 3x² + 2 באמצעות Gradient Descent. תתחילו מנקודות שונות ותשוו את התוצאות!</p>
            </div>

            <div class="story-box">
                <h3>🚀 מה הלאה?</h3>
                <p>בשיעורים הבאים נלמד על:</p>
                <ul>
                    <li>אלגוריתמי אופטימיזציה מתקדמים יותר</li>
                    <li>יישומים במודלים של machine learning</li>
                    <li>אופטימיזציה בעיות מעשיות</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="navigation">
        <button class="nav-btn" id="prevBtn" onclick="changeSlide(-1)">⬅️ הקודם</button>
        <span style="margin: 0 15px; font-weight: bold;" id="slideInfo">1 / 12</span>
        <button class="nav-btn" id="nextBtn" onclick="changeSlide(1)">הבא ➡️</button>
    </div>

    <script>
        let currentSlide = 0;
        const totalSlides = 12;
        let charts = {};
        let animationData = [];

        // Navigation functions
        function changeSlide(direction) {
            const slides = document.querySelectorAll('.slide');
            slides[currentSlide].classList.remove('active');
            
            currentSlide += direction;
            if (currentSlide >= totalSlides) currentSlide = 0;
            if (currentSlide < 0) currentSlide = totalSlides - 1;
            
            slides[currentSlide].classList.add('active');
            updateNavigation();
            updateStepCounter();
            
            // Initialize charts when needed
            setTimeout(() => {
                if (currentSlide === 2) initSimpleChart();
                if (currentSlide === 5) initExercise1Chart();
                if (currentSlide === 7) initExercise2Chart();
            }, 100);
        }

        function updateNavigation() {
            document.getElementById('slideInfo').textContent = `${currentSlide + 1} / ${totalSlides}`;
            document.getElementById('prevBtn').disabled = currentSlide === 0;
            document.getElementById('nextBtn').disabled = currentSlide === totalSlides - 1;
        }

        function updateStepCounter() {
            document.getElementById('step-number').textContent = currentSlide + 1;
            document.getElementById('total-steps').textContent = totalSlides;
        }

        // Mathematical functions
        function f(x) {
            return x * x + 4 * x + 1;
        }

        function df(x) {
            return 2 * x + 4;
        }

        function f2(x) {
            return x * x - 6 * x + 9;
        }

        function df2(x) {
            return 2 * x - 6;
        }

        function f3(x) {
            return Math.pow(4 * x - 2, 4) + 3;
        }

        function df3(x) {
            return 16 * Math.pow(4 * x - 2, 3);
        }

        // Chart initialization
        function initSimpleChart() {
            const ctx = document.getElementById('simpleChart');
            if (!ctx) return;

            const xValues = [];
            const yValues = [];
            for (let x = -8; x <= 4; x += 0.1) {
                xValues.push(x);
                yValues.push(f(x));
            }

            if (charts.simple) {
                charts.simple.destroy();
            }

            charts.simple = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: xValues,
                    datasets: [{
                        label: 'f(x) = x² + 4x + 1',
                        data: yValues,
                        borderColor: 'rgb(75, 192, 192)',
                        backgroundColor: 'rgba(75, 192, 192, 0.1)',
                        tension: 0.1,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'x'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'f(x)'
                            }
                        }
                    }
                }
            });
        }

        function initExercise1Chart() {
            const ctx = document.getElementById('exercise1Chart');
            if (!ctx) return;

            const xValues = [];
            const yValues = [];
            for (let x = -2; x <= 8; x += 0.1) {
                xValues.push(x);
                yValues.push(f2(x));
            }

            if (charts.ex1) {
                charts.ex1.destroy();
            }

            charts.ex1 = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: xValues,
                    datasets: [{
                        label: 'f(x) = x² - 6x + 9',
                        data: yValues,
                        borderColor: 'rgb(255, 99, 132)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        tension: 0.1,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'x'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'f(x)'
                            }
                        }
                    }
                }
            });
        }

        function initExercise2Chart() {
            const ctx = document.getElementById('exercise2Chart');
            if (!ctx) return;

            const xValues = [];
            const yValues = [];
            for (let x = -1; x <= 3; x += 0.02) {
                xValues.push(x);
                yValues.push(f3(x));
            }

            if (charts.ex2) {
                charts.ex2.destroy();
            }

            charts.ex2 = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: xValues,
                    datasets: [{
                        label: 'J(w) = (4w - 2)⁴ + 3',
                        data: yValues,
                        borderColor: 'rgb(54, 162, 235)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        tension: 0.1,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'w'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'J(w)'
                            }
                        }
                    }
                }
            });
        }

        // Interactive functions
        function demonstrateStep() {
            const startX = parseFloat(document.getElementById('startX').value);
            const gradient = df(startX);
            const learningRate = 0.1;
            const newX = startX - learningRate * gradient;
            
            document.getElementById('stepResult').style.display = 'block';
            document.getElementById('stepInfo').innerHTML = `
                <strong>נקודה נוכחית:</strong> x = ${startX.toFixed(3)}<br>
                <strong>ערך הפונקציה:</strong> f(x) = ${f(startX).toFixed(3)}<br>
                <strong>שיפוע (נגזרת):</strong> f'(x) = ${gradient.toFixed(3)}<br>
                <strong>שיעור למידה:</strong> α=0.1<br>
                <strong>נקודה חדשה:</strong> x-new = ${newX.toFixed(3)}        x-new =  x - α * f'(x)<br>
                <strong>ערך חדש:</strong> f(x) = ${f(newX).toFixed(3)}<br>

            `;
            
            // Update slider
            document.getElementById('startX').value = newX;
            document.getElementById('startXValue').textContent = newX.toFixed(2);
        }

        function runFullAnimation() {
            let x = parseFloat(document.getElementById('startX').value);
            const learningRate = 0.1;
            const epsilon = 0.001;
            let iterations = 0;
            const maxIterations = 100;
            let steps = [];
            
            while (Math.abs(df(x)) > epsilon && iterations < maxIterations) {
                steps.push({x: x, fx: f(x), gradient: df(x)});
                x = x - learningRate * df(x);
                iterations++;
            }
            
            steps.push({x: x, fx: f(x), gradient: df(x)});
            
            document.getElementById('stepResult').style.display = 'block';
            document.getElementById('stepInfo').innerHTML = `
                <strong>התכנסות הושגה!</strong><br>
                <strong>מספר איטרציות:</strong> ${iterations}<br>
                <strong>המינימום נמצא ב:</strong> x = ${x.toFixed(6)}<br>
                <strong>ערך הפונקציה במינימום:</strong> f(x) = ${f(x).toFixed(6)}<br>
                <strong>שיפוע סופי:</strong> ${df(x).toFixed(6)}
            `;
        }

        function testParameters() {
            const lr = parseFloat(document.getElementById('learningRate').value);
            const start = parseFloat(document.getElementById('startPoint').value);
            
            let x = start;
            const epsilon = 0.001;
            let iterations = 0;
            const maxIterations = 1000;
            
            while (Math.abs(df(x)) > epsilon && iterations < maxIterations) {
                x = x - lr * df(x);
                iterations++;
            }
            
            const converged = iterations < maxIterations;
            
            document.getElementById('parameterResults').style.display = 'block';
            document.getElementById('parameterResults').innerHTML = `
                <h4>תוצאות הבדיקה:</h4>
                <p><strong>התכנסות:</strong> ${converged ? '✅ כן' : '❌ לא'}</p>
                <p><strong>מספר איטרציות:</strong> ${iterations}</p>
                <p><strong>נקודת המינימום:</strong> x = ${x.toFixed(6)}</p>
                <p><strong>ערך הפונקציה:</strong> f(x) = ${f(x).toFixed(6)}</p>
                ${!converged ? '<p style="color: red;"><strong>הערה:</strong> ייתכן שקצב הלמידה גבוה מדי!</p>' : ''}
            `;
        }

        function solveExercise1() {
            const start = parseFloat(document.getElementById('ex1Start').value);
            const lr = parseFloat(document.getElementById('ex1LR').value);
            
            let x = start;
            const epsilon = 0.0001;
            let iterations = 0;
            const maxIterations = 1000;
            
            while (Math.abs(df2(x)) > epsilon && iterations < maxIterations) {
                x = x - lr * df2(x);
                iterations++;
            }
            
            const converged = iterations < maxIterations;
            const theoreticalMin = 3; // x² - 6x + 9 = (x-3)²
            
            document.getElementById('ex1Results').style.display = 'block';
            document.getElementById('ex1Output').innerHTML = `
                <p><strong>המינימום שנמצא:</strong> x = ${x.toFixed(6)}</p>
                <p><strong>ערך הפונקציה:</strong> f(x) = ${f2(x).toFixed(6)}</p>
                <p><strong>מספר איטרציות:</strong> ${iterations}</p>
                <p><strong>התכנסות:</strong> ${converged ? '✅' : '❌'}</p>
                <p><strong>המינימום התאורטי:</strong> x = ${theoreticalMin}</p>
                <p><strong>שגיאה:</strong> ${Math.abs(x - theoreticalMin).toFixed(6)}</p>
                ${Math.abs(x - theoreticalMin) < 0.001 ? '<p style="color: green;">🎉 מצוין! התוצאה מדויקת!</p>' : ''}
            `;
        }

        function solveExercise2() {
            const start = parseFloat(document.getElementById('ex2Start').value);
            const lr = parseFloat(document.getElementById('ex2LR').value);
            
            let x = start;
            const epsilon = 0.0001;
            let iterations = 0;
            const maxIterations = 1000;
            
            while (Math.abs(df3(x)) > epsilon && iterations < maxIterations) {
                x = x - lr * df3(x);
                iterations++;
            }
            
            const converged = iterations < maxIterations;
            const theoreticalMin = 0.5; // 4x - 2 = 0 -> x = 0.5
            
            document.getElementById('ex2Results').style.display = 'block';
            document.getElementById('ex2Output').innerHTML = `
                <p><strong>המינימום שנמצא:</strong> w = ${x.toFixed(6)}</p>
                <p><strong>ערך הפונקציה:</strong> J(w) = ${f3(x).toFixed(6)}</p>
                <p><strong>מספר איטרציות:</strong> ${iterations}</p>
                <p><strong>התכנסות:</strong> ${converged ? '✅' : '❌'}</p>
                <p><strong>המינימום התאורטי:</strong> w = ${theoreticalMin}</p>
                <p><strong>שגיאה:</strong> ${Math.abs(x - theoreticalMin).toFixed(6)}</p>
                ${Math.abs(x - theoreticalMin) < 0.001 ? '<p style="color: green;">🎉 מצוין! התוצאה מדויקת!</p>' : ''}
            `;
        }

        function solveExercise3() {
            const startW = parseFloat(document.getElementById('ex3StartW').value);
            const startB = parseFloat(document.getElementById('ex3StartB').value);
            const lr = parseFloat(document.getElementById('ex3LR').value);
            
            let w = startW;
            let b = startB;
            const epsilon = 0.0001;
            let iterations = 0;
            const maxIterations = 1000;
            
            // f(w,b) = w² + 6w + wb + b² + 12
            // df/dw = 2w + 6 + b
            // df/db = w + 2b
            
            while (iterations < maxIterations) {
                const gradW = 2 * w + 6 + b;
                const gradB = w + 2 * b;
                
                if (Math.abs(gradW) + Math.abs(gradB) <= epsilon) break;
                
                w = w - lr * gradW;
                b = b - lr * gradB;
                iterations++;
            }
            
            const converged = iterations < maxIterations;
            const finalValue = w * w + 6 * w + w * b + b * b + 12;
            
            // Theoretical minimum: solve system of equations
            // 2w + 6 + b = 0
            // w + 2b = 0
            // From second equation: w = -2b
            // Substitute: -4b + 6 + b = 0 -> -3b + 6 = 0 -> b = 2, w = -4
            
            document.getElementById('ex3Results').style.display = 'block';
            document.getElementById('ex3Output').innerHTML = `
                <p><strong>המינימום שנמצא:</strong> w = ${w.toFixed(6)}, b = ${b.toFixed(6)}</p>
                <p><strong>ערך הפונקציה:</strong> f(w,b) = ${finalValue.toFixed(6)}</p>
                <p><strong>מספר איטרציות:</strong> ${iterations}</p>
                <p><strong>התכנסות:</strong> ${converged ? '✅' : '❌'}</p>
                <p><strong>המינימום התאורטי:</strong> w = -4, b = 2</p>
                <p><strong>שגיאה w:</strong> ${Math.abs(w + 4).toFixed(6)}</p>
                <p><strong>שגיאה b:</strong> ${Math.abs(b - 2).toFixed(6)}</p>
                ${(Math.abs(w + 4) < 0.001 && Math.abs(b - 2) < 0.001) ? '<p style="color: green;">🎉 מצוין! התוצאה מדויקת!</p>' : ''}
            `;
        }

        // Initialize sliders
        document.getElementById('startX').addEventListener('input', function() {
            document.getElementById('startXValue').textContent = this.value;
        });

        document.getElementById('learningRate').addEventListener('input', function() {
            document.getElementById('learningRateValue').textContent = this.value;
        });

        document.getElementById('startPoint').addEventListener('input', function() {
            document.getElementById('startPointValue').textContent = this.value;
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' && currentSlide < totalSlides - 1) {
                changeSlide(1);
            } else if (e.key === 'ArrowLeft' && currentSlide > 0) {
                changeSlide(-1);
            }
        });

        // Initialize
        updateNavigation();
        updateStepCounter();
    </script>
</body>
</html>
