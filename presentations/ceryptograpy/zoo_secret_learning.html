<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<title>למידה מטעויות - הסוד של גן החיות</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 30px;
        direction: rtl;
        min-height: 100vh;
        font-size: 1.1em;
    }
    h1 {
        text-align: center;
        color: white;
        font-size: 2.5em;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        margin-bottom: 10px;
    }
    h2 {
        text-align: center;
        color: #f0f0f0;
        font-size: 1.5em;
        margin-top: 0;
    }

    .intro-card {
        background: white;
        padding: 30px;
        margin: 30px auto;
        border-radius: 20px;
        width: 85%;
        box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }

    .story {
        background: #fff9e6;
        padding: 20px;
        border-right: 5px solid #ffc107;
        border-radius: 10px;
        margin: 20px 0;
    }

    .rules {
        background: #e8f5e9;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
    }

    .rules ol {
        padding-right: 20px;
    }

    .rules li {
        margin: 10px 0;
        line-height: 1.6;
    }

    .example-box {
        background: #e3f2fd;
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
        border-right: 4px solid #2196F3;
        font-size: 1.1em;
    }

    .card {
        background: white;
        padding: 25px;
        margin: 25px auto;
        border-radius: 15px;
        width: 85%;
        box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        transition: transform 0.3s;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    .card h3 {
        color: #d32f2f;
        font-size: 1.4em;
        margin-bottom: 15px;
    }

    button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 12px 25px;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        margin-top: 15px;
        font-size: 1em;
        font-weight: bold;
        transition: all 0.3s;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    button:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    }

    .solution {
        display: none;
        background: #e8f5e9;
        margin-top: 20px;
        padding: 20px;
        border-radius: 12px;
        border-right: 5px solid #4caf50;
        animation: slideDown 0.4s ease-out;
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .problem-code {
        background: #ffebee;
        padding: 15px;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        margin: 15px 0;
        border-right: 4px solid #f44336;
        white-space: pre-wrap;
        direction: ltr;
        text-align: left;
        font-size: 1.1em;
    }

    .solution-code {
        background: #f1f8e9;
        padding: 15px;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        margin: 15px 0;
        border-right: 4px solid #4caf50;
        white-space: pre-wrap;
        direction: ltr;
        text-align: left;
        font-size: 1.1em;
    }

    .lesson {
        background: #fff3e0;
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
        border-right: 4px solid #ff9800;
    }

    .emoji {
        font-size: 1.5em;
        margin-left: 10px;
    }

    .animal-list {
        background: #fce4ec;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        font-family: 'Courier New', monospace;
        font-size: 0.9em;

    }

    .quiz {
        background: #f3e5f5;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
        border-right: 4px solid #9c27b0;
        font-size: 1.1em;
    }
</style>
<script>
function toggle(id){
    var sec = document.getElementById(id);
    if(sec.style.display === "block") {
        sec.style.display = "none";
    } else {
        sec.style.display = "block";
    }
}
</script>
</head>

<body>

<h1>🦁 למידה מטעויות 🦁</h1>
<h2>צופן "הסוד של גן החיות"</h2>

<!-- הקדמה והסבר המשימה -->
<div class="intro-card">
    <h2 style="color: #667eea; text-align: right;">📚 הבנת המשימה</h2>

    <div class="story">
        <h3>🎭 הסיפור</h3>
        <p>בגן החיות המקומי, שני שומרים, דני ורותי, גילו שמישהו מנסה להבריח בעלי חיים נדירים. הם רוצים לתקשר ביניהם מבלי שהפושעים יבינו את המסרים שלהם.</p>
    </div>

    <div class="rules">
        <h3>📋 חוקי ההצפנה</h3>
        <ol>
            <li><strong>כל אות</strong> מוחלפת בשם החיה שמתחילה באותה אות</li>
            <li><strong>אין חיה?</strong> משאירים את האות כפי שהיא</li>
            <li><strong>סימני פיסוק</strong> נשארים ללא שינוי</li>
            <li><strong>רווח</strong> מוחלף במילה "גוק"</li>
            <li><strong>האות הראשונה בכל מילה</strong> - שם החיה מתהפך!</li>
            <li><strong>אות ראשונה = אות אחרונה?</strong> משתמשים בחיה של האות הקודמת (מעגלי)</li>
        </ol>
    </div>

    <div class="animal-list">
        <strong>🦁 רשימת החיות (לפי א"ב):</strong><br>
        <span dir="ltr"">animal_cipher = ['אריה', 'ברווז', 'גמל', 'דוב', 'היפופוטם', 'וומבט', 'זברה', 'חתול', 'טיגריס', 'ינשוף', 'כלב', 'לביאה', 'מדוזה', 'נמר', 'סוס', 'עכבר', 'פיל', 'צב', 'קוף', 'רחפן', 'שועל', 'תנין']</span>
    </div>

    <div class="example-box">
        <h3>💡 דוגמה: המילה "אבא"</h3>
        <p><strong>שלב 1:</strong> האות הראשונה והאחרונה זהות (א=א) → משתמשים באות הקודמת: ת</p>
        <p><strong>שלב 2:</strong> הצפנה רגילה: א→אריה, ב→ברווז, א→אריה</p>
        <p><strong>שלב 3:</strong> החלפת האותיות הזהות: א,א → ת,ת → תנין</p>
        <p><strong>שלב 4:</strong> היפוך החיה הראשונה: תנין → ןינת</p>
        <p><strong>תוצאה:</strong> "אבא" → <strong>"ןינת ברווז תנין"</strong></p>
    </div>

    <div class="quiz">
        <h3>🎯 מטרת התרגיל</h3>
        <p>לממש שתי פונקציות:</p>
        <ul>
            <li><code>encrypt(message)</code> - מצפינה הודעה</li>
            <li><code>decrypt(encrypted_message)</code> - מפענחת הודעה</li>
        </ul>
    </div>
</div>

<!-- טעות 1 -->
<div class="card">
    <h3><span class="emoji">❌</span>טעות 1: שינוי אותיות המילה במקום שינוי החיות</h3>
    <p><strong>מה קרה?</strong> תלמידים שינו את האות עצמה במקום את שם החיה שמייצגת אותה:</p>

    <div class="problem-code">def change(word):
    if word[0] == word[-1]:
        prev = chr(ord(word[0]) - 1)
        return word.replace(word[0], prev)   # ❌ משנה את כל האותיות במילה!</div>

    <p><strong>למה זה לא עובד?</strong> הקוד משנה את המילה המקורית לפני ההצפנה, במקום לשנות את החיות שמייצגות את האותיות.</p>

    <button onclick="toggle('s1')">🔍 הצג פתרון + הסבר</button>
    <div id="s1" class="solution">
        <h4>✔️ הפתרון הנכון:</h4>
        <p>אסור לשנות את המילה המקורית! רק את החיה שמייצגת כל אות.</p>

        <div class="solution-code">abc = "אבגדהוזחטיכלמנסעפצקרשת"
letter = word[0]  # שומרים את האות המקורית
index = abc.index(letter)
prev_index = (index - 1) % len(abc)  # חישוב מעגלי
prev_letter = abc[prev_index]
animal = animal_cipher[prev_index]  # החיה של האות הקודמת</div>

        <div class="lesson">
            <h4>🎯 מה למדנו?</h4>
            <ul>
                <li><strong>בצופן משנים ייצוג, לא טקסט</strong> - הטקסט המקורי נשאר שלם</li>
                <li><strong>שינוי נתונים מקוריים משבש פענוח</strong> - אם נשנה את המילה, לא נוכל לפענח חזרה</li>
                <li><strong>ההצפנה עובדת על רמת הייצוג</strong> - אות→חיה, לא שינוי האות עצמה</li>
            </ul>
        </div>
    </div>
</div>

<!-- טעות 2 -->
<div class="card">
    <h3><span class="emoji">❌</span>טעות 2: שכחת זיהוי חיה הפוכה בפענוח</h3>
    <p><strong>מה קרה?</strong> בהצפנה החיה הראשונה מתהפכת - והתלמיד שכח לבדוק זאת בפענוח.</p>

    <div class="problem-code">if word.startswith(animal):
    decoded += abc[i]
# ❌ אין בדיקה לגרסה הפוכה של החיה!</div>

    <p><strong>למה זה בעייתי?</strong> הפענוח לא מזהה חיות הפוכות כמו "הירא" (אריה הפוך), ולכן מאבד מידע.</p>

    <button onclick="toggle('s2')">🔍 הצג פתרון + הסבר</button>
    <div id="s2" class="solution">
        <h4>✔️ הפתרון הנכון:</h4>

        <div class="solution-code">for i, animal in enumerate(animal_cipher):
    if word.startswith(animal, pos):
        decoded += abc[i]
        pos += len(animal)
        break
    elif word.startswith(animal[::-1], pos):  # בדיקת היפוך!
        decoded += abc[i]
        pos += len(animal)
        break</div>

        <div class="lesson">
            <h4>🎯 מה למדנו?</h4>
            <ul>
                <li><strong>הפענוח חייב לתמוך בכל וריאציה של הייצוג</strong></li>
                <li><strong>בצפנים: כל שינוי בהצפנה → מנגנון זיהוי מקביל בפענוח</strong></li>
                <li><strong>היפוך מחרוזת ב-Python:</strong> <code>string[::-1]</code></li>
            </ul>
        </div>
    </div>
</div>

<!-- טעות 3 -->
<div class="card">
    <h3><span class="emoji">❌</span>טעות 3: שימוש ב־"ג'וק" במקום "גוק"</h3>

    <p><strong>מה קרה?</strong> טעות כתיב פשוטה שהורסת את כל הפענוח!</p>

    <div class="problem-code">if letter == " ":
    encrypted_word += "ג'וק "   # ❌ ג'וק במקום גוק</div>

    <p><strong>למה זה קריטי?</strong> בפענוח, המערכת מחפשת "גוק" ולא מוצאת - כל המילים מתמזגות לאחת!</p>

    <button onclick="toggle('s3')">🔍 הצג פתרון + הסבר</button>
    <div id="s3" class="solution">
        <h4>✔️ הפתרון הנכון:</h4>

        <div class="solution-code">if letter == " ":
    encrypted_word += "גוק "  # ✅ בדיוק כמו שמוגדר</div>

        <div class="lesson">
            <h4>🎯 מה למדנו?</h4>
            <ul>
                <li><strong>מחרוזת סימון בצופן חייבת להיות מדויקת לחלוטין</strong></li>
                <li><strong>כל שינוי קטן שובר את הצופן כולו</strong></li>
                <li><strong>תמיד להשתמש בקבועים:</strong> <code>SPACE_MARKER = "גוק"</code></li>
                <li><strong>לבדוק איות בקפידה!</strong></li>
            </ul>
        </div>
    </div>
</div>

<!-- טעות 4 -->
<div class="card">
    <h3><span class="emoji">❌</span>טעות 4: שימוש ב-split לפענוח במקום סריקת חיות</h3>

    <p><strong>מה קרה?</strong> ניסיון לפצל את הטקסט המוצפן לפי רווחים ולפענח כל "מילה".</p>

    <div class="problem-code">animals = encrypted.split()
for animal in animals:
    if animal in animal_cipher:
        index = animal_cipher.index(animal)
        decoded += abc[index]
# ❌ נכשל כאשר החיה הפוכה או צמודה לסימן פיסוק</div>

    <p><strong>למה זה לא עובד?</strong></p>
    <ul>
        <li>חיות הפוכות לא מזוהות</li>
        <li>סימני פיסוק נדבקים לחיות</li>
        <li>"גוק" נשאר כמילה נפרדת במקום להפוך לרווח</li>
    </ul>

    <button onclick="toggle('s4')">🔍 הצג פתרון + הסבר</button>
    <div id="s4" class="solution">
        <h4>✔️ הפתרון הנכון: סריקה רציפה (Scanning)</h4>

        <div class="solution-code">pos = 0
while pos < len(encrypted):
    # בדיקת "גוק"
    if encrypted.startswith("גוק", pos):
        decoded += " "
        pos += 3
        continue

    # בדיקת חיות רגילות והפוכות
    found = False
    for i, animal in enumerate(animal_cipher):
        if encrypted.startswith(animal, pos):
            decoded += abc[i]
            pos += len(animal)
            found = True
            break
        elif encrypted.startswith(animal[::-1], pos):
            decoded += abc[i]
            pos += len(animal)
            found = True
            break

    # אם לא חיה - העתק את התו כמו שהוא (סימן פיסוק)
    if not found:
        decoded += encrypted[pos]
        pos += 1</div>

        <div class="lesson">
            <h4>🎯 מה למדנו?</h4>
            <ul>
                <li><strong>split עובד רק בטקסט מסודר</strong> - לא בצפנים מורכבים</li>
                <li><strong>סריקה (scanning) היא טכניקה קריפטוגרפית טובה</strong></li>
                <li><strong>startswith מאפשר בדיקה ממיקום מסוים</strong>: <code>string.startswith(sub, pos)</code></li>
                <li><strong>חשוב לטפל בכל המקרים:</strong> חיות רגילות, הפוכות, סימני פיסוק, ו"גוק"</li>
            </ul>
        </div>
    </div>
</div>

<!-- טעות 5 -->
<div class="card">
    <h3><span class="emoji">❌</span>טעות 5: שימוש שגוי ב-flipFirstAnimal בפענוח</h3>

    <p><strong>מה קרה?</strong> התלמיד הופך שוב את החיה הראשונה בפענוח.</p>

    <div class="problem-code"># ❌ הלוגיקה השגויה:
flipped = flipFirstAnimal(encrypted_word)
decoded = adjustAnimalToLetter(flipped)

# זה מבצע היפוך כפול - מחזיר לחיה המקורית!</div>

    <p><strong>למה זה שגוי?</strong> ההיפוך נעשה בהצפנה. בפענוח אנחנו רק צריכים <strong>לזהות</strong> שהחיה הפוכה, לא להפוך אותה שוב.</p>

    <button onclick="toggle('s5')">🔍 הצג פתרון + הסבר</button>
    <div id="s5" class="solution">
        <h4>✔️ הפתרון הנכון: זיהוי בלבד</h4>

        <div class="solution-code"># בפענוח - רק זיהוי של חיה הפוכה:
if word.startswith(animal[::-1], pos):
    decoded += abc[i]  # מפענחים לאות המקורית
    pos += len(animal)

# אין צורך להפוך כלום - רק לזהות!</div>

        <div class="lesson">
            <h4>🎯 מה למדנו?</h4>
            <ul>
                <li><strong>פענוח ≠ הפוך מהצפנה</strong></li>
                <li><strong>פענוח = שחזור מצב מקורי</strong></li>
                <li><strong>הפעולות הספציפיות של ההצפנה לא מבוצעות מחדש בפענוח</strong></li>
                <li><strong>חשיבה לוגית:</strong> אם החיה הראשונה הופכה בהצפנה, בפענוח היא כבר הפוכה - רק צריך לזהות זאת</li>
            </ul>
        </div>
    </div>
</div>

<!-- טעות 6 -->
<div class="card">
    <h3><span class="emoji">❌</span>טעות 6: שימוש ב-replace שמשנה את כל האותיות</h3>

    <p><strong>מה קרה?</strong> שימוש ב-replace מחליף את <strong>כל</strong> המופעים של האות במילה.</p>

    <div class="problem-code"># ❌ הבעיה:
word = "אבא"
prev_letter = "ת"
word = word.replace(word[0], prev_letter)
# תוצאה: "תבת" במקום "תבת" (שורש הבעיה: ה-א האמצעי לא אמור להשתנות!)</div>

    <p><strong>דוגמה לבעיה:</strong> במילה "אבגא", רק האות הראשונה והאחרונה צריכות להשתנות, אבל replace משנה את כולן!</p>

    <button onclick="toggle('s6')">🔍 הצג פתרון + הסבר</button>
    <div id="s6" class="solution">
        <h4>✔️ הפתרון הנכון: שליטה מדויקת בכל תו</h4>

        <div class="solution-code">if word[0] == word[-1]:
    # מציאת האות הקודמת
    abc = "אבגדהוזחטיכלמנסעפצקרשת"
    index = abc.index(word[0])
    prev_index = (index - 1) % len(abc)
    prev_letter = abc[prev_index]

    # בנייה מדויקת של המילה החדשה
    new_word = ""
    for i, ch in enumerate(word):
        if i == 0 or i == len(word) - 1:
            new_word += prev_letter  # רק תו ראשון ואחרון
        else:
            new_word += ch  # שאר התווים נשארים

    word = new_word</div>

        <div class="lesson">
            <h4>🎯 מה למדנו?</h4>
            <ul>
                <li><strong>replace הוא כלי מסוכן</strong> - משפיע על כל המקומות בבת אחת</li>
                <li><strong>בצפנים נדרשת שליטה מלאה על כל תו בנפרד</strong></li>
                <li><strong>גישת הבנייה:</strong> לבנות מחרוזת חדשה תו אחר תו</li>
                <li><strong>enumerate מאפשר גישה גם לאינדקס וגם לערך</strong></li>
            </ul>
        </div>
    </div>
</div>

<!-- סיכום -->
<div class="intro-card">
    <h2 style="color: #667eea;">🎓 עקרונות חשובים בקריפטוגרפיה</h2>

    <div class="lesson">
        <ol>
            <li><strong>הצפנה ופענוח הם פעולות שונות</strong> - לא רק "היפוך" של הקוד</li>
            <li><strong>שמירה על נתונים מקוריים</strong> - לעולם לא משנים את המידע המקורי</li>
            <li><strong>דיוק מוחלט</strong> - טעות קטנה שוברת את כל המערכת</li>
            <li><strong>טיפול בכל המקרים</strong> - רגיל, הפוך, מיוחד</li>
            <li><strong>סריקה רציפה</strong> - עדיף על פיצול טקסט</li>
            <li><strong>שליטה ברמת התו</strong> - לא להסתמך על פונקציות גנריות</li>
        </ol>
    </div>

    <div class="quiz">
        <h3>💪 אתגר לסיום</h3>
        <p>נסו לכתוב מחדש את הפונקציות <code>encrypt()</code> ו-<code>decrypt()</code> מאפס, תוך הימנעות מכל הטעויות שלמדנו!</p>
        <p><strong>טיפ:</strong> התחילו עם פונקציית עזר לטיפול במילה בודדת, ואז התרחבו לטיפול במשפט שלם.</p>
    </div>
</div>

</body>
</html>