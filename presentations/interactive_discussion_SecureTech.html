<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×“×£ ×¢×‘×•×“×” ××™× ×˜×¨××§×˜×™×‘×™ - ×ª×¨×’×™×œ ×“×™×•×Ÿ ××‘×˜×—×ª ××™×“×¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }
        
        .worksheet {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            border-bottom: 3px solid #2196F3;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #2196F3;
            margin: 0;
            font-size: 28px;
        }
        
        .section {
            margin-bottom: 25px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
            transition: all 0.3s ease;
        }
        
        .section:hover {
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .section h2 {
            color: #1976D2;
            margin-top: 0;
            font-size: 20px;
            border-bottom: 2px solid #1976D2;
            padding-bottom: 8px;
        }
        
        .info-box {
            background: #e3f2fd;
            border: 2px solid #2196F3;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .warning-box {
            background: #fff3e0;
            border: 2px solid #ff9800;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .success-box {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        input[type="text"], input[type="date"], textarea, select {
            border: 2px solid #ddd;
            border-radius: 5px;
            padding: 8px 12px;
            font-size: 14px;
            transition: border-color 0.3s ease;
            font-family: Arial, sans-serif;
        }
        
        input[type="text"]:focus, textarea:focus, select:focus {
            border-color: #2196F3;
            outline: none;
            box-shadow: 0 0 5px rgba(33, 150, 243, 0.3);
        }
        
        .input-group {
            margin: 10px 0;
        }
        
        .input-group label {
            display: inline-block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #1976D2;
        }
        
        .input-full {
            width: 100%;
            max-width: 100%;
        }
        
        .input-medium {
            width: 200px;
        }
        
        .input-small {
            width: 100px;
        }
        
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: right;
        }
        
        th {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        .role-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .role-option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .role-option:hover {
            border-color: #2196F3;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.2);
        }
        
        .role-option.selected {
            background: #2196F3;
            color: white;
            border-color: #1976D2;
        }
        
        .rating-group {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 10px 0;
        }
        
        .rating-buttons {
            display: flex;
            gap: 5px;
        }
        
        .rating-btn {
            width: 35px;
            height: 35px;
            border: 2px solid #ddd;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .rating-btn:hover {
            border-color: #2196F3;
            background: #e3f2fd;
        }
        
        .rating-btn.selected {
            background: #2196F3;
            color: white;
            border-color: #1976D2;
        }
        
        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 15px;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .progress-indicator {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 8px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #4caf50, #2196F3);
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .cost-calculator {
            background: #f8f9fa;
            border: 2px solid #6c757d;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .cost-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
        }
        
        .cost-total {
            font-size: 18px;
            font-weight: bold;
            color: #1976D2;
            border-top: 2px solid #1976D2;
            padding-top: 10px;
        }
        
        .validation-message {
            color: #f44336;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .completion-status {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #4caf50;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
        }

        @media (max-width: 768px) {
            .worksheet {
                padding: 15px;
            }
            
            .controls {
                position: relative;
                transform: none;
                left: auto;
                bottom: auto;
                margin-top: 20px;
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        button {
          padding: 10px 20px;
          font-size: 1.2em;
          margin-top: 10px;
          cursor: pointer;
          border: none;
          border-radius: 8px;
          background-color: #4CAF50;
          color: white;
        }
        /* ×¢×™×¦×•×‘ ×œ×—×œ×•×Ÿ ×”×§×•×¤×¥ */
        .modal {
          display: none; /* ××•×¡×ª×¨ ×›×‘×¨×™×¨×ª ××—×“×œ */
          position: fixed;
          z-index: 1;
          right: 0;
          top: 0;
          width: 100%;
          height: 100%;
          overflow: auto;
          background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
          background-color: #fff;
          margin: 10% auto;
          padding: 20px;
          border-radius: 12px;
          width: 60%;
          text-align: right;
          direction: rtl;
        }
        .close {
          color: #aaa;
          float: left;
          font-size: 28px;
          font-weight: bold;
          cursor: pointer;
        }
        .close:hover {
          color: black;
        }
        ul {
          text-align: right;
        }

    </style>
</head>
<body>
    <div class="worksheet">
        <div class="completion-status" id="completionStatus">××•×œ×: 0%</div>
        
        <div class="header">
            <h1>×“×£ ×¢×‘×•×“×” ××™× ×˜×¨××§×˜×™×‘×™ - ×“×™×•×Ÿ ×‘×§×‘×•×¦×”</h1>
            <p><strong>× ×•×©×:</strong> ×‘×—×™×¨×ª ×¤×ª×¨×•× ×•×ª ××‘×˜×—×ª ××™×“×¢ ×œ×—×‘×¨×ª SecureTech</p>
            
            <div class="input-group">
                <label>×©× ×”×ª×œ××™×“:</label>
                <input type="text" id="studentName" class="input-medium" placeholder="×”×›× ×¡ ×©× ××œ×">
                
                <label style="margin-right: 20px;">×ª××¨×™×š:</label>
                <input type="date" id="lessonDate" class="input-medium">
            </div>
        </div>

        <div class="progress-indicator">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%;"></div>
            </div>
            <span id="progressText">×”×ª×§×“××•×ª: 0 ××ª×•×š 10 ×©×œ×‘×™× ×”×•×©×œ××•</span>
        </div>

        <!-- ×¨×§×¢ ××©×™××” -->
        <div class="section">
            <h2>×¨×§×¢ ×”××©×™××”</h2>
            <div class="info-box">
                <p><strong>×—×‘×¨×ª SecureTech</strong> - ×¡×˜××¨×˜-××¤ ×™×©×¨××œ×™ ×œ× ×™×”×•×œ ×›×¡×¤×™× ××™×©×™×™×</p>
                <ul>
                    <li>15 ×¢×•×‘×“×™×, ×¢×‘×•×“×” ×”×™×‘×¨×™×“×™×ª</li>
                    <li>××ª×¨×—×‘×ª ×œ××™×¨×•×¤×” (GDPR)</li>
                    <li>×ª×§×¦×™×‘: 50,000â‚ª ×œ×©× ×” ×œ××‘×˜×—×”</li>
                    <li>××™×“×¢ ×¨×’×™×©: ×¤×¨×˜×™ ×œ×§×•×—×•×ª + × ×ª×•× ×™ ×‘× ×§××•×ª</li>
                </ul>
            </div>
        </div>

        <!-- ×ª×¤×§×™×“ ×‘×“×™×•×Ÿ -->
        <div class="section">
            <h2>×”×ª×¤×§×™×“ ×©×œ×™ ×‘×“×™×•×Ÿ</h2>
            <div class="input-group">
                <label>×‘×—×¨ ××ª ×”×ª×¤×§×™×“ ×©×§×™×‘×œ×ª:</label>
                <div class="role-selector">
                    <div class="role-option" data-role="×× ×—×” ×“×™×•×Ÿ">×× ×—×” ×“×™×•×Ÿ</div>
                    <div class="role-option" data-role="×¨×©××Ÿ ×¨××©×™">×¨×©××Ÿ ×¨××©×™</div>
                    <div class="role-option" data-role="×¨×©××Ÿ ××‘×§×¨">×¨×©××Ÿ ××‘×§×¨</div>
                    <div class="role-option" data-role="×©×•××¨ ×–××Ÿ">×©×•××¨ ×–××Ÿ</div>
                    <div class="role-option" data-role="××ª×•×•×š">××ª×•×•×š</div>
                    <div class="role-option" data-role="×“×•×‘×¨ ×§×‘×•×¦×”">×“×•×‘×¨ ×§×‘×•×¦×”</div>
                </div>
            </div>
            
            <div class="warning-box">
                <label><strong>××” ×”×ª×¤×§×™×“ ×©×œ×™ ×›×•×œ×œ:</strong></label>
                <textarea id="roleDescription" class="input-full" placeholder="×¨×©×•× ×›××Ÿ ××” ×”×ª×¤×§×™×“ ×©×œ×š ×›×•×œ×œ..."></textarea>
            </div>
        </div>

        <!-- ××¤×©×¨×•×™×•×ª ×œ×‘×—×™×¨×” -->
        <div class="section">
            <h2>××¤×©×¨×•×™×•×ª ×¤×ª×¨×•× ×•×ª ×”××‘×˜×—×”</h2>
            <button id="optionsBtn">×”×¦×’ ××™×“×¢ × ×•×¡×£ ×¢×œ ×”××¤×©×¨×•×™×•×ª</button>
            <table>
                <tr>
                    <th>×¤×ª×¨×•×Ÿ</th>
                    <th>×¢×œ×•×ª ×©× ×ª×™×ª</th>
                    <th>×™×ª×¨×•× ×•×ª ×¢×™×§×¨×™×™×</th>
                    <th>×—×¡×¨×•× ×•×ª ×¢×™×§×¨×™×™×</th>
                </tr>
                <tr data-cost="15000">
                    <td>××™××•×ª ×“×•-×©×œ×‘×™ ××ª×§×“×</td>
                    <td>15,000â‚ª</td>
                    <td><input type="text" placeholder="×™×ª×¨×•× ×•×ª..." data-field="advantages"></td>
                    <td><input type="text" placeholder="×—×¡×¨×•× ×•×ª..." data-field="disadvantages"></td>
                </tr>
                <tr data-cost="12000">
                    <td>××¢×¨×›×ª ×’×™×‘×•×™ ×•×©×—×–×•×¨</td>
                    <td>12,000â‚ª</td>
                    <td><input type="text" placeholder="×™×ª×¨×•× ×•×ª..." data-field="advantages"></td>
                    <td><input type="text" placeholder="×—×¡×¨×•× ×•×ª..." data-field="disadvantages"></td>
                </tr>
                <tr data-cost="8000">
                    <td>×”×“×¨×›×•×ª ××‘×˜×—×” ×œ×¢×•×‘×“×™×</td>
                    <td>8,000â‚ª</td>
                    <td><input type="text" placeholder="×™×ª×¨×•× ×•×ª..." data-field="advantages"></td>
                    <td><input type="text" placeholder="×—×¡×¨×•× ×•×ª..." data-field="disadvantages"></td>
                </tr>
                <tr data-cost="20000">
                    <td>×—×•××ª ××© + × ×™×˜×•×¨</td>
                    <td>20,000â‚ª</td>
                    <td><input type="text" placeholder="×™×ª×¨×•× ×•×ª..." data-field="advantages"></td>
                    <td><input type="text" placeholder="×—×¡×¨×•× ×•×ª..." data-field="disadvantages"></td>
                </tr>
                <tr data-cost="18000">
                    <td>×”×¦×¤× ×ª ××¡×“×™ × ×ª×•× ×™×</td>
                    <td>18,000â‚ª</td>
                    <td><input type="text" placeholder="×™×ª×¨×•× ×•×ª..." data-field="advantages"></td>
                    <td><input type="text" placeholder="×—×¡×¨×•× ×•×ª..." data-field="disadvantages"></td>
                </tr>
                <tr data-cost="25000">
                    <td>× ×™×˜×•×¨ ×¤×¢×™×œ×•×ª ××©×ª××©×™×</td>
                    <td>25,000â‚ª</td>
                    <td><input type="text" placeholder="×™×ª×¨×•× ×•×ª..." data-field="advantages"></td>
                    <td><input type="text" placeholder="×—×¡×¨×•× ×•×ª..." data-field="disadvantages"></td>
                </tr>
            </table>
        </div>

        <!-- ×§×¨×™×˜×¨×™×•× ×™× ×œ×‘×—×™×¨×” -->
        <div class="section">
            <h2>×©×œ×‘ 2: ×§×¨×™×˜×¨×™×•× ×™× ×œ×‘×—×™×¨×” (8 ×“×§×•×ª)</h2>
            <button id="criteriaBtn">×”×¦×’ ×§×¨×™×˜×¨×™×•× ×™× ××¤×©×¨×™×™×</button>
            <p><strong>×”×§×¨×™×˜×¨×™×•× ×™× ×©×”×§×‘×•×¦×” ×§×‘×¢×”:</strong></p>
            <table>
                <tr>
                    <th>×§×¨×™×˜×¨×™×•×Ÿ</th>
                    <th>×—×©×™×‘×•×ª (1-5)</th>
                    <th>×”×¡×‘×¨</th>
                </tr>
                <tr>
                    <td><input type="text" placeholder="×§×¨×™×˜×¨×™×•×Ÿ 1"></td>
                    <td>
                        <select class="input-small">
                            <option value="">×‘×—×¨</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td><input type="text" placeholder="×œ××” ×–×” ×—×©×•×‘?"></td>
                </tr>
                <tr>
                    <td><input type="text" placeholder="×§×¨×™×˜×¨×™×•×Ÿ 2"></td>
                    <td>
                        <select class="input-small">
                            <option value="">×‘×—×¨</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td><input type="text" placeholder="×œ××” ×–×” ×—×©×•×‘?"></td>
                </tr>
                <tr>
                    <td><input type="text" placeholder="×§×¨×™×˜×¨×™×•×Ÿ 3"></td>
                    <td>
                        <select class="input-small">
                            <option value="">×‘×—×¨</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td><input type="text" placeholder="×œ××” ×–×” ×—×©×•×‘?"></td>
                </tr>
                <tr>
                    <td><input type="text" placeholder="×§×¨×™×˜×¨×™×•×Ÿ 4"></td>
                    <td>
                        <select class="input-small">
                            <option value="">×‘×—×¨</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td><input type="text" placeholder="×œ××” ×–×” ×—×©×•×‘?"></td>
                </tr>
            </table>
        </div>

        <!-- ×¨×¢×™×•× ×•×ª ××™×©×™×™× -->
        <div class="section">
            <h2>×©×œ×‘ 3: ×”×¨×¢×™×•× ×•×ª ×”××™×©×™×™× ×©×œ×™ (×œ×¤× ×™ ×”×“×™×•×Ÿ)</h2>
            
            <div class="info-box">
                <div class="input-group">
                    <label><strong>1. ×¤×ª×¨×•×Ÿ ×¨××©×•×Ÿ:</strong></label>
                    <select id="choice1" class="input-medium">
                        <option value="">×‘×—×¨ ×¤×ª×¨×•×Ÿ</option>
                        <option value="××™××•×ª ×“×•-×©×œ×‘×™ ××ª×§×“×" data-cost="15000">××™××•×ª ×“×•-×©×œ×‘×™ ××ª×§×“× (15,000â‚ª)</option>
                        <option value="××¢×¨×›×ª ×’×™×‘×•×™ ×•×©×—×–×•×¨" data-cost="12000">××¢×¨×›×ª ×’×™×‘×•×™ ×•×©×—×–×•×¨ (12,000â‚ª)</option>
                        <option value="×”×“×¨×›×•×ª ××‘×˜×—×” ×œ×¢×•×‘×“×™×" data-cost="8000">×”×“×¨×›×•×ª ××‘×˜×—×” ×œ×¢×•×‘×“×™× (8,000â‚ª)</option>
                        <option value="×—×•××ª ××© + × ×™×˜×•×¨" data-cost="20000">×—×•××ª ××© + × ×™×˜×•×¨ (20,000â‚ª)</option>
                        <option value="×”×¦×¤× ×ª ××¡×“×™ × ×ª×•× ×™×" data-cost="18000">×”×¦×¤× ×ª ××¡×“×™ × ×ª×•× ×™× (18,000â‚ª)</option>
                        <option value="× ×™×˜×•×¨ ×¤×¢×™×œ×•×ª ××©×ª××©×™×" data-cost="25000">× ×™×˜×•×¨ ×¤×¢×™×œ×•×ª ××©×ª××©×™× (25,000â‚ª)</option>
                    </select>
                    <br>
                    <label><strong>×¡×™×‘×”:</strong></label>
                    <input type="text" id="reason1" class="input-full" placeholder="×œ××” ×‘×—×¨×ª ×‘×¤×ª×¨×•×Ÿ ×”×–×”?">
                </div>
                
                <div class="input-group">
                    <label><strong>2. ×¤×ª×¨×•×Ÿ ×©× ×™:</strong></label>
                    <select id="choice2" class="input-medium">
                        <option value="">×‘×—×¨ ×¤×ª×¨×•×Ÿ</option>
                        <option value="××™××•×ª ×“×•-×©×œ×‘×™ ××ª×§×“×" data-cost="15000">××™××•×ª ×“×•-×©×œ×‘×™ ××ª×§×“× (15,000â‚ª)</option>
                        <option value="××¢×¨×›×ª ×’×™×‘×•×™ ×•×©×—×–×•×¨" data-cost="12000">××¢×¨×›×ª ×’×™×‘×•×™ ×•×©×—×–×•×¨ (12,000â‚ª)</option>
                        <option value="×”×“×¨×›×•×ª ××‘×˜×—×” ×œ×¢×•×‘×“×™×" data-cost="8000">×”×“×¨×›×•×ª ××‘×˜×—×” ×œ×¢×•×‘×“×™× (8,000â‚ª)</option>
                        <option value="×—×•××ª ××© + × ×™×˜×•×¨" data-cost="20000">×—×•××ª ××© + × ×™×˜×•×¨ (20,000â‚ª)</option>
                        <option value="×”×¦×¤× ×ª ××¡×“×™ × ×ª×•× ×™×" data-cost="18000">×”×¦×¤× ×ª ××¡×“×™ × ×ª×•× ×™× (18,000â‚ª)</option>
                        <option value="× ×™×˜×•×¨ ×¤×¢×™×œ×•×ª ××©×ª××©×™×" data-cost="25000">× ×™×˜×•×¨ ×¤×¢×™×œ×•×ª ××©×ª××©×™× (25,000â‚ª)</option>
                    </select>
                    <br>
                    <label><strong>×¡×™×‘×”:</strong></label>
                    <input type="text" id="reason2" class="input-full" placeholder="×œ××” ×‘×—×¨×ª ×‘×¤×ª×¨×•×Ÿ ×”×–×”?">
                </div>
                
                <div class="input-group">
                    <label><strong>3. ×¤×ª×¨×•×Ÿ ×©×œ×™×©×™:</strong></label>
                    <select id="choice3" class="input-medium">
                        <option value="">×‘×—×¨ ×¤×ª×¨×•×Ÿ</option>
                        <option value="××™××•×ª ×“×•-×©×œ×‘×™ ××ª×§×“×" data-cost="15000">××™××•×ª ×“×•-×©×œ×‘×™ ××ª×§×“× (15,000â‚ª)</option>
                        <option value="××¢×¨×›×ª ×’×™×‘×•×™ ×•×©×—×–×•×¨" data-cost="12000">××¢×¨×›×ª ×’×™×‘×•×™ ×•×©×—×–×•×¨ (12,000â‚ª)</option>
                        <option value="×”×“×¨×›×•×ª ××‘×˜×—×” ×œ×¢×•×‘×“×™×" data-cost="8000">×”×“×¨×›×•×ª ××‘×˜×—×” ×œ×¢×•×‘×“×™× (8,000â‚ª)</option>
                        <option value="×—×•××ª ××© + × ×™×˜×•×¨" data-cost="20000">×—×•××ª ××© + × ×™×˜×•×¨ (20,000â‚ª)</option>
                        <option value="×”×¦×¤× ×ª ××¡×“×™ × ×ª×•× ×™×" data-cost="18000">×”×¦×¤× ×ª ××¡×“×™ × ×ª×•× ×™× (18,000â‚ª)</option>
                        <option value="× ×™×˜×•×¨ ×¤×¢×™×œ×•×ª ××©×ª××©×™×" data-cost="25000">× ×™×˜×•×¨ ×¤×¢×™×œ×•×ª ××©×ª××©×™× (25,000â‚ª)</option>
                    </select>
                    <br>
                    <label><strong>×¡×™×‘×”:</strong></label>
                    <input type="text" id="reason3" class="input-full" placeholder="×œ××” ×‘×—×¨×ª ×‘×¤×ª×¨×•×Ÿ ×”×–×”?">
                </div>
            </div>
            
            <div class="cost-calculator">
                <div class="cost-item">
                    <span>×¤×ª×¨×•×Ÿ ×¨××©×•×Ÿ:</span>
                    <span id="cost1">0â‚ª</span>
                </div>
                <div class="cost-item">
                    <span>×¤×ª×¨×•×Ÿ ×©× ×™:</span>
                    <span id="cost2">0â‚ª</span>
                </div>
                <div class="cost-item">
                    <span>×¤×ª×¨×•×Ÿ ×©×œ×™×©×™:</span>
                    <span id="cost3">0â‚ª</span>
                </div>
                <div class="cost-item cost-total">
                    <span>×¡×”"×› ×¢×œ×•×ª:</span>
                    <span id="totalCost">0â‚ª</span>
                </div>
                <div id="budgetWarning" class="validation-message" style="display:none;">
                    ××–×”×¨×”: ×”×¢×œ×•×ª ×¢×•×œ×” ×¢×œ ×”×ª×§×¦×™×‘ ×©×œ 50,000â‚ª!
                </div>
            </div>
        </div>

        <!-- ××¢×§×‘ ××—×¨ ×”×“×™×•×Ÿ -->
        <div class="section">
            <h2>×©×œ×‘ 4: ××¢×§×‘ ××—×¨ ×”×“×™×•×Ÿ ×”××¢××™×§</h2>
            <div class="warning-box">
                <label><strong>×¨×¢×™×•× ×•×ª ××¢× ×™×™× ×™× ×©×©××¢×ª×™ ××—×‘×¨×™ ×”×§×‘×•×¦×”:</strong></label>
                <textarea id="interestingIdeas" class="input-full" placeholder="×¨×©×•× ×›××Ÿ ×¨×¢×™×•× ×•×ª ×©×”×¤×ª×™×¢×• ××•×ª×š ××• ×©×œ× ×—×©×‘×ª ×¢×œ×™×”×..."></textarea>
            </div>
            
            <div class="info-box">
                <label><strong>×“×‘×¨×™× ×©×œ× ×—×©×‘×ª×™ ×¢×œ×™×”× ×œ×¤× ×™ ×”×“×™×•×Ÿ:</strong></label>
                <textarea id="newInsights" class="input-full" placeholder="××” ×’×™×œ×™×ª×™ ×—×“×© ×‘××”×œ×š ×”×“×™×•×Ÿ?"></textarea>
            </div>
        </div>

        <!-- ×”×—×œ×˜×” ×¡×•×¤×™×ª -->
        <div class="section">
            <h2>×©×œ×‘ 5: ×”×”×—×œ×˜×” ×”×¡×•×¤×™×ª ×©×œ ×”×§×‘×•×¦×”</h2>
            <table>
                <tr>
                    <th>×¤×ª×¨×•×Ÿ × ×‘×—×¨</th>
                    <th>×¢×œ×•×ª</th>
                    <th>×¡×™×‘×” ×¢×™×§×¨×™×ª ×œ×‘×—×™×¨×”</th>
                </tr>
                <tr>
                    <td><input type="text" placeholder="×¤×ª×¨×•×Ÿ ×¨××©×•×Ÿ ×©× ×‘×—×¨"></td>
                    <td><input type="text" class="input-small" placeholder="â‚ª"></td>
                    <td><input type="text" placeholder="×œ××” ×‘×—×¨× ×• ××ª ×–×”?"></td>
                </tr>
                <tr>
                    <td><input type="text" placeholder="×¤×ª×¨×•×Ÿ ×©× ×™ ×©× ×‘×—×¨"></td>
                    <td><input type="text" class="input-small" placeholder="â‚ª"></td>
                    <td><input type="text" placeholder="×œ××” ×‘×—×¨× ×• ××ª ×–×”?"></td>
                </tr>
                <tr>
                    <td><input type="text" placeholder="×¤×ª×¨×•×Ÿ ×©×œ×™×©×™ ×©× ×‘×—×¨"></td>
                    <td><input type="text" class="input-small" placeholder="â‚ª"></td>
                    <td><input type="text" placeholder="×œ××” ×‘×—×¨× ×• ××ª ×–×”?"></td>
                </tr>
            </table>
            
            <div class="input-group">
                <label><strong>×¡×”"×› ×¢×œ×•×ª ×”×”×—×œ×˜×”:</strong></label>
                <input type="text" id="finalTotalCost" class="input-medium" placeholder="0â‚ª">
            </div>
            
            <div class="warning-box">
                <div class="input-group">
                    <label><strong>×”×× ×× ×™ ××¡×›×™× ×¢× ×”×—×œ×˜×ª ×”×§×‘×•×¦×”?</strong></label>
                    <div style="margin: 10px 0;">
                        <input type="radio" id="agreeYes" name="agreement" value="×›×Ÿ">
                        <label for="agreeYes" style="margin-left: 10px;">×›×Ÿ</label>
                        <input type="radio" id="agreeNo" name="agreement" value="×œ×" style="margin-right: 20px;">
                        <label for="agreeNo" style="margin-left: 10px;">×œ×</label>
                    </div>
                </div>
                <label><strong>×”×¡×‘×¨:</strong></label>
                <textarea id="agreementExplanation" class="input-full" placeholder="×”×¡×‘×¨ ××“×•×¢ ××ª×” ××¡×›×™× ××• ×œ× ××¡×›×™× ×¢× ×”×—×œ×˜×ª ×”×§×‘×•×¦×”..."></textarea>
            </div>
        </div>

        <!-- ×¨×¤×œ×§×¦×™×” ××™×©×™×ª -->
        <div class="section">
            <h2>×¨×¤×œ×§×¦×™×” ××™×©×™×ª</h2>
            
            <div class="info-box">
                <label><strong>1. ××™×š ×ª×¨××ª×™ ×œ×“×™×•×Ÿ? (×ª×Ÿ ×“×•×’××” ×¡×¤×¦×™×¤×™×ª)</strong></label>
                <textarea id="contribution" class="input-full" placeholder="×ª××¨ ×‘×¦×•×¨×” ×¡×¤×¦×™×¤×™×ª ××™×š ×ª×¨××ª ×œ×“×™×•×Ÿ..."></textarea>
            </div>
            
            <div class="info-box">
                <label><strong>2. ××” ×œ××“×ª×™ ×—×“×© ×¢×œ ××‘×˜×—×ª ××™×“×¢ ××”×“×™×•×Ÿ?</strong></label>
                <textarea id="newLearning" class="input-full" placeholder="××™×–×” ×™×“×¢ ×—×“×© ×¨×›×©×ª ×¢×œ ××‘×˜×—×ª ××™×“×¢?"></textarea>
            </div>
            
            <div class="info-box">
                <label><strong>3. ××™×–×” ×ª×¤×§×™×“ ×”×™×” ×œ×™ ×”×›×™ ×§×œ/×§×©×” ×•×œ××”?</strong></label>
                <textarea id="roleReflection" class="input-full" placeholder="×”×¨×”×¨ ×¢×œ ×”×ª×¤×§×™×“ ×©×œ×š ×‘×“×™×•×Ÿ..."></textarea>
            </div>
            
            <div class="info-box">
                <label><strong>4. ×× ×”×™×™×ª×™ ×™×›×•×œ ×œ×©× ×•×ª ××©×”×• ×‘×ª×”×œ×™×š, ××” ×–×” ×”×™×”?</strong></label>
                <textarea id="processImprovement" class="input-full" placeholder="××” ×”×™×™×ª ××©× ×” ×‘×ª×”×œ×™×š ×”×“×™×•×Ÿ?"></textarea>
            </div>
        </div>

        <!-- ××¢×§×‘ ×‘×™×¦×•×¢ -->
        <div class="section">
            <h2>××¢×§×‘ ×‘×™×¦×•×¢ - ×¦×™×•× ×™× ×¢×¦××™×™×</h2>
            <p><strong>×“×¨×’ ××ª ×¢×¦××š (1-4):</strong></p>
            
            <div class="rating-group">
                <span><strong>×”×©×ª×ª×¤×•×ª ×¤×¢×™×œ×”:</strong></span>
                <div class="rating-buttons">
                    <div class="rating-btn" data-rating="participation" data-value="1">1</div>
                    <div class="rating-btn" data-rating="participation" data-value="2">2</div>
                    <div class="rating-btn" data-rating="participation" data-value="3">3</div>
                    <div class="rating-btn" data-rating="participation" data-value="4">4</div>
                </div>
            </div>
            
            <div class="rating-group">
                <span><strong>×”×§×©×‘×” ×œ××—×¨×™×:</strong></span>
                <div class="rating-buttons">
                    <div class="rating-btn" data-rating="listening" data-value="1">1</div>
                    <div class="rating-btn" data-rating="listening" data-value="2">2</div>
                    <div class="rating-btn" data-rating="listening" data-value="3">3</div>
                    <div class="rating-btn" data-rating="listening" data-value="4">4</div>
                </div>
            </div>
            
            <div class="rating-group">
                <span><strong>×‘×™×¦×•×¢ ×”×ª×¤×§×™×“ ×©×œ×™:</strong></span>
                <div class="rating-buttons">
                    <div class="rating-btn" data-rating="roleExecution" data-value="1">1</div>
                    <div class="rating-btn" data-rating="roleExecution" data-value="2">2</div>
                    <div class="rating-btn" data-rating="roleExecution" data-value="3">3</div>
                    <div class="rating-btn" data-rating="roleExecution" data-value="4">4</div>
                </div>
            </div>
            
            <div class="rating-group">
                <span><strong>×›×™×‘×•×“ ×“×¢×•×ª ×©×•× ×•×ª:</strong></span>
                <div class="rating-buttons">
                    <div class="rating-btn" data-rating="respect" data-value="1">1</div>
                    <div class="rating-btn" data-rating="respect" data-value="2">2</div>
                    <div class="rating-btn" data-rating="respect" data-value="3">3</div>
                    <div class="rating-btn" data-rating="respect" data-value="4">4</div>
                </div>
            </div>
            
            <div class="rating-group">
                <span><strong>×ª×¨×•××” ×œ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª:</strong></span>
                <div class="rating-buttons">
                    <div class="rating-btn" data-rating="problemSolving" data-value="1">1</div>
                    <div class="rating-btn" data-rating="problemSolving" data-value="2">2</div>
                    <div class="rating-btn" data-rating="problemSolving" data-value="3">3</div>
                    <div class="rating-btn" data-rating="problemSolving" data-value="4">4</div>
                </div>
            </div>
        </div>

        <!-- ××©×™××” ×œ×‘×™×ª -->
        <div class="section">
            <h2>×”××©×™××” ×©×œ×™ ×œ×‘×™×ª</h2>
            <div class="warning-box">
                <p><strong>×‘×”×ª×‘×¡×¡ ×¢×œ ×”×ª×¤×§×™×“ ×©×”×™×” ×œ×™ ×‘×“×™×•×Ÿ:</strong></p>
                
                <div class="info-box">
                    <strong>×× ×—×” ×“×™×•×Ÿ:</strong> ×”×›×Ÿ ××¦×’×ª 5 ×“×§×•×ª ×¢×œ ×”×”×—×œ×˜×”<br>
                    <strong>×¨×©×× ×™×:</strong> ×¢×¨×•×š ××ª ×¡×™×›×•× ×”×“×™×•×Ÿ ×•×©×œ×— ×œ×›×•×œ×<br>
                    <strong>×©××¨ ×”×§×‘×•×¦×”:</strong> ××¦× ×‘×—×“×©×•×ª ×“×•×’××” ×œ×—×‘×¨×” ×©× ×¤×’×¢×” ××”×™×¢×“×¨ ×”×¤×ª×¨×•×Ÿ ×©×œ× ×‘×—×¨× ×•
                </div>
                
                <label><strong>×”××©×™××” ×”×¡×¤×¦×™×¤×™×ª ×©×œ×™:</strong></label>
                <textarea id="homeworkTask" class="input-full" placeholder="×¨×©×•× ××ª ×”××©×™××” ×”×¡×¤×¦×™×¤×™×ª ×©×œ×š ×œ×‘×™×ª..."></textarea>
            </div>
        </div>

        <!-- ×¡×™×›×•× ××™×©×™ -->
        <div class="section">
            <h2>×¡×™×›×•× ××™×©×™</h2>
            <div class="success-box">
                <label><strong>×”××¡×§× ×•×ª ×”×—×©×•×‘×•×ª ×‘×™×•×ª×¨ ××”×ª×¨×’×™×œ:</strong></label>
                <textarea id="keyTakeaways" class="input-full" placeholder="××” ×”×“×‘×¨×™× ×”×—×©×•×‘×™× ×‘×™×•×ª×¨ ×©×œ××“×ª ××”×ª×¨×’×™×œ ×”×–×”?"></textarea>
            </div>
        </div>

        <!-- ×—×œ×•×Ÿ ×”×§×•×¤×¥ -->
        <div id="criteriaModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>×§×¨×™×˜×¨×™×•× ×™× ×œ×”×¢×¨×›×ª ×¤×ª×¨×•× ×•×ª</h2>
                <ul>
                    <li><strong>×¢×œ×•×ª-×ª×•×¢×œ×ª:</strong> ×¢×“ ×›××” ×”×”×©×§×¢×” ×”×›×¡×¤×™×ª ××¦×“×™×§×” ××ª ×”×¢×¨×š ×©×”×¤×ª×¨×•×Ÿ ××¡×¤×§.</li>
                    <li><strong>×¨××ª ×”×¡×™×›×•×Ÿ ×©××˜×•×¤×œ×ª:</strong> ×‘××™×–×• ××™×“×” ×”×¤×ª×¨×•×Ÿ ××¤×—×™×ª ×¡×™×›×•× ×™× ×§×™×™××™×.</li>
                    <li><strong>×§×œ×•×ª ×™×™×©×•×:</strong> ×›××” ×¤×©×•×˜ ×œ×”×˜××™×¢ ××ª ×”×¤×ª×¨×•×Ÿ ××‘×—×™× ×ª ××©××‘×™× ×•×›×•×— ××“×.</li>
                    <li><strong>×¢××™×“×” ×‘×ª×§× ×•×ª ××™×¨×•×¤×™×•×ª:</strong> ×”×× ×”×¤×ª×¨×•×Ÿ ×ª×•×× ××ª ×”×—×•×§×™× ×•×”×¨×’×•×œ×¦×™×•×ª ×”×¨×œ×•×•× ×˜×™×•×ª (×›×’×•×Ÿ GDPR).</li>
                    <li><strong>×”×©×¤×¢×” ×¢×œ ×¤×¨×•×“×•×§×˜×™×‘×™×•×ª ×”×¢×•×‘×“×™×:</strong> ×”×× ×”×¤×ª×¨×•×Ÿ ××™×™×¢×œ ××ª ×”×¢×‘×•×“×” ×”×™×•××™×•××™×ª.</li>
                    <li><strong>×–××Ÿ ×™×™×©×•×:</strong> ××©×š ×”×–××Ÿ ×”×“×¨×•×© ×¢×“ ×©×”×¤×ª×¨×•×Ÿ ×™×¤×¢×œ ×‘×¤×•×¢×œ.</li>
                    <li><strong>×“×¨×™×©×•×ª ×ª×—×–×•×§×”:</strong> ×›××” ×ª×—×–×•×§×” × ×“×¨×©×ª ×œ××—×¨ ×”×”×˜××¢×”.</li>
                    <li><strong>×’××™×©×•×ª ×•×™×›×•×œ×ª ×”×¨×—×‘×”:</strong> ×¢×“ ×›××” ×”×¤×ª×¨×•×Ÿ × ×™×ª×Ÿ ×œ×”×ª×××•×ª ×¢×ª×™×“×™×•×ª.</li>
                    <li><strong>×”×©×¤×¢×” ×¡×‘×™×‘×ª×™×ª:</strong> ××”×™ ×”×”×©×¤×¢×” ×©×œ ×”×¤×ª×¨×•×Ÿ ×¢×œ ××©××‘×™ ×˜×‘×¢ ×•××§×•×œ×•×’×™×”.</li>
                    <li><strong>×”×©×¤×¢×” ×¢×œ ××•× ×™×˜×™×Ÿ:</strong> ×”×× ×”×¤×ª×¨×•×Ÿ ××©×¤×¨ ××ª ×ª×“××™×ª ×”××¨×’×•×Ÿ ×‘×¢×™× ×™ ×”×¦×™×‘×•×¨.</li>
                    <li><strong>×¨××ª ×—×“×©× ×•×ª:</strong> ×¢×“ ×›××” ×”×¤×ª×¨×•×Ÿ ××‘×™× ×¢×¨×š ×—×“×©× ×™ ×•×©×•× ×”.</li>
                    <li><strong>×”×ª×××” ×œ××¡×˜×¨×˜×’×™×” ×”××¨×’×•× ×™×ª:</strong> ×”×× ×”×¤×ª×¨×•×Ÿ ×ª×•×× ×œ×™×¢×“×™× ××¨×•×›×™ ×”×˜×•×•×— ×©×œ ×”××¨×’×•×Ÿ.</li>
                    <li><strong>×ª××™×›×” ×˜×›× ×™×ª/×§×”×™×œ×”:</strong> ×”×× ×§×™×™××ª ×ª××™×›×” ××§×¦×•×¢×™×ª ××• ×§×”×™×œ×ª×™×ª ×–××™× ×”.</li>
                    <li><strong>×¢×œ×•×ª ×”×›×©×¨×”:</strong> ×”×× ×”×¢×•×‘×“×™× ×¦×¨×™×›×™× ×œ×¢×‘×•×¨ ×”×›×©×¨×” ××™×•×—×“×ª ×œ×™×™×©×•× ×”×¤×ª×¨×•×Ÿ.</li>
                    <li><strong>×”×©×¤×¢×” ×¢×œ ××™×›×•×ª ×”×©×™×¨×•×ª/×”××•×¦×¨:</strong> ×”×× ×”××™×›×•×ª ×”×¡×•×¤×™×ª ××©×ª×¤×¨×ª ×‘×–×›×•×ª ×”×¤×ª×¨×•×Ÿ.</li>
                    <li><strong>×××™× ×•×ª ×•×‘×’×¨×•×ª ×”×¤×ª×¨×•×Ÿ:</strong> ×”×× ××“×•×‘×¨ ×‘×¤×ª×¨×•×Ÿ ×™×¦×™×‘ ×©× ×‘×“×§ ×•×”×•×›×— ×‘×©×•×§.</li>
                    <li><strong>×©×™×¢×•×¨ ×”×—×–×¨ ×”×©×§×¢×” (ROI):</strong> ×ª×•×š ×›××” ×–××Ÿ ×¦×¤×•×™×” ×”×—×–×¨×ª ×”×”×©×§×¢×”.</li>
                </ul>
            </div>
        </div>

        <!-- ×—×œ×•×Ÿ ×”×§×•×¤×¥ -->
        <div class="modal" id="optionsModal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>××¤×©×¨×•×™×•×ª ××‘×˜×—×” ×•××™×“×¢ × ×•×¡×£</h2>

                <div class="option">
                    <h3>××™××•×ª ×“×•-×©×œ×‘×™ ××ª×§×“× <span class="price">(15,000â‚ª/×©× ×”)</span></h3>
                    <ul>
                      <li>××™××•×ª ×‘×™×•××˜×¨×™ + SMS</li>
                      <li>×”×’× ×” ××¤× ×™ ×¤×¨×™×¦×•×ª ×œ×—×©×‘×•× ×•×ª</li>
                    </ul>
                </div>

                <div class="option">
                    <h3>××¢×¨×›×ª ×’×™×‘×•×™ ×•×©×—×–×•×¨ <span class="price">(12,000â‚ª/×©× ×”)</span></h3>
                    <ul>
                      <li>×’×™×‘×•×™ ××•×˜×•××˜×™ ×™×•××™</li>
                      <li>×©×—×–×•×¨ ××”×™×¨ ×‘××§×¨×” ×—×™×¨×•×</li>
                    </ul>
                </div>

              <div class="option">
                <h3>×”×“×¨×›×•×ª ××‘×˜×—×” ×œ×¢×•×‘×“×™× <span class="price">(8,000â‚ª/×©× ×”)</span></h3>
                <ul>
                  <li>×¡×™××•×œ×¦×™×•×ª ×¤×™×©×™× ×’</li>
                  <li>×”×“×¨×›×•×ª ×¨×‘×¢×•× ×™×•×ª</li>
                </ul>
              </div>

              <div class="option">
                <h3>×—×•××ª ××© ××ª×§×“××ª + × ×™×˜×•×¨ <span class="price">(20,000â‚ª/×©× ×”)</span></h3>
                <ul>
                  <li>×–×™×”×•×™ ×”×ª×§×¤×•×ª ×‘×–××Ÿ ×××ª</li>
                  <li>×—×¡×™××” ××•×˜×•××˜×™×ª ×©×œ ××™×•××™×</li>
                </ul>
              </div>

              <div class="option">
                <h3>×”×¦×¤× ×ª ××¡×“×™ × ×ª×•× ×™× <span class="price">(18,000â‚ª/×©× ×”)</span></h3>
                <ul>
                  <li>×”×¦×¤× ×” ××œ××” ×©×œ ×›×œ ×”××™×“×¢ ×”×¨×’×™×©</li>
                  <li>××¤×ª×—×•×ª ×”×¦×¤× ×” ××‘×•×–×¨×™×</li>
                </ul>
              </div>

              <div class="option">
                <h3>× ×™×˜×•×¨ ×¤×¢×™×œ×•×ª ××©×ª××©×™× <span class="price">(25,000â‚ª/×©× ×”)</span></h3>
                <ul>
                  <li>××¢×§×‘ ××—×¨ ×’×™×©×•×ª ×œ×§×‘×¦×™×</li>
                  <li>×–×™×”×•×™ ×¤×¢×™×œ×•×ª ×—×¨×™×’×”</li>
                </ul>
              </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn btn-primary" onclick="saveProgress()">
            ğŸ’¾ ×©××™×¨×” ×–×× ×™×ª
        </button>
        <button class="btn btn-success" onclick="generateSummary()">
            ğŸ“„ ×™×¦×™×¨×ª ×¡×™×›×•×
        </button>
        <button class="btn btn-warning" onclick="downloadWorksheet()">
            ğŸ“¥ ×”×•×¨×“×ª ×§×•×‘×¥
        </button>
    </div>

    <script>
        // ××©×ª× ×™× ×’×œ×•×‘×œ×™×™×
        let selectedRole = '';
        let formData = {};
        let ratings = {};

        // ××ª×—×•×œ ×”×“×£
        document.addEventListener('DOMContentLoaded', function() {
            setTodayDate();
            setupEventListeners();
            loadSavedData();
            updateProgress();
        });

        // ×”×’×“×¨×ª ×ª××¨×™×š ×”×™×•×
        function setTodayDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('lessonDate').value = today;
        }

        // ×”×’×“×¨×ª ×××–×™× ×™× ×œ××™×¨×•×¢×™×
        function setupEventListeners() {
            // ×‘×—×™×¨×ª ×ª×¤×§×™×“
            document.querySelectorAll('.role-option').forEach(option => {
                option.addEventListener('click', function() {
                    selectRole(this.dataset.role);
                });
            });

            // ×—×™×©×•×‘ ×¢×œ×•×™×•×ª
            ['choice1', 'choice2', 'choice3'].forEach(id => {
                document.getElementById(id).addEventListener('change', calculateCosts);
            });

            // ×“×™×¨×•×’×™×
            document.querySelectorAll('.rating-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    setRating(this.dataset.rating, this.dataset.value);
                });
            });

            // ×©××™×¨×” ××•×˜×•××˜×™×ª
            document.addEventListener('input', function() {
                updateProgress();
                autoSave();
            });

            document.addEventListener('change', function() {
                updateProgress();
                autoSave();
            });
        }

        // ×‘×—×™×¨×ª ×ª×¤×§×™×“
        function selectRole(role) {
            // ×”×¡×¨×ª ×‘×—×™×¨×” ×§×•×“××ª
            document.querySelectorAll('.role-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // ×”×•×¡×¤×ª ×‘×—×™×¨×” ×—×“×©×”
            document.querySelector(`[data-role="${role}"]`).classList.add('selected');
            selectedRole = role;
            
            // ×”×•×¡×¤×ª ×ª×™××•×¨ ×ª×¤×§×™×“ ××•×˜×•××˜×™
            const roleDescriptions = {
                '×× ×—×” ×“×™×•×Ÿ': '××•×‘×™×œ ××ª ×”×ª×”×œ×™×š, ××•×•×“× ×©×›×•×œ× ××©×ª×ª×¤×™×, ×©×•××¨ ×¢×œ ×”×¡×“×¨ ×•×× ×”×œ ××ª ×”××¢×‘×¨×™× ×‘×™×Ÿ ×”×©×œ×‘×™×',
                '×¨×©××Ÿ ×¨××©×™': '×›×•×ª×‘ ×¢×œ ×”×œ×•×— ××ª ×›×œ ×”×¨×¢×™×•× ×•×ª ×•×”×”×—×œ×˜×•×ª, ××ª×¢×“ ×‘×¦×•×¨×” ×‘×¨×•×¨×” ×•××¡×•×“×¨×ª',
                '×¨×©××Ÿ ××‘×§×¨': '×‘×•×“×§ ×©×”×›×œ × ×¨×©× × ×›×•×Ÿ, ××•×•×“× ×©×œ× × ×©×›×— ×›×œ×•× ×•×©×•××¨ ×¢×œ ×“×™×•×§ ×”××™×“×¢',
                '×©×•××¨ ×–××Ÿ': '×¢×•×§×‘ ××—×¨×™ ×”×©×¢×•×Ÿ, ××–×›×™×¨ ×œ××¢×‘×¨×™ ×©×œ×‘×™×, ××•×•×“× ×©×”×“×™×•×Ÿ ××ª×§×“× ×‘×–××Ÿ',
                '××ª×•×•×š': '×¢×•×–×¨ ×›×©×™×© ×•×™×›×•×—×™×, ××¢×•×“×“ ×ª×œ××™×“×™× ×©×§×˜×™×, ×©×•××¨ ×¢×œ ××•×•×™×¨×” ×—×™×•×‘×™×ª',
                '×“×•×‘×¨ ×§×‘×•×¦×”': '××¦×™×’ ×œ××•×¨×” ××ª ×”×—×œ×˜×ª ×”×§×‘×•×¦×” ×‘×¡×•×£, ××™×™×¦×’ ××ª ×”×§×‘×•×¦×” ×›×œ×¤×™ ×—×•×¥'
            };
            
            document.getElementById('roleDescription').value = roleDescriptions[role] || '';
        }

        // ×—×™×©×•×‘ ×¢×œ×•×™×•×ª
        function calculateCosts() {
            let total = 0;
            
            ['choice1', 'choice2', 'choice3'].forEach((choiceId, index) => {
                const select = document.getElementById(choiceId);
                const costElement = document.getElementById(`cost${index + 1}`);
                
                if (select.value && select.selectedOptions[0]) {
                    const cost = parseInt(select.selectedOptions[0].dataset.cost) || 0;
                    costElement.textContent = `${cost.toLocaleString()}â‚ª`;
                    total += cost;
                } else {
                    costElement.textContent = '0â‚ª';
                }
            });
            
            document.getElementById('totalCost').textContent = `${total.toLocaleString()}â‚ª`;
            
            // ××–×”×¨×” ×¢×œ ×ª×§×¦×™×‘
            const warningElement = document.getElementById('budgetWarning');
            if (total > 50000) {
                warningElement.style.display = 'block';
                warningElement.textContent = `××–×”×¨×”: ×”×¢×œ×•×ª ${total.toLocaleString()}â‚ª ×¢×•×œ×” ×¢×œ ×”×ª×§×¦×™×‘ ×©×œ 50,000â‚ª!`;
            } else {
                warningElement.style.display = 'none';
            }
        }

        // ×”×’×“×¨×ª ×“×™×¨×•×’
        function setRating(category, value) {
            // ×”×¡×¨×ª ×‘×—×™×¨×•×ª ×§×•×“××•×ª ×‘××•×ª×” ×§×˜×’×•×¨×™×”
            document.querySelectorAll(`[data-rating="${category}"]`).forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // ×”×•×¡×¤×ª ×”×‘×—×™×¨×” ×”×—×“×©×”
            document.querySelector(`[data-rating="${category}"][data-value="${value}"]`).classList.add('selected');
            ratings[category] = parseInt(value);
        }

        // ×¢×“×›×•×Ÿ ×”×ª×§×“××•×ª
        function updateProgress() {
            const fields = [
                'studentName', 'lessonDate', 'roleDescription',
                'choice1', 'choice2', 'choice3',
                'interestingIdeas', 'newInsights',
                'contribution', 'newLearning', 'roleReflection', 'processImprovement'
            ];
            
            let completed = 0;
            const total = fields.length + Object.keys(ratings).length + (selectedRole ? 1 : 0);
            
            fields.forEach(fieldId => {
                const element = document.getElementById(fieldId);
                if (element && element.value.trim()) {
                    completed++;
                }
            });
            
            completed += Object.keys(ratings).length;
            if (selectedRole) completed++;
            
            const percentage = Math.round((completed / total) * 100);
            document.getElementById('progressBar').style.width = `${percentage}%`;
            document.getElementById('progressText').textContent = `×”×ª×§×“××•×ª: ${completed} ××ª×•×š ${total} ×©×œ×‘×™× ×”×•×©×œ××•`;
            document.getElementById('completionStatus').textContent = `××•×œ×: ${percentage}%`;
        }

        // ×©××™×¨×” ××•×˜×•××˜×™×ª
        function autoSave() {
            const data = collectFormData();
            localStorage.setItem('discussionWorksheet', JSON.stringify(data));
        }

        // ×˜×¢×™× ×ª × ×ª×•× ×™× ×©××•×¨×™×
        function loadSavedData() {
            const saved = localStorage.getItem('discussionWorksheet');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    restoreFormData(data);
                } catch (e) {
                    console.log('×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™× ×©××•×¨×™×');
                }
            }
        }

        // ××™×¡×•×£ × ×ª×•× ×™ ×”×˜×•×¤×¡
        function collectFormData() {
            const data = {
                studentName: document.getElementById('studentName').value,
                lessonDate: document.getElementById('lessonDate').value,
                selectedRole: selectedRole,
                roleDescription: document.getElementById('roleDescription').value,
                choices: {
                    choice1: document.getElementById('choice1').value,
                    choice2: document.getElementById('choice2').value,
                    choice3: document.getElementById('choice3').value,
                    reason1: document.getElementById('reason1').value,
                    reason2: document.getElementById('reason2').value,
                    reason3: document.getElementById('reason3').value
                },
                discussion: {
                    interestingIdeas: document.getElementById('interestingIdeas').value,
                    newInsights: document.getElementById('newInsights').value
                },
                reflection: {
                    contribution: document.getElementById('contribution').value,
                    newLearning: document.getElementById('newLearning').value,
                    roleReflection: document.getElementById('roleReflection').value,
                    processImprovement: document.getElementById('processImprovement').value
                },
                ratings: ratings,
                homework: document.getElementById('homeworkTask').value,
                keyTakeaways: document.getElementById('keyTakeaways').value,
                timestamp: new Date().toISOString()
            };
            return data;
        }

        // ×©×—×–×•×¨ × ×ª×•× ×™ ×˜×•×¤×¡
        function restoreFormData(data) {
            if (data.studentName) document.getElementById('studentName').value = data.studentName;
            if (data.lessonDate) document.getElementById('lessonDate').value = data.lessonDate;
            if (data.selectedRole) selectRole(data.selectedRole);
            if (data.roleDescription) document.getElementById('roleDescription').value = data.roleDescription;
            
            if (data.choices) {
                Object.keys(data.choices).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) element.value = data.choices[key];
                });
                calculateCosts();
            }
            
            if (data.discussion) {
                Object.keys(data.discussion).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) element.value = data.discussion[key];
                });
            }
            
            if (data.reflection) {
                Object.keys(data.reflection).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) element.value = data.reflection[key];
                });
            }
            
            if (data.ratings) {
                Object.keys(data.ratings).forEach(category => {
                    setRating(category, data.ratings[category]);
                });
            }
            
            if (data.homework) document.getElementById('homeworkTask').value = data.homework;
            if (data.keyTakeaways) document.getElementById('keyTakeaways').value = data.keyTakeaways;
        }

        // ×©××™×¨×ª ×”×ª×§×“××•×ª
        function saveProgress() {
            autoSave();
            alert('×”× ×ª×•× ×™× × ×©××¨×• ×‘×”×¦×œ×—×”! ğŸ’¾');
        }

        // ×™×¦×™×¨×ª ×¡×™×›×•×
        function generateSummary() {
            const data = collectFormData();
            const summaryWindow = window.open('', '_blank');
            
            const summaryHTML = `
                <!DOCTYPE html>
                <html lang="he" dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>×¡×™×›×•× ×ª×¨×’×™×œ ×“×™×•×Ÿ - ${data.studentName}</title>
                    <style>
                        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
                        .header { text-align: center; border-bottom: 2px solid #2196F3; padding-bottom: 20px; margin-bottom: 30px; }
                        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
                        .section h3 { color: #1976D2; margin-top: 0; }
                        .rating { display: inline-block; background: #2196F3; color: white; padding: 2px 8px; border-radius: 3px; margin: 2px; }
                        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: right; }
                        th { background: #f5f5f5; }
                        @media print { body { margin: 0; } }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>×¡×™×›×•× ×ª×¨×’×™×œ ×“×™×•×Ÿ ×‘×§×‘×•×¦×”</h1>
                        <h2>××‘×˜×—×ª ××™×“×¢ - ×—×‘×¨×ª SecureTech</h2>
                        <p><strong>×ª×œ××™×“:</strong> ${data.studentName} | <strong>×ª××¨×™×š:</strong> ${data.lessonDate}</p>
                    </div>
                    
                    <div class="section">
                        <h3>×ª×¤×§×™×“ ×‘×“×™×•×Ÿ</h3>
                        <p><strong>×”×ª×¤×§×™×“:</strong> ${data.selectedRole}</p>
                        <p><strong>×ª×™××•×¨:</strong> ${data.roleDescription}</p>
                    </div>
                    
                    <div class="section">
                        <h3>×”×‘×—×™×¨×•×ª ×”××™×©×™×•×ª</h3>
                        <table>
                            <tr><th>×¤×ª×¨×•×Ÿ</th><th>×¡×™×‘×”</th></tr>
                            <tr><td>${data.choices.choice1}</td><td>${data.choices.reason1}</td></tr>
                            <tr><td>${data.choices.choice2}</td><td>${data.choices.reason2}</td></tr>
                            <tr><td>${data.choices.choice3}</td><td>${data.choices.reason3}</td></tr>
                        </table>
                    </div>
                    
                    <div class="section">
                        <h3>×ª×•×‘× ×•×ª ××”×“×™×•×Ÿ</h3>
                        <p><strong>×¨×¢×™×•× ×•×ª ××¢× ×™×™× ×™×:</strong> ${data.discussion.interestingIdeas}</p>
                        <p><strong>×ª×’×œ×™×•×ª ×—×“×©×•×ª:</strong> ${data.discussion.newInsights}</p>
                    </div>
                    
                    <div class="section">
                        <h3>×¨×¤×œ×§×¦×™×” ××™×©×™×ª</h3>
                        <p><strong>×”×ª×¨×•××” ×©×œ×™:</strong> ${data.reflection.contribution}</p>
                        <p><strong>××” ×œ××“×ª×™:</strong> ${data.reflection.newLearning}</p>
                        <p><strong>×”×¨×”×•×¨×™× ×¢×œ ×”×ª×¤×§×™×“:</strong> ${data.reflection.roleReflection}</p>
                        <p><strong>×©×™×¤×•×¨×™× ××•×¦×¢×™×:</strong> ${data.reflection.processImprovement}</p>
                    </div>
                    
                    <div class="section">
                        <h3>×”×¢×¨×›×” ×¢×¦××™×ª</h3>
                        ${Object.keys(data.ratings).map(key => 
                            `<span class="rating">${translateRating(key)}: ${data.ratings[key]}/4</span>`
                        ).join(' ')}
                    </div>
                    
                    <div class="section">
                        <h3>××¡×§× ×•×ª ×•××©×™××•×ª</h3>
                        <p><strong>××©×™××ª ×‘×™×ª:</strong> ${data.homework}</p>
                        <p><strong>××¡×§× ×•×ª ×¢×™×§×¨×™×•×ª:</strong> ${data.keyTakeaways}</p>
                    </div>
                    
                    <div class="section">
                        <p style="text-align: center; color: #666; font-size: 12px;">
                            × ×•×¦×¨ ×‘××•×¤×Ÿ ××•×˜×•××˜×™ ×‘-${new Date().toLocaleDateString('he-IL')} | 
                            ×ª×¨×’×™×œ ×“×™×•×Ÿ ××™× ×˜×¨××§×˜×™×‘×™
                        </p>
                    </div>
                </body>
                </html>
            `;
            
            summaryWindow.document.write(summaryHTML);
            summaryWindow.document.close();
        }

        // ×ª×¨×’×•× ×©××•×ª ×“×™×¨×•×’×™×
        function translateRating(key) {
            const translations = {
                'participation': '×”×©×ª×ª×¤×•×ª ×¤×¢×™×œ×”',
                'listening': '×”×§×©×‘×” ×œ××—×¨×™×',
                'roleExecution': '×‘×™×¦×•×¢ ×”×ª×¤×§×™×“',
                'respect': '×›×™×‘×•×“ ×“×¢×•×ª',
                'problemSolving': '×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª'
            };
            return translations[key] || key;
        }

        // ×”×•×¨×“×ª ×§×•×‘×¥
        function downloadWorksheet() {
            const data = collectFormData();
            const content = JSON.stringify(data, null, 2);
            const blob = new Blob([content], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `worksheet_${data.studentName}_${data.lessonDate}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('×”×§×•×‘×¥ ×”×•×¨×“ ×‘×”×¦×œ×—×”! ğŸ“¥');
        }

        // ×”×©×’×ª ×”××œ×× ×˜×™×
        const modal = document.getElementById("criteriaModal");
        const btn = document.getElementById("criteriaBtn");
        const span = document.getElementsByClassName("close")[0];

        // ×¤×ª×™×—×ª ×”×—×œ×•×Ÿ
        btn.onclick = function() {
          modal.style.display = "block";
        }


        const modalOptions = document.getElementById("optionsModal");
        const btnOptions = document.getElementById("optionsBtn");
        const spanOptions = document.getElementsByClassName("close")[0];

        btnOptions.onclick = function() {
          modalOptions.style.display = "block";
        }

         // ×¡×’×™×¨×” ×¢×œ ×™×“×™ ×›×œ ×›×¤×ª×•×¨ X
        document.querySelectorAll(".close").forEach((closeBtn) => {
          closeBtn.onclick = () => {
            closeBtn.closest(".modal").style.display = "none";
          };
        });

        // ×¡×’×™×¨×” ×‘×œ×—×™×¦×” ××—×•×¥ ×œ×—×œ×•×Ÿ
        window.onclick = (event) => {
          if (event.target.classList.contains("modal")) {
            event.target.style.display = "none";
          }
        };
    </script>
</body>
</html>