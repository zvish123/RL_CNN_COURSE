<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××‘×¦×¢ ×©×‘×™×œ ×”× ×ª×•× ×™× - ×ª×¨×’×™×œ ××™× ×˜×¨××§×˜×™×‘×™</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .save-controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .save-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .save-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .load-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .load-btn:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .reset-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .reset-btn:hover {
            background: #d32f2f;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        #fileInput {
            display: none;
        }

        .auto-save-indicator {
            color: #4CAF50;
            font-size: 0.9em;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .auto-save-indicator.show {
            opacity: 1;
        }

        .mission-brief {
            background: #fff3cd;
            border-right: 5px solid #ffc107;
            padding: 20px;
            margin: 20px;
            border-radius: 10px;
        }

        .mission-brief h2 {
            color: #856404;
            margin-bottom: 10px;
        }

        .progress-container {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .tabs {
            display: flex;
            background: #e9ecef;
            padding: 0 20px;
            overflow-x: auto;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1em;
            font-weight: bold;
            color: #6c757d;
            position: relative;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab:hover {
            color: #495057;
            background: rgba(0,0,0,0.05);
        }

        .tab.active {
            color: #667eea;
            background: white;
        }

        .tab.completed::after {
            content: "âœ“";
            position: absolute;
            top: 5px;
            left: 5px;
            background: #4CAF50;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .content {
            padding: 40px;
        }

        .stage {
            display: none;
            animation: fadeIn 0.5s;
        }

        .stage.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .theory-box {
            background: #e7f3ff;
            border-right: 4px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .theory-box h3 {
            color: #1976D2;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .theory-box h3::before {
            content: "ğŸ“š";
            font-size: 1.5em;
        }

        .theory-box p, .theory-box ul {
            line-height: 1.8;
            color: #333;
        }

        .theory-box ul {
            margin-right: 20px;
            margin-top: 10px;
        }

        .theory-box li {
            margin: 8px 0;
        }

        .exercise-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .exercise-section h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .question {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-right: 3px solid #667eea;
        }

        .question-number {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .question p {
            margin: 10px 0;
            line-height: 1.6;
        }

        input[type="text"], textarea, select {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
            direction:ltr;
        }

        .code-block .comment {
            color: #6A9955;
        }

        .code-block .keyword {
            color: #569CD6;
        }

        .code-block .string {
            color: #CE9178;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }

        .data-table th, .data-table td {
            padding: 12px;
            text-align: right;
            border-bottom: 1px solid #ddd;
        }

        .data-table th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        .data-table tr:hover {
            background: #f5f5f5;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 5px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: #4CAF50;
            color: white;
        }

        .btn-success:hover {
            background: #45a049;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .feedback {
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            display: none;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .feedback.success {
            background: #d4edda;
            border-right: 4px solid #28a745;
            color: #155724;
        }

        .feedback.error {
            background: #f8d7da;
            border-right: 4px solid #dc3545;
            color: #721c24;
        }

        .feedback.info {
            background: #d1ecf1;
            border-right: 4px solid #17a2b8;
            color: #0c5460;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #dee2e6;
        }

        .hint-box {
            background: #fff8e1;
            border-right: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            cursor: pointer;
        }

        .hint-box h4 {
            color: #f57c00;
            margin-bottom: 10px;
        }

        .hint-content {
            display: none;
            margin-top: 10px;
            color: #555;
        }

        .hint-box.open .hint-content {
            display: block;
        }

        .network-diagram {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .score-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }

        .score-card h3 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .icon {
            font-size: 1.5em;
            margin-left: 10px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .tabs {
                padding: 0 10px;
            }

            .tab {
                padding: 12px 15px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ•µï¸â€â™‚ï¸ ××‘×¦×¢ ×©×‘×™×œ ×”× ×ª×•× ×™×</h1>
            <p class="subtitle">×ª×¨×’×™×œ ××™× ×˜×¨××§×˜×™×‘×™ ×‘×©×›×‘×ª ×”×¨×©×ª | ××’××ª ×¡×™×™×‘×¨</p>
            
            <div class="save-controls">
                <button class="save-btn" onclick="saveToFile()">
                    ğŸ’¾ ×©××•×¨ ×ª×©×•×‘×•×ª ×œ×§×•×‘×¥
                </button>
                <button class="load-btn" onclick="document.getElementById('fileInput').click()">
                    ğŸ“ ×˜×¢×Ÿ ×ª×©×•×‘×•×ª ××§×•×‘×¥
                </button>
                <button class="reset-btn" onclick="resetProgress()">
                    ğŸ”„ ×”×ª×—×œ ××—×“×©
                </button>
                <input type="file" id="fileInput" accept=".json" onchange="loadFromFile(event)">
            </div>
            
            <div class="auto-save-indicator" id="autoSaveIndicator">
                âœ“ × ×©××¨ ××•×˜×•××˜×™×ª
            </div>
        </div>

        <div class="mission-brief">
            <h2>ğŸ¯ ×ª×¡×¨×™×˜ ×”××©×™××”</h2>
            <p>
                ××ª× ×—×•×§×¨×™ ×¡×™×™×‘×¨ ×‘×™×—×™×“×ª ×”××•×“×™×¢×™×Ÿ ×©×œ ×—×‘×¨×ª ×”×˜×›× ×•×œ×•×’×™×” "CyberTech". ×”×‘×•×§×¨, ×× ×”×œ ×”××‘×˜×—×” ×’×™×œ×”
                ×¤×¢×™×œ×•×ª ×—×©×•×“×” ×‘×¨×©×ª ×”×¤× ×™××™×ª. × ×¨××” ×©××™×©×”×• ×× ×¡×” ×œ×”×‘×¨×™×— ××™×“×¢ ×¨×’×™×© ××”×—×‘×¨×”, ××‘×œ ×”×•× ××©×ª××©
                ×‘×˜×›× ×™×§×•×ª ××ª×•×—×›××•×ª ×›×“×™ ×œ×”×¡×ª×™×¨ ××ª ×¢×§×‘×•×ª×™×•.
            </p>
            <p style="margin-top: 10px; font-weight: bold;">
                ×”××©×™××” ×©×œ×›×: ×œ×¢×§×•×‘ ××—×¨ "×©×‘×™×œ ×”× ×ª×•× ×™×", ×œ×–×”×•×ª ××ª ×”×ª×•×§×£, ×•×œ×—×©×•×£ ××ª ×”×©×™×˜×” ×©×‘×” ×”×•× ×¤×•×¢×œ.
            </p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill">0%</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showStage(1)">×©×œ×‘ 1: ×’×™×œ×•×™ ×”×¨×©×ª</button>
            <button class="tab" onclick="showStage(2)">×©×œ×‘ 2: ARP ×—×©×•×“</button>
            <button class="tab" onclick="showStage(3)">×©×œ×‘ 3: × ×™×ª×•×— ×—×‘×™×œ×•×ª</button>
            <button class="tab" onclick="showStage(4)">×©×œ×‘ 4: DHCP</button>
            <button class="tab" onclick="showStage(5)">×©×œ×‘ 5: ×¤×™×¦×•×— ×”×¦×•×¤×Ÿ</button>
        </div>

        <div class="content">
            <!-- Stage 1 -->
            <div class="stage active" id="stage1">
                <h2>ğŸ—ºï¸ ×©×œ×‘ 1: ×’×™×œ×•×™ ×”×¨×©×ª</h2>

                <div class="theory-box">
                    <h3>×¨×§×¢ ×ª×™××•×¨×˜×™</h3>
                    <p><strong>×›×ª×•×‘×ª IP:</strong> ×›×ª×•×‘×ª ×™×™×—×•×“×™×ª ×”××–×”×” ××›×©×™×¨ ×‘×¨×©×ª. ×›×ª×•×‘×ª IPv4 ××•×¨×›×‘×ª ×-32 ×‘×™×˜×™×, ××—×•×œ×§×ª ×œ-4 ×‘×ª×™× (××•×§×˜×˜×™×).</p>
                    <p><strong>Subnet Mask:</strong> ××¡×›×” ×©××’×“×™×¨×” ××™×œ×• ×‘×™×˜×™× ×‘×›×ª×•×‘×ª IP ×©×™×™×›×™× ×œ×¨×©×ª ×•××™×œ×• ×œ×××¨×— (host).</p>
                    <p><strong>CIDR Notation:</strong> ×©×™×˜×” ×§×¦×¨×” ×œ×›×ª×™×‘×ª ××¡×›×ª ×¨×©×ª, ×œ××©×œ: 192.168.1.0/24 (24 ×‘×™×˜×™× ×œ×¨×©×ª, 8 ×‘×™×˜×™× ×œ×××¨×—).</p>
                    <p><strong>Default Gateway:</strong> ×”× ×ª×‘ ×©×“×¨×›×• ×™×•×¦××™× ××”×¨×©×ª ×”××§×•××™×ª ×œ×¨×©×ª×•×ª ××—×¨×•×ª.</p>
                    <ul>
                        <li><strong>Ping:</strong> ×›×œ×™ ×”××©×ª××© ×‘-ICMP Echo Request/Reply ×œ×‘×“×™×§×ª ×§×™×©×•×¨×™×•×ª</li>
                        <li><strong>Traceroute:</strong> ×›×œ×™ ×”××¨××” ××ª ×”××¡×œ×•×œ ×©×—×‘×™×œ×” ×¢×•×‘×¨×ª ×¢×“ ×œ×™×¢×“</li>
                        <li><strong>TTL (Time To Live):</strong> ××•× ×” ×©××•×¤×—×ª ×‘×›×œ × ×ª×‘, ××•× ×¢ ×œ×•×œ××•×ª ××™× ×¡×•×¤×™×•×ª</li>
                    </ul>
                </div>

                <div class="exercise-section">
                    <h3>ğŸ“‹ ×”×ª×¨×—×™×©</h3>
                    <p>×§×™×‘×œ×ª× ×“×™×•×•×— ×¢×œ ××—×©×‘ ×—×©×•×“ ×‘×¨×©×ª ×¢× ×›×ª×•×‘×ª IP: <code>192.168.100.42</code></p>

                    <div class="network-diagram">
                        <h4>××‘× ×” ×¨×©×ª ×”×—×‘×¨×”:</h4>
                        <pre class="code-block">
- ×¡×’×× ×˜ A: 192.168.100.0/24 (××—×œ×§×ª ×”×¤×™×ª×•×—)
- ×¡×’×× ×˜ B: 192.168.200.0/24 (××—×œ×§×ª ×”×›×¡×¤×™×)
- ×¡×’×× ×˜ C: 10.0.50.0/24 (×©×¨×ª×™×)

Subnet Mask: 255.255.255.0
Default Gateway: X.X.X.1 (×”×‘×™×ª ×”×¨××©×•×Ÿ ×‘×›×œ ×¨×©×ª)
                        </pre>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 1.1</span>
                        <p><strong>×‘××™×–×” ×¡×’×× ×˜ × ××¦× ×”××—×©×‘ ×”×—×©×•×“?</strong></p>
                        <p style="font-size: 0.9em; color: #666;">×¨××–: ×”×©×•×• ××ª ×©×œ×•×©×ª ×”×‘×ª×™× ×”×¨××©×•× ×™× ×©×œ ×›×ª×•×‘×ª ×”-IP</p>
                        <select id="q1_1">
                            <option value="">×‘×—×¨ ×ª×©×•×‘×”...</option>
                            <option value="A">×¡×’×× ×˜ A: 192.168.100.0/24</option>
                            <option value="B">×¡×’×× ×˜ B: 192.168.200.0/24</option>
                            <option value="C">×¡×’×× ×˜ C: 10.0.50.0/24</option>
                        </select>
                        <button class="btn btn-primary" onclick="checkAnswer('q1_1', 'A', '× ×›×•×Ÿ! ×”××—×©×‘ ×‘×›×ª×•×‘×ª 192.168.100.42 × ××¦× ×‘×¡×’×× ×˜ A (××—×œ×§×ª ×”×¤×™×ª×•×—), ×›×™ 192.168.100 ×ª×•×× ×œ×¡×’×× ×˜ ×–×”.')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q1_1"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 1.2</span>
                        <p><strong>××”×™ ×›×ª×•×‘×ª ×”-Gateway ×©×œ ×”××—×©×‘ ×”×—×©×•×“?</strong></p>
                        <p style="font-size: 0.9em; color: #666;">×¨××–: ×”-Gateway ×”×•× ×ª××™×“ X.X.X.1</p>
                        <input type="text" id="q1_2" placeholder="×”×›× ×¡ ×›×ª×•×‘×ª IP (×œ×“×•×’××”: 192.168.1.1)">
                        <button class="btn btn-primary" onclick="checkIPAnswer('q1_2', '192.168.100.1', '××¦×•×™×Ÿ! ×”-Gateway ×©×œ ×¡×’×× ×˜ 192.168.100.0/24 ×”×•× 192.168.100.1')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q1_2"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 1.3</span>
                        <p><strong>×”×× ×”××—×©×‘ ×”×—×©×•×“ (192.168.100.42) ×™×›×•×œ ×œ×ª×§×©×¨ ×™×©×™×¨×•×ª (×œ×œ× router) ×¢× ××—×©×‘ ×‘×›×ª×•×‘×ª 192.168.200.15?</strong></p>
                        <div class="theory-box" style="margin: 15px 0;">
                            <h3>×”×¡×‘×¨: ×ª×§×©×•×¨×ª ×™×©×™×¨×” ×‘×™×Ÿ ××›×©×™×¨×™×</h3>
                            <p>×ª×§×©×•×¨×ª ×™×©×™×¨×” (×œ×œ× router) ××¤×©×¨×™×ª ×¨×§ ×‘×™×Ÿ ××›×©×™×¨×™× <strong>×‘××•×ª×” ×¨×©×ª</strong>.</p>
                            <p>×›×“×™ ×œ×‘×“×•×§ ×× ×©× ×™ ××›×©×™×¨×™× ×‘××•×ª×” ×¨×©×ª, × ×‘×¦×¢ AND ×‘×™×Ÿ ×›×ª×•×‘×ª ×”-IP ×•×‘×™×Ÿ ×”-Subnet Mask:</p>
                            <pre class="code-block" style="margin-top: 10px;">
××—×©×‘ 1: 192.168.100.42
Mask:    255.255.255.0
×¨×©×ª:     192.168.100.0

××—×©×‘ 2: 192.168.200.15
Mask:    255.255.255.0
×¨×©×ª:     192.168.200.0

××¡×§× ×”: ×¨×©×ª×•×ª ×©×•× ×•×ª â†’ ×“×¨×•×© router!
                            </pre>
                        </div>
                        <select id="q1_3">
                            <option value="">×‘×—×¨ ×ª×©×•×‘×”...</option>
                            <option value="yes">×›×Ÿ, ×™×›×•×œ ×œ×ª×§×©×¨ ×™×©×™×¨×•×ª</option>
                            <option value="no">×œ×, ×“×¨×•×© router</option>
                        </select>
                        <button class="btn btn-primary" onclick="checkAnswer('q1_3', 'no', '× ×›×•×Ÿ ×××•×“! ×©×ª×™ ×”×›×ª×•×‘×•×ª × ××¦××•×ª ×‘×¨×©×ª×•×ª ×©×•× ×•×ª (192.168.100.0 ×œ×¢×•××ª 192.168.200.0), ×œ×›×Ÿ ×“×¨×•×© router ×›×“×™ ×œ×”×¢×‘×™×¨ ×ª×¢×‘×•×¨×” ×‘×™× ×™×”×Ÿ.')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q1_3"></div>
                    </div>

                    <div class="hint-box" onclick="toggleHint('hint1')">
                        <h4>ğŸ’¡ ×¨×•×¦×” ×¨××– × ×•×¡×£? ×œ×—×¥ ×›××Ÿ</h4>
                        <div class="hint-content" id="hint1">
                            <p><strong>×—×™×©×•×‘ ×¨×©×ª:</strong></p>
                            <p>1. ×”××¨ ××ª ×›×ª×•×‘×ª ×”-IP ×œ×‘×™× ××¨×™</p>
                            <p>2. ×‘×¦×¢ AND ×¢× ×”-Subnet Mask</p>
                            <p>3. ×× ×”×ª×•×¦××” ×–×”×” - ×”× ×‘××•×ª×” ×¨×©×ª!</p>
                            <p><strong>×“×•×’××”:</strong> 192.168.100.42 ×¢× ××¡×›×” /24 × ×•×ª×Ÿ ×¨×©×ª 192.168.100.0</p>
                        </div>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" disabled>â—„ ×”×§×•×“×</button>
                    <button class="btn btn-primary" onclick="nextStage()">×”×‘× â–º</button>
                </div>
            </div>

            <!-- Stage 2 -->
            <div class="stage" id="stage2">
                <h2>ğŸš¨ ×©×œ×‘ 2: ×–×™×”×•×™ ×¤×¢×™×œ×•×ª ARP ×—×©×•×“×”</h2>

                <div class="theory-box">
                    <h3>×¨×§×¢ ×ª×™××•×¨×˜×™ - ×¤×¨×•×˜×•×§×•×œ ARP</h3>
                    <p><strong>ARP (Address Resolution Protocol):</strong> ×¤×¨×•×˜×•×§×•×œ ×©×××™×¨ ×›×ª×•×‘×•×ª IP ×œ×›×ª×•×‘×•×ª MAC (×¤×™×–×™×•×ª) ×‘×¨×©×ª ××§×•××™×ª.</p>
                    <p><strong>×œ××” ×–×” × ×—×•×¥?</strong> ×©×›×‘×ª ×”×§×™×©×•×¨ ×–×§×•×§×” ×œ×›×ª×•×‘×ª MAC ×›×“×™ ×œ×”×¢×‘×™×¨ ××ª ×”×¤×¨×™×™××™× ×‘×¨×©×ª ×”××§×•××™×ª.</p>
                    <p><strong>×ª×”×œ×™×š ARP:</strong></p>
                    <ul>
                        <li>1. ×”××—×©×‘ ×©×•×œ×— <strong>ARP Request</strong> (broadcast) - "××™ ×™×•×“×¢ ××ª ×›×ª×•×‘×ª ×”-MAC ×©×œ IP X?"</li>
                        <li>2. ×”××—×©×‘ ×¢× ×›×ª×•×‘×ª ×”-IP ××’×™×‘ ×¢× <strong>ARP Reply</strong> - "×× ×™! ×›×ª×•×‘×ª ×”-MAC ×©×œ×™ ×”×™× Y"</li>
                        <li>3. ×”×›×ª×•×‘×ª × ×©××¨×ª ×‘-<strong>ARP Cache</strong> ×œ×©×™××•×© ×¢×ª×™×“×™</li>
                    </ul>
                    <p><strong>âš ï¸ ARP Poisoning (ARP Spoofing):</strong></p>
                    <p>××ª×§×¤×” ×©×‘×” ×”×ª×•×§×£ ×©×•×œ×— ×”×•×“×¢×•×ª ARP ××–×•×™×¤×•×ª ×›×“×™ ×œ×©×™×™×š ××ª ×›×ª×•×‘×ª ×”-MAC ×©×œ×• ×œ×›×ª×•×‘×ª IP ×©×œ ××›×©×™×¨ ××—×¨ (×‘×“×¨×š ×›×œ×œ ×”-Gateway).</p>
                    <p><strong>×ª×•×¦××”:</strong> ×›×œ ×”×ª×¢×‘×•×¨×” ×¢×•×‘×¨×ª ×“×¨×š ×”×ª×•×§×£ (Man-in-the-Middle)!</p>
                </div>

                <div class="exercise-section">
                    <h3>ğŸ“‹ ×”×ª×¨×—×™×©</h3>
                    <p>×œ××—×¨ × ×™×˜×•×¨ ×”×¨×©×ª, ×’×™×œ×™×ª× ×¤×¢×™×œ×•×ª ARP ×—×¨×™×’×”. ×”×ª×•×§×£ ×× ×¡×” ×œ×”×ª×—×–×•×ª ×œ× ×ª×‘!</p>

                    <h4>×§×•×‘×¥ 1: ARP Cache ×ª×§×™×Ÿ</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Internet Address</th>
                                <th>Physical Address</th>
                                <th>Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>192.168.100.1</td>
                                <td>00-1A-2B-3C-4D-5E</td>
                                <td>dynamic</td>
                            </tr>
                            <tr>
                                <td>192.168.100.42</td>
                                <td>00-AA-BB-CC-DD-01</td>
                                <td>dynamic</td>
                            </tr>
                            <tr>
                                <td>192.168.100.55</td>
                                <td>00-11-22-33-44-55</td>
                                <td>dynamic</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>×§×•×‘×¥ 2: ARP Cache ×œ××—×¨ ×”×”×ª×§×¤×”</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Internet Address</th>
                                <th>Physical Address</th>
                                <th>Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: #ffebee;">
                                <td>192.168.100.1</td>
                                <td><strong>00-AA-BB-CC-DD-01</strong></td>
                                <td>dynamic</td>
                            </tr>
                            <tr style="background: #ffebee;">
                                <td>192.168.100.42</td>
                                <td><strong>00-AA-BB-CC-DD-01</strong></td>
                                <td>dynamic</td>
                            </tr>
                            <tr>
                                <td>192.168.100.55</td>
                                <td>00-11-22-33-44-55</td>
                                <td>dynamic</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="question">
                        <span class="question-number">×©××œ×” 2.1</span>
                        <p><strong>××” ×”×©×ª× ×” ×‘×™×Ÿ ×©× ×™ ×”×§×‘×¦×™×?</strong></p>
                        <textarea id="q2_1" placeholder="×ª××¨ ××ª ×”×©×™× ×•×™ ×©×–×™×”×™×ª..."></textarea>
                        <button class="btn btn-primary" onclick="checkTextAnswer('q2_1', ['mac', '×›×ª×•×‘×ª', '×–×”×”', '00-AA-BB-CC-DD-01'], '× ×›×•×Ÿ! ×›×ª×•×‘×ª ×”-MAC ×©×œ ×”-Gateway (192.168.100.1) ×”×©×ª× ×ª×” ×œ×”×™×•×ª ×–×”×” ×œ×›×ª×•×‘×ª ×”-MAC ×©×œ ×”××—×©×‘ ×”×—×©×•×“ (192.168.100.42). ×©×ª×™×”×Ÿ ×›×¢×ª: 00-AA-BB-CC-DD-01')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q2_1"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 2.2</span>
                        <p><strong>××™×–×” ×¡×•×’ ××ª×§×¤×” ×–×•?</strong></p>
                        <select id="q2_2">
                            <option value="">×‘×—×¨ ×ª×©×•×‘×”...</option>
                            <option value="arp">ARP Poisoning/Spoofing</option>
                            <option value="dns">DNS Spoofing</option>
                            <option value="ddos">DDoS Attack</option>
                            <option value="phishing">Phishing</option>
                        </select>
                        <button class="btn btn-primary" onclick="checkAnswer('q2_2', 'arp', '××¦×•×™×Ÿ! ×–×• ××ª×§×¤×ª ARP Poisoning. ×”×ª×•×§×£ ×©×•×œ×— ×”×•×“×¢×•×ª ARP ××–×•×™×¤×•×ª ×›×“×™ ×œ×©×›× ×¢ ××›×©×™×¨×™× ××—×¨×™× ×‘×¨×©×ª ×©×›×ª×•×‘×ª ×”-MAC ×©×œ×• ×©×™×™×›×ª ×œ-Gateway.')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q2_2"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 2.3</span>
                        <p><strong>××” ×”×ª×•×§×£ ×× ×¡×” ×œ×”×©×™×’ ×‘×××¦×¢×•×ª ××ª×§×¤×” ×–×•?</strong></p>
                        <div class="theory-box">
                            <h3>××˜×¨×•×ª ××ª×§×¤×ª ARP Poisoning</h3>
                            <ul>
                                <li><strong>Man-in-the-Middle (MITM):</strong> ×”×ª×•×§×£ × ××¦× ×‘×™×Ÿ ×”×§×•×¨×‘×Ÿ ×œ-Gateway, ×™×›×•×œ ×œ×™×™×¨×˜ ×•×œ×§×¨×•× ×ª×¢×‘×•×¨×”</li>
                                <li><strong>×’× ×™×‘×ª ××™×“×¢:</strong> ×¡×™×¡×××•×ª, cookies, × ×ª×•× ×™ ×”×ª×—×‘×¨×•×ª</li>
                                <li><strong>×©×™× ×•×™ ×ª×¢×‘×•×¨×”:</strong> ×”×–×¨×§×ª ×§×•×“ ×–×“×•× ×™, ×©×™× ×•×™ ×ª×•×›×Ÿ ×“×¤×™×</li>
                                <li><strong>×× ×™×¢×ª ×©×™×¨×•×ª (DoS):</strong> ××™-×”×¢×‘×¨×ª ×”×—×‘×™×œ×•×ª ×”×œ××”</li>
                            </ul>
                        </div>
                        <textarea id="q2_3" placeholder="×”×¡×‘×¨ ××” ×”×ª×•×§×£ ×™×›×•×œ ×œ×¢×©×•×ª ×¢×›×©×™×•..."></textarea>
                        <button class="btn btn-primary" onclick="checkTextAnswer('q2_3', ['×™×™×¨×˜', '×ª×¢×‘×•×¨×”', '××™×“×¢', 'man'], '× ×›×•×Ÿ! ×”×ª×•×§×£ ×™×›×•×œ ×œ×™×™×¨×˜ ××ª ×›×œ ×”×ª×¢×‘×•×¨×” ×‘×™×Ÿ ×”×§×•×¨×‘×Ÿ ×œ××™× ×˜×¨× ×˜, ×œ×’× ×•×‘ ××™×“×¢ ×¨×’×™×©, ×œ×©× ×•×ª ×ª×•×›×Ÿ, ××• ×œ×‘×¦×¢ ××ª×§×¤×ª Man-in-the-Middle.')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q2_3"></div>
                    </div>

                    <div class="theory-box">
                        <h3>ğŸ›¡ï¸ ×”×’× ×” ××¤× ×™ ARP Poisoning</h3>
                        <ul>
                            <li><strong>Static ARP Entries:</strong> ×”×’×“×¨×ª ×›×ª×•×‘×•×ª MAC ×§×‘×•×¢×•×ª</li>
                            <li><strong>ARP Monitoring Tools:</strong> ×›×œ×™× ×›××• arpwatch, XArp</li>
                            <li><strong>Dynamic ARP Inspection (DAI):</strong> ×ª×›×•× ×” ×‘××ª×’×™× ××ª×§×“××™×</li>
                            <li><strong>Port Security:</strong> ×”×’×‘×œ×ª ××¡×¤×¨ ×›×ª×•×‘×•×ª MAC ×œ×›×œ ×¤×•×¨×˜</li>
                            <li><strong>×”×¦×¤× ×”:</strong> HTTPS, VPN - ××’× ×™× ×¢×œ ×”× ×ª×•× ×™× ×’× ×× ×™×© ×™×™×¨×•×˜</li>
                        </ul>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="prevStage()">â—„ ×”×§×•×“×</button>
                    <button class="btn btn-primary" onclick="nextStage()">×”×‘× â–º</button>
                </div>
            </div>

            <!-- Stage 3 -->
            <div class="stage" id="stage3">
                <h2>ğŸ“¦ ×©×œ×‘ 3: × ×™×ª×•×— ×”×—×‘×™×œ×•×ª ×”××¡×ª×•×¨×™×•×ª</h2>

                <div class="theory-box">
                    <h3>×¨×§×¢ ×ª×™××•×¨×˜×™ - IP Header ×•-ICMP</h3>
                    <p><strong>IP Header:</strong> ××›×™×œ ××™×“×¢ ×—×™×•× ×™ ×œ×”×¢×‘×¨×ª ×”×—×‘×™×œ×” ×‘×¨×©×ª:</p>
                    <ul>
                        <li><strong>Version:</strong> ×’×¨×¡×ª IP (4 ××• 6)</li>
                        <li><strong>IHL (Internet Header Length):</strong> ××•×¨×š ×”-header ×‘×™×—×™×“×•×ª ×©×œ 4 ×‘×ª×™×</li>
                        <li><strong>Total Length:</strong> ××•×¨×š ×›×œ ×”×—×‘×™×œ×” (header + data) ×‘×‘×ª×™×</li>
                        <li><strong>TTL (Time To Live):</strong> ××•× ×” ×”×§×¤×¦×•×ª, ××•×¤×—×ª ×‘-1 ×‘×›×œ router</li>
                        <li><strong>Protocol:</strong> ×¤×¨×•×˜×•×§×•×œ ×©×›×‘×ª ×”×ª×—×‘×•×¨×” (1=ICMP, 6=TCP, 17=UDP)</li>
                        <li><strong>Source/Destination IP:</strong> ×›×ª×•×‘×•×ª ×”××§×•×¨ ×•×”×™×¢×“</li>
                    </ul>
                    <p><strong>ICMP (Internet Control Message Protocol):</strong></p>
                    <p>×¤×¨×•×˜×•×§×•×œ ×œ×©×œ×™×—×ª ×”×•×“×¢×•×ª ×‘×§×¨×” ×•×©×’×™××•×ª ×‘×¨×©×ª.</p>
                    <p><strong>×¡×•×’×™ ×”×•×“×¢×•×ª ICMP × ×¤×•×¦×•×ª:</strong></p>
                    <ul>
                        <li><strong>Type 8:</strong> Echo Request (ping - ×‘×§×©×”)</li>
                        <li><strong>Type 0:</strong> Echo Reply (ping - ×ª×©×•×‘×”)</li>
                        <li><strong>Type 3:</strong> Destination Unreachable (×™×¢×“ ×œ× ×–××™×Ÿ)</li>
                        <li><strong>Type 11:</strong> Time Exceeded (TTL ×”×’×™×¢ ×œ-0)</li>
                    </ul>
                </div>

                <div class="exercise-section">
                    <h3>ğŸ“‹ ×”×ª×¨×—×™×©</h3>
                    <p>×ª×¤×¡×ª× ×—×‘×™×œ×ª ICMP ×—×©×•×“×” ×‘×¨×©×ª. ×”× ×” ×¤×™×¨×•×˜ ×©×œ×”:</p>

                    <pre class="code-block">
<span class="comment">=== IP Header ===</span>
Version: <span class="string">4</span>
IHL: <span class="string">5</span> (20 bytes)
Total Length: <span class="string">84</span> bytes
TTL: <span class="string">64</span>
Protocol: <span class="string">1</span> (ICMP)
Source IP: <span class="string">192.168.100.42</span>
Destination IP: <span class="string">10.0.50.100</span>

<span class="comment">=== ICMP Header ===</span>
Type: <span class="string">8</span> (Echo Request)
Code: <span class="string">0</span>
Identifier: <span class="string">0xABCD</span>
Sequence: <span class="string">1337</span>
                    </pre>

                    <div class="question">
                        <span class="question-number">×©××œ×” 3.1</span>
                        <p><strong>××”×• ×¡×•×’ ×”×•×“×¢×ª ×”-ICMP?</strong></p>
                        <div class="theory-box">
                            <h3>×§×¨×™××ª Type ×‘-ICMP</h3>
                            <p>×”×©×“×” Type ××’×“×™×¨ ××ª ×¡×•×’ ×”×”×•×“×¢×”:</p>
                            <p>Type 8 = Echo Request - ×–×• ×‘×§×©×ª ping</p>
                            <p>×”×¤×§×•×“×” ping ×©×•×œ×—×ª Echo Request ×•××—×›×” ×œ-Echo Reply</p>
                        </div>
                        <select id="q3_1">
                            <option value="">×‘×—×¨ ×ª×©×•×‘×”...</option>
                            <option value="request">Echo Request (×‘×§×©×ª ping)</option>
                            <option value="reply">Echo Reply (×ª×©×•×‘×ª ping)</option>
                            <option value="unreachable">Destination Unreachable</option>
                            <option value="exceeded">Time Exceeded</option>
                        </select>
                        <button class="btn btn-primary" onclick="checkAnswer('q3_1', 'request', '× ×›×•×Ÿ! Type 8 ×”×•× Echo Request - ×‘×§×©×ª ping. ×–×” ××•××¨ ×©×”××—×©×‘ ×”×—×©×•×“ ×× ×¡×” ×œ×‘×“×•×§ ×× ×”×©×¨×ª 10.0.50.100 ×–××™×Ÿ.')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q3_1"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 3.2</span>
                        <p><strong>××”×• ×’×•×“×œ ×”-Data ×‘×—×‘×™×œ×” (×‘×‘×ª×™×)?</strong></p>
                        <div class="theory-box">
                            <h3>×—×™×©×•×‘ ×’×•×“×œ Data</h3>
                            <p>× ×•×¡×—×”: <code>Data Size = Total Length - IP Header - ICMP Header</code></p>
                            <p><strong>× ×ª×•× ×™×:</strong></p>
                            <ul>
                                <li>Total Length = 84 bytes</li>
                                <li>IP Header = IHL Ã— 4 = 5 Ã— 4 = 20 bytes</li>
                                <li>ICMP Header = 8 bytes (×§×‘×•×¢)</li>
                            </ul>
                            <p><strong>×—×™×©×•×‘:</strong> 84 - 20 - 8 = 56 bytes</p>
                        </div>
                        <input type="text" id="q3_2" placeholder="×”×›× ×¡ ××¡×¤×¨ ×‘×‘×ª×™×">
                        <button class="btn btn-primary" onclick="checkNumberAnswer('q3_2', 56, '××¦×•×™×Ÿ! 84 (Total) - 20 (IP Header) - 8 (ICMP Header) = 56 bytes ×©×œ data')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q3_2"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 3.3</span>
                        <p><strong>×”×× ×”×—×‘×™×œ×” ×ª×¢×‘×•×¨ ×“×¨×š router?</strong></p>
                        <p style="font-size: 0.9em; color: #666;">×¨××–: ×‘×“×•×§ ×× ×”××§×•×¨ ×•×”×™×¢×“ ×‘××•×ª×” ×¨×©×ª</p>
                        <div class="theory-box">
                            <h3>×‘×“×™×§×ª ××¡×œ×•×œ</h3>
                            <p>××§×•×¨: 192.168.100.42 â†’ ×¨×©×ª 192.168.100.0/24</p>
                            <p>×™×¢×“: 10.0.50.100 â†’ ×¨×©×ª 10.0.50.0/24</p>
                            <p>×¨×©×ª×•×ª ×©×•× ×•×ª = ×“×¨×•×© routing!</p>
                        </div>
                        <select id="q3_3">
                            <option value="">×‘×—×¨ ×ª×©×•×‘×”...</option>
                            <option value="yes">×›×Ÿ, ×ª×¢×‘×•×¨ ×“×¨×š router</option>
                            <option value="no">×œ×, ×ª×™×©××¨ ×‘×¨×©×ª ×”××§×•××™×ª</option>
                        </select>
                        <button class="btn btn-primary" onclick="checkAnswer('q3_3', 'yes', '× ×›×•×Ÿ! ×”××§×•×¨ (192.168.100.x) ×•×”×™×¢×“ (10.0.50.x) × ××¦××™× ×‘×¨×©×ª×•×ª ×©×•× ×•×ª, ×œ×›×Ÿ ×”×—×‘×™×œ×” ×—×™×™×‘×ª ×œ×¢×‘×•×¨ ×“×¨×š ×œ×¤×—×•×ª router ××—×“.')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q3_3"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 3.4</span>
                        <p><strong>××” ×™×§×¨×” ×œ-TTL ×‘×›×œ router ×©×”×—×‘×™×œ×” ×ª×¢×‘×•×¨?</strong></p>
                        <div class="theory-box">
                            <h3>×ª×¤×§×™×“ ×”-TTL</h3>
                            <p><strong>TTL (Time To Live):</strong> ××•× ×” ×”×§×¤×¦×•×ª (hops)</p>
                            <p><strong>×ª×”×œ×™×š:</strong></p>
                            <ol>
                                <li>×›×œ router ××§×‘×œ ×—×‘×™×œ×”</li>
                                <li>××¤×—×™×ª ××ª ×”-TTL ×‘-1</li>
                                <li>×× TTL = 0 â†’ ×©×•×œ×— ICMP Time Exceeded ×•×–×•×¨×§ ×—×‘×™×œ×”</li>
                                <li>×× TTL > 0 â†’ ××¢×‘×™×¨ ×”×œ××”</li>
                            </ol>
                            <p><strong>××˜×¨×”:</strong> ×œ×× ×•×¢ ×œ×•×œ××•×ª routing ××™× ×¡×•×¤×™×•×ª</p>
                        </div>
                        <textarea id="q3_4" placeholder="×”×¡×‘×¨ ××” ×§×•×¨×” ×œ-TTL..."></textarea>
                        <button class="btn btn-primary" onclick="checkTextAnswer('q3_4', ['××•×¤×—×ª', '1', '×§×˜×Ÿ', '×¤×•×—×ª'], '× ×›×•×Ÿ! ×‘×›×œ router ×”-TTL ××•×¤×—×ª ×‘-1. ×‘×“×•×’××” ×©×œ× ×•: ×”×ª×—×™×œ ×¢× 64, ×•×× ×¢×‘×¨ ×“×¨×š 3 routers ×™×’×™×¢ ×¢× TTL=61.')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q3_4"></div>
                    </div>

                    <div class="theory-box">
                        <h3>ğŸ” ××” ×§×•×¨×” ×œ×›×ª×•×‘×•×ª ×‘××¡×œ×•×œ?</h3>
                        <p><strong>×›×ª×•×‘×•×ª IP:</strong> × ×©××¨×•×ª <u>×§×‘×•×¢×•×ª</u> ×œ××•×¨×š ×›×œ ×”××¡×œ×•×œ</p>
                        <ul>
                            <li>Source IP = 192.168.100.42 (×œ× ××©×ª× ×”)</li>
                            <li>Destination IP = 10.0.50.100 (×œ× ××©×ª× ×”)</li>
                        </ul>
                        <p><strong>×›×ª×•×‘×•×ª MAC:</strong> ××©×ª× ×•×ª ×‘×›×œ ×§×¤×™×¦×” (hop)!</p>
                        <ul>
                            <li>Hop 1: Source MAC = ××—×©×‘ ×—×©×•×“, Dest MAC = Router1</li>
                            <li>Hop 2: Source MAC = Router1, Dest MAC = Router2</li>
                            <li>Hop 3: Source MAC = Router2, Dest MAC = ×©×¨×ª ×”×™×¢×“</li>
                        </ul>
                        <p><strong>×œ××”?</strong> ×›×™ ×›×ª×•×‘×•×ª MAC ×¤×•×¢×œ×•×ª ×¨×§ ×‘×¨×©×ª ××§×•××™×ª (×©×›×‘×ª ×”×§×™×©×•×¨), ×‘×¢×•×“ IP ×¢×•×‘×“ ×‘×™×Ÿ ×¨×©×ª×•×ª (×©×›×‘×ª ×”×¨×©×ª).</p>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="prevStage()">â—„ ×”×§×•×“×</button>
                    <button class="btn btn-primary" onclick="nextStage()">×”×‘× â–º</button>
                </div>
            </div>

            <!-- Stage 4 -->
            <div class="stage" id="stage4">
                <h2>ğŸ­ ×©×œ×‘ 4: ×¤×™×¢× ×•×— ×ª×¢×œ×•××ª ×”-DHCP</h2>

                <div class="theory-box">
                    <h3>×¨×§×¢ ×ª×™××•×¨×˜×™ - DHCP</h3>
                    <p><strong>DHCP (Dynamic Host Configuration Protocol):</strong> ×¤×¨×•×˜×•×§×•×œ ×©××§×¦×” ×›×ª×•×‘×•×ª IP ×‘××•×¤×Ÿ ××•×˜×•××˜×™ ×œ××›×©×™×¨×™× ×‘×¨×©×ª.</p>
                    <p><strong>×ª×”×œ×™×š DHCP (DORA):</strong></p>
                    <ol>
                        <li><strong>Discover:</strong> ×”×œ×§×•×— ×©×•×œ×— broadcast - "××™ ×™×›×•×œ ×œ×ª×ª ×œ×™ ×›×ª×•×‘×ª IP?"</li>
                        <li><strong>Offer:</strong> ×”×©×¨×ª ××¦×™×¢ ×›×ª×•×‘×ª IP ×–××™× ×”</li>
                        <li><strong>Request:</strong> ×”×œ×§×•×— ××‘×§×© ×‘××•×¤×Ÿ ×¨×©××™ ××ª ×”×›×ª×•×‘×ª ×©×”×•×¦×¢×”</li>
                        <li><strong>Acknowledge (ACK):</strong> ×”×©×¨×ª ×××©×¨ ×•××§×¦×” ××ª ×”×›×ª×•×‘×ª</li>
                    </ol>
                    <p><strong>××™×“×¢ × ×•×¡×£ ×©×”×©×¨×ª ×©×•×œ×—:</strong></p>
                    <ul>
                        <li>Subnet Mask</li>
                        <li>Default Gateway</li>
                        <li>DNS Servers</li>
                        <li>Lease Time (×–××Ÿ "×—×›×™×¨×ª" ×”×›×ª×•×‘×ª)</li>
                    </ul>
                    <p><strong>Lease Time:</strong> ××©×š ×”×–××Ÿ ×©×”×›×ª×•×‘×ª ×©×™×™×›×ª ×œ×œ×§×•×—. ×œ××—×¨ ××›×Ÿ ×¦×¨×™×š ×œ×—×“×© (Renewal) ××• ×œ×‘×§×© ××—×“×©.</p>
                </div>

                <div class="exercise-section">
                    <h3>ğŸ“‹ ×”×ª×¨×—×™×©</h3>
                    <p>×”×ª×•×§×£ × ×™×¡×” ×œ×”×¡×ª×™×¨ ××ª ×–×”×•×ª×• ×¢×œ ×™×“×™ ×§×‘×œ×ª ×›×ª×•×‘×ª IP ×—×“×©×” ×›×œ ×›××” ×“×§×•×ª. ××¦××ª× log ×©×œ ×©×¨×ª ×”-DHCP:</p>

                    <pre class="code-block">
[10:15:23] DHCP DISCOVER from MAC: 00-AA-BB-CC-DD-01
[10:15:23] DHCP OFFER: 192.168.100.42, Lease: 24h
[10:15:24] DHCP REQUEST for 192.168.100.42
[10:15:24] DHCP ACK - Assigned 192.168.100.42

[10:22:17] DHCP DISCOVER from MAC: 00-AA-BB-CC-DD-01
[10:22:17] DHCP OFFER: 192.168.100.73, Lease: 24h
[10:22:18] DHCP REQUEST for 192.168.100.73
[10:22:18] DHCP ACK - Assigned 192.168.100.73

[10:28:45] DHCP DISCOVER from MAC: 00-AA-BB-CC-DD-01
[10:28:45] DHCP OFFER: 192.168.100.91, Lease: 24h
[10:28:46] DHCP REQUEST for 192.168.100.91
[10:28:46] DHCP ACK - Assigned 192.168.100.91
                    </pre>

                    <div class="question">
                        <span class="question-number">×©××œ×” 4.1</span>
                        <p><strong>××” ×—×©×•×“ ×‘×¤×¢×™×œ×•×ª ×”×–×•?</strong></p>
                        <div class="theory-box">
                            <h3>×¤×¢×™×œ×•×ª ×¨×’×™×œ×” vs. ×—×©×•×“×”</h3>
                            <p><strong>×¤×¢×™×œ×•×ª ×¨×’×™×œ×”:</strong></p>
                            <ul>
                                <li>××›×©×™×¨ ××§×‘×œ IP ×¤×¢× ××—×ª ×‘×”×¤×¢×œ×”</li>
                                <li>××—×“×© ××ª ×”-Lease ×œ×¤× ×™ ×©×¤×’ ×ª×•×§×¤×• (××—×¨×™ 12-18 ×©×¢×•×ª)</li>
                                <li>Lease Time ×©×œ 24 ×©×¢×•×ª = ×¦×¨×™×š ×œ×—×“×© ×¨×§ ××—×¨×™ ~12 ×©×¢×•×ª</li>
                            </ul>
                            <p><strong>×¤×¢×™×œ×•×ª ×—×©×•×“×”:</strong></p>
                            <ul>
                                <li>××•×ª×” MAC ××‘×§×©×ª IP ×—×“×© ×›×œ ×›××” ×“×§×•×ª!</li>
                                <li>×©×—×¨×•×¨ ××›×•×•×Ÿ ×©×œ ×›×ª×•×‘×•×ª ×œ×¤× ×™ ×ª×•× ×”-Lease</li>
                                <li>× ×™×¡×™×•×Ÿ ×œ×”×¡×ª×™×¨ ×¤×¢×™×œ×•×ª ×•×œ×”×§×©×•×ª ×¢×œ ××¢×§×‘</li>
                            </ul>
                        </div>
                        <textarea id="q4_1" placeholder="×ª××¨ ××” ×—×©×•×“ ×‘×¤×¢×™×œ×•×ª..."></textarea>
                        <button class="btn btn-primary" onclick="checkTextAnswer('q4_1', ['×›×ª×•×‘×ª', '×—×“×©', '×“×§×•×ª', '××”×™×¨'], '× ×›×•×Ÿ! ××•×ª×” ×›×ª×•×‘×ª MAC ××‘×§×©×ª ×›×ª×•×‘×ª IP ×—×“×©×” ×›×œ 6-7 ×“×§×•×ª, ×‘×¢×•×“ Lease Time ×”×•× 24 ×©×¢×•×ª. ×–×” ××¦×‘×™×¢ ×¢×œ × ×™×¡×™×•×Ÿ ×œ×”×¡×ª×™×¨ ×–×”×•×ª ×•×œ×”×§×©×•×ª ×¢×œ ××¢×§×‘.')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q4_1"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 4.2</span>
                        <p><strong>×›××” ×–××Ÿ ×¢×‘×¨ ×‘×™×Ÿ ×”×‘×§×©×” ×”×¨××©×•× ×” ×œ×©× ×™×™×”?</strong></p>
                        <p style="font-size: 0.9em; color: #666;">×—×©×‘ ××ª ×”×”×¤×¨×© ×‘×™×Ÿ 10:15:23 ×œ-10:22:17</p>
                        <input type="text" id="q4_2" placeholder="×”×›× ×¡ ×‘×“×§×•×ª (×œ××©×œ: 7)">
                        <button class="btn btn-primary" onclick="checkNumberAnswer('q4_2', 7, '× ×›×•×Ÿ! 10:22:17 - 10:15:23 = 6 ×“×§×•×ª ×•-54 ×©× ×™×•×ª, ×‘×§×™×¨×•×‘ 7 ×“×§×•×ª. ×–×” ×–××Ÿ ×§×¦×¨ ×××•×“ ×‘×”×©×•×•××” ×œ-Lease ×©×œ 24 ×©×¢×•×ª!')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q4_2"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 4.3</span>
                        <p><strong>×œ××” ×”×ª×•×§×£ ×¢×•×©×” ××ª ×–×”? ××” ×”×™×ª×¨×•×Ÿ ×‘×©×™× ×•×™ ×›×ª×•×‘×ª IP ×›×œ ×”×–××Ÿ?</strong></p>
                        <div class="theory-box">
                            <h3>×× ×™×¢×™× ×©×œ ×”×ª×•×§×£</h3>
                            <p><strong>×”×§×©×™×™×ª ××¢×§×‘:</strong></p>
                            <ul>
                                <li>××¢×¨×›×•×ª ××‘×˜×—×” ×¢×•×§×‘×•×ª ××—×¨ ×›×ª×•×‘×•×ª IP ×—×©×•×“×•×ª</li>
                                <li>×©×™× ×•×™ ×›×ª×•×‘×ª = "×–×”×•×ª ×—×“×©×”" ×‘××¢×¨×›×•×ª ×¨×‘×•×ª</li>
                                <li>×§×©×” ×œ×§×©×¨ ×¤×¢×™×œ×•×™×•×ª ×©×•× ×•×ª ×œ××•×ª×• ×ª×•×§×£</li>
                            </ul>
                            <p><strong>×¢×§×™×¤×ª ×—×¡×™××•×ª:</strong></p>
                            <ul>
                                <li>×× ×›×ª×•×‘×ª × ×—×¡××” - ×¤×©×•×˜ ××§×‘×œ ×—×“×©×”</li>
                                <li>Firewall rules ×œ×¤×™ IP ×œ× ×¢×•×‘×“×™×</li>
                            </ul>
                            <p><strong>×”×ª×—××§×•×ª ×-Logs:</strong></p>
                            <ul>
                                <li>×œ×•×’×™× ×¨×‘×™× ××ª×•×™×’×™× ×œ×¤×™ IP</li>
                                <li>×§×©×” ×œ×—×§×•×¨ ×¤×¢×™×œ×•×ª ×”×™×¡×˜×•×¨×™×ª</li>
                            </ul>
                        </div>
                        <textarea id="q4_3" placeholder="×”×¡×‘×¨ ×œ××” ×”×ª×•×§×£ ××©× ×” IP..."></textarea>
                        <button class="btn btn-primary" onclick="checkTextAnswer('q4_3', ['××¢×§×‘', '×–×™×”×•×™', '×”×¡×ª×¨', '×—×¡×™×'], '××¦×•×™×Ÿ! ×”×ª×•×§×£ ××©× ×” ×›×ª×•×‘×ª ×›×“×™ ×œ×”×§×©×•×ª ×¢×œ ××¢×§×‘ ×•×–×™×”×•×™, ×œ×¢×§×•×£ ×—×¡×™××•×ª ×©×œ ××¢×¨×›×•×ª ××‘×˜×—×”, ×•×œ×”×¤×¨×™×“ ×‘×™×Ÿ ×¤×¢×™×œ×•×™×•×ª ×©×•× ×•×ª ×‘×œ×•×’×™×.')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q4_3"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 4.4</span>
                        <p><strong>××™×š ××¤×©×¨ ×œ×–×”×•×ª ×•×œ×¢×§×•×‘ ××—×¨×™ ×”×ª×•×§×£ ×œ××¨×•×ª ×©×™× ×•×™×™ ×”-IP?</strong></p>
                        <div class="theory-box">
                            <h3>ğŸ” ×©×™×˜×•×ª ×–×™×”×•×™ ×•××¢×§×‘</h3>
                            <p><strong>1. ×›×ª×•×‘×ª MAC:</strong></p>
                            <ul>
                                <li>×›×ª×•×‘×ª MAC ×”×™× "×—×•××¨×”" ×•×œ× ××©×ª× ×” ×‘×§×œ×•×ª</li>
                                <li>×›×œ ×”×‘×§×©×•×ª ×‘×“×•×’××” ×××•×ª×” MAC: 00-AA-BB-CC-DD-01</li>
                                <li>× ×™×˜×Ÿ ×œ×¢×§×•×‘ ×•×œ×—×¡×•× ×œ×¤×™ MAC</li>
                            </ul>
                            <p><strong>2. DHCP Logs:</strong></p>
                            <ul>
                                <li>×›×œ ×§×¦××ª IP × ×¨×©××ª ×¢× MAC ×•-Timestamp</li>
                                <li>× ×™×ª×Ÿ ×œ×§×©×¨ ×‘×™×Ÿ ×›×ª×•×‘×•×ª IP ×©×•× ×•×ª ×œ××•×ª×• ×ª×•×§×£</li>
                            </ul>
                            <p><strong>3. Network Behavior Analysis:</strong></p>
                            <ul>
                                <li>×“×¤×•×¡×™ ×ª×¢×‘×•×¨×” ×“×•××™×</li>
                                <li>×—×™×‘×•×¨×™× ×œ××•×ª× ×™×¢×“×™×</li>
                                <li>User Agent, ×˜×‘×™×¢×•×ª ××¦×‘×¢ ×©×œ ×¤×¨×•×˜×•×§×•×œ×™×</li>
                            </ul>
                            <p><strong>4. Port Security:</strong></p>
                            <ul>
                                <li>×”×’×‘×œ×ª ××¡×¤×¨ ×›×ª×•×‘×•×ª MAC ×œ×›×œ ×¤×•×¨×˜ ×¤×™×–×™ ×‘××ª×’</li>
                                <li>×—×¡×™××ª ×›×ª×•×‘×ª MAC ×—×©×•×“×” ×‘×›×œ ×”×¤×•×¨×˜×™×</li>
                            </ul>
                        </div>
                        <select id="q4_4">
                            <option value="">×‘×—×¨ ×ª×©×•×‘×”...</option>
                            <option value="mac">××¢×§×‘ ××—×¨ ×›×ª×•×‘×ª MAC</option>
                            <option value="username">××¢×§×‘ ××—×¨ ×©× ××©×ª××©</option>
                            <option value="impossible">××™ ××¤×©×¨ ×œ×¢×§×•×‘</option>
                        </select>
                        <button class="btn btn-primary" onclick="checkAnswer('q4_4', 'mac', '××¦×•×™×Ÿ! ×œ××¨×•×ª ×©×›×ª×•×‘×ª ×”-IP ××©×ª× ×”, ×›×ª×•×‘×ª ×”-MAC × ×©××¨×ª ×§×‘×•×¢×” (00-AA-BB-CC-DD-01). ×–×• ×”×“×¨×š ×”×¢×™×§×¨×™×ª ×œ×¢×§×•×‘ ××—×¨×™ ×”×ª×•×§×£!')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q4_4"></div>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="prevStage()">â—„ ×”×§×•×“×</button>
                    <button class="btn btn-primary" onclick="nextStage()">×”×‘× â–º</button>
                </div>
            </div>

            <!-- Stage 5 -->
            <div class="stage" id="stage5">
                <h2>ğŸ” ×©×œ×‘ 5: ×¤×™×¦×•×— ×”×¦×•×¤×Ÿ - ×”××©×™××” ×”×¡×•×¤×™×ª</h2>

                <div class="theory-box">
                    <h3>×¨×§×¢ ×ª×™××•×¨×˜×™ - Caesar Cipher</h3>
                    <p><strong>×¦×•×¤×Ÿ ×§×™×¡×¨ (Caesar Cipher):</strong> ××—×“ ×”×¦×¤× ×™× ×”×§×œ××¡×™×™× ×•×”×¤×©×•×˜×™× ×‘×™×•×ª×¨.</p>
                    <p><strong>×¢×§×¨×•×Ÿ ×”×¤×¢×•×œ×”:</strong> ×›×œ ××•×ª ×‘××œ×¤×‘×™×ª ××•×–×– ×‘××¡×¤×¨ ×§×‘×•×¢ ×©×œ ××§×•××•×ª.</p>
                    <p><strong>×“×•×’××”:</strong> ×¢× shift ×©×œ 3:</p>
                    <pre class="code-block">
A â†’ D
B â†’ E
C â†’ F
...
X â†’ A
Y â†’ B
Z â†’ C

"HELLO" â†’ "KHOOR"
                    </pre>
                    <p><strong>×¤×¢× ×•×—:</strong> ××–×™×–×™× ×‘×—×–×¨×” ×‘××•×ª×• ××¡×¤×¨ ××§×•××•×ª (××• ××–×™×–×™× ×§×“×™××” ×‘-26-shift).</p>
                    <p><strong>×—×•×œ×©×•×ª:</strong></p>
                    <ul>
                        <li>×™×© ×¨×§ 25 ××¤×©×¨×•×™×•×ª (shift 1-25)</li>
                        <li>×§×œ ×××•×“ ×œ×©×‘×•×¨ ×¢"×™ brute force</li>
                        <li>×©×•××¨ ×¢×œ ×“×¤×•×¡×™ ×ª×“×™×¨×•×ª ×©×œ ××•×ª×™×•×ª</li>
                    </ul>
                </div>

                <div class="exercise-section">
                    <h3>ğŸ“‹ ×”×ª×¨×—×™×©</h3>
                    <p>×‘×–××Ÿ ×©×¢×§×‘×ª× ××—×¨ ×”×ª×•×§×£, ×”×•× ×©×œ×— ×”×•×“×¢×” ××•×¦×¤× ×ª ×œ×©×•×ª×£ ×©×œ×•.</p>

                    <pre class="code-block">
<span class="string">×”×•×“×¢×” ××•×¦×¤× ×ª:</span> "Xlmw mw xli wigvix qiwweki!"

<span class="comment">×¨××– ××”×ª×•×§×£:</span> "×”××¤×ª×— ××¡×ª×ª×¨ ×‘× ×ª×‘ ×”×©× ×™ ×©×¢×‘×¨×ª×™ ×‘×“×¨×š ××œ ×”×©×¨×ª×™×"
                    </pre>

                    <div class="theory-box">
                        <h3>ğŸ—ºï¸ ×ª×–×›×•×¨×ª: ××‘× ×” ×”×¨×©×ª</h3>
                        <p>××”×©×œ×‘×™× ×”×§×•×“××™×, ×× ×—× ×• ×™×•×“×¢×™×:</p>
                        <ul>
                            <li><strong>××—×©×‘ ×”×—×©×•×“:</strong> 192.168.100.42 (×¡×’×× ×˜ A - ×¤×™×ª×•×—)</li>
                            <li><strong>×©×¨×ª ×”×™×¢×“:</strong> 10.0.50.100 (×¡×’×× ×˜ C - ×©×¨×ª×™×)</li>
                        </ul>
                        <p><strong>×”××¡×œ×•×œ ×¦×¨×™×š ×œ×”×™×•×ª:</strong></p>
                        <ol>
                            <li>××—×©×‘ ×—×©×•×“ â†’ Router1 (Gateway ×©×œ ×¡×’×× ×˜ A)</li>
                            <li>Router1 â†’ Router2 (× ×ª×‘ ×‘×™× ×™×™×)</li>
                            <li>Router2 â†’ ×©×¨×ª ×”×™×¢×“</li>
                        </ol>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 5.1</span>
                        <p><strong>××”×™ ×›×ª×•×‘×ª ×”-IP ×©×œ ×”× ×ª×‘ ×”×¨××©×•×Ÿ ×‘××¡×œ×•×œ?</strong></p>
                        <p style="font-size: 0.9em; color: #666;">×¨××–: ×–×” ×”-Gateway ×©×œ ×”××—×©×‘ ×”×—×©×•×“</p>
                        <input type="text" id="q5_1" placeholder="×”×›× ×¡ ×›×ª×•×‘×ª IP">
                        <button class="btn btn-primary" onclick="checkIPAnswer('q5_1', '192.168.100.1', '× ×›×•×Ÿ! ×”× ×ª×‘ ×”×¨××©×•×Ÿ ×”×•× Gateway ×©×œ ×¡×’×× ×˜ A: 192.168.100.1')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q5_1"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 5.2</span>
                        <p><strong>×”×¨××– ××“×‘×¨ ×¢×œ "×”× ×ª×‘ ×”×©× ×™". ××™×–×” ×¨××– ×œ×’×‘×™ ×›×ª×•×‘×ª ×”-IP ×©×œ×• ×× ×—× ×• ×™×›×•×œ×™× ×œ×”×¡×™×§?</strong></p>
                        <div class="theory-box">
                            <h3>× ×™×ª×•×— ×”×¨××–</h3>
                            <p>×”×¨××–: "×”× ×ª×‘ ×”×©× ×™ ×©×¢×‘×¨×ª×™ <strong>×‘×“×¨×š ××œ ×”×©×¨×ª×™×</strong>"</p>
                            <p>×–×” ××•××¨ ×©×”× ×ª×‘ ×”×©× ×™ × ××¦× ×‘×™×Ÿ ×¡×’×× ×˜ ×”×¤×™×ª×•×— (192.168.100.x) ×œ×‘×™×Ÿ ×¡×’×× ×˜ ×”×©×¨×ª×™× (10.0.50.x).</p>
                            <p>×›×ª×•×‘×•×ª ××¤×©×¨×™×•×ª ×œ× ×ª×‘ ×‘×™× ×™×™×:</p>
                            <ul>
                                <li>10.0.1.254 (×¨×©×ª ×‘×™× ×™×™×)</li>
                                <li>10.0.2.254 (×¨×©×ª ×‘×™× ×™×™×)</li>
                                <li>××• ×›×ª×•×‘×ª ××—×¨×ª ×‘×¨×©×ª 10.x</li>
                            </ul>
                            <p>×œ×¦×•×¨×š ×”×ª×¨×’×™×œ, × × ×™×— ×©×”×›×ª×•×‘×ª ×”×™×: <strong>10.0.1.254</strong></p>
                        </div>
                        <input type="text" id="q5_2" placeholder="×”×›× ×¡ ×›×ª×•×‘×ª IP ×©×œ × ×ª×‘ 2">
                        <button class="btn btn-primary" onclick="checkIPAnswer('q5_2', '10.0.1.254', '××¦×•×™×Ÿ! ×”× ×ª×‘ ×”×©× ×™ ×”×•× 10.0.1.254')">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q5_2"></div>
                    </div>

                    <div class="question">
                        <span class="question-number">×©××œ×” 5.3</span>
                        <p><strong>××”×• ×”××¤×ª×— ×œ×¦×•×¤×Ÿ? (×”×‘×™×ª ×”××—×¨×•×Ÿ ×©×œ ×›×ª×•×‘×ª IP ×©×œ ×”× ×ª×‘ ×”×©× ×™)</strong></p>
                        <p style="font-size: 0.9em; color: #666;">×¨××–: 10.0.1.254 â†’ ×”×‘×™×ª ×”××—×¨×•×Ÿ ×”×•×...</p>
                        <input type="text" id="q5_3" placeholder="×”×›× ×¡ ××¡×¤×¨">
                        <button class="btn btn-primary" onclick="handleKeyAnswer()">×‘×“×•×§ ×ª×©×•×‘×”</button>
                        <div class="feedback" id="feedback_q5_3"></div>
                    </div>

                    <div class="question" id="decrypt_section" style="display: none;">
                        <span class="question-number">×©××œ×” 5.4</span>
                        <p><strong>×¤×¢× ×— ××ª ×”×”×•×“×¢×”!</strong></p>
                        <div class="theory-box">
                            <h3>×›×™×¦×“ ×œ×¤×¢× ×—?</h3>
                            <p>×¢× Caesar Cipher ×•-shift ×©×œ 254:</p>
                            <ol>
                                <li>254 ×–×” ×’×“×•×œ ××“×™, ××– × ×—×©×‘: 254 mod 26 = 20</li>
                                <li>×œ×¤×¢× ×— shift 20 ×§×“×™××” = shift 6 ××—×•×¨×”</li>
                                <li>××• ×¤×©×•×˜ × × ×¡×” ×œ×¤×¢× ×— ×¢× shift 20</li>
                            </ol>
                            <p><strong>×”×•×“×¢×” ××•×¦×¤× ×ª:</strong> "Xlmw mw xli wigvix qiwweki!"</p>
                        </div>
                        <input type="text" id="q5_4" placeholder="×”×›× ×¡ ××ª ×”×”×•×“×¢×” ×”××¤×•×¢× ×—×ª">
                        <button class="btn btn-primary" onclick="checkDecryption()">×‘×“×•×§ ×¤×¢× ×•×—</button>
                        <div class="feedback" id="feedback_q5_4"></div>
                    </div>

                    <div class="theory-box" style="background: #e8f5e9; border-color: #4CAF50;">
                        <h3>ğŸ“ ××” ×œ××“× ×•?</h3>
                        <p>×‘××”×œ×š ×”×—×§×™×¨×” ×”×©×ª××©× ×• ×‘×›×œ ×”×™×“×¢ ×©×¨×›×©× ×• ×¢×œ ×©×›×‘×ª ×”×¨×©×ª:</p>
                        <ul>
                            <li><strong>IP Addressing & Subnetting:</strong> ×–×™×”×™× ×• ×¨×©×ª×•×ª ×•×—×™×©×‘× ×• gateways</li>
                            <li><strong>ARP:</strong> ×’×™×œ×™× ×• ××ª×§×¤×ª ARP Poisoning</li>
                            <li><strong>IP & ICMP Headers:</strong> × ×™×ª×—× ×• ×—×‘×™×œ×•×ª ×‘×¨××ª ×”×‘×™×˜×™×</li>
                            <li><strong>DHCP:</strong> ×¢×§×‘× ×• ××—×¨×™ ×”×ª×•×§×£ ×“×¨×š logs</li>
                            <li><strong>Routing:</strong> ×”×‘× ×• ××™×š ×—×‘×™×œ×•×ª ×¢×•×‘×¨×•×ª ×‘×™×Ÿ ×¨×©×ª×•×ª</li>
                        </ul>
                        <p style="margin-top: 15px;"><strong>×”××¡×§× ×”:</strong> ×”×‘× ×” ×¢××•×§×” ×©×œ ×©×›×‘×ª ×”×¨×©×ª ×”×™× ×§×¨×™×˜×™×ª ×œ×–×™×”×•×™ ×•×× ×™×¢×ª ××™×•××™ ×¡×™×™×‘×¨!</p>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="prevStage()">â—„ ×”×§×•×“×</button>
                    <button class="btn btn-success" onclick="showSummary()">×¡×™×•× ×•×¡×™×›×•× â–º</button>
                </div>
            </div>

            <!-- Summary -->
            <div class="stage" id="summary" style="display: none;">
                <h2>ğŸ† ×¡×™×›×•× ×•×¦×™×•×Ÿ</h2>

                <div class="score-card">
                    <h3 id="finalScore">×”×¦×™×•×Ÿ ×©×œ×š: 0/100</h3>
                    <p id="scoreMessage">×˜×•×¢×Ÿ...</p>
                </div>

                <div class="exercise-section">
                    <h3>ğŸ“Š ×¡×™×›×•× ×”×‘×™×¦×•×¢×™×</h3>
                    <div id="stageScores"></div>
                </div>

                <div class="theory-box">
                    <h3>ğŸ¯ × ×§×•×“×•×ª ××¤×ª×— ×œ×–×›×•×¨</h3>
                    <ul>
                        <li><strong>IP Addressing:</strong> ×”×‘× ×ª CIDR, subnet masks, ×•×”×‘×“×œ ×‘×™×Ÿ ×¨×©×ª×•×ª</li>
                        <li><strong>ARP:</strong> ×”×¤×¨×•×˜×•×§×•×œ ×©××—×‘×¨ ×‘×™×Ÿ IP ×œ-MAC, ×¤×’×™×¢ ×œ××ª×§×¤×•×ª</li>
                        <li><strong>IP Header:</strong> ××›×™×œ ××™×“×¢ ×—×™×•× ×™ ×œ× ×™×ª×•×‘ - TTL, Protocol, addresses</li>
                        <li><strong>ICMP:</strong> ×¤×¨×•×˜×•×§×•×œ ×‘×§×¨×” - ping, traceroute, ×”×•×“×¢×•×ª ×©×’×™××”</li>
                        <li><strong>DHCP:</strong> ×”×§×¦××” ××•×˜×•××˜×™×ª ×©×œ ×›×ª×•×‘×•×ª, × ×™×ª×Ÿ ×œ××¢×§×‘ ×“×¨×š logs</li>
                        <li><strong>Routing:</strong> IP × ×©××¨ ×§×‘×•×¢, MAC ××©×ª× ×” ×‘×›×œ hop</li>
                    </ul>
                </div>

                <div class="theory-box" style="background: #fff3cd; border-color: #ffc107;">
                    <h3>ğŸ’¡ ×”××œ×¦×•×ª ×œ×”××©×š</h3>
                    <ul>
                        <li>×ª×¨×’×œ×• ×¢× Wireshark - ×¦×¤×• ×‘×—×‘×™×œ×•×ª ×××™×ª×™×•×ª</li>
                        <li>×”×§×™××• ××¢×‘×“×” ×•×™×¨×˜×•××œ×™×ª ×¢× GNS3 ××• Packet Tracer</li>
                        <li>× ×¡×• ×œ×‘×¦×¢ (×‘××•×¤×Ÿ ××ª×™ ×•××‘×•×§×¨!) ARP scan ×•-ping sweep</li>
                        <li>×œ××“×• ×¢×œ IPv6 - ×”×¢×ª×™×“ ×©×œ ×©×›×‘×ª ×”×¨×©×ª</li>
                        <li>×—×§×¨×• ×¤×¨×•×˜×•×§×•×œ×™ routing: RIP, OSPF, BGP</li>
                    </ul>
                </div>

                <div class="navigation">
                    <button class="btn btn-primary" onclick="location.reload()">×”×ª×—×œ ××—×“×©</button>
                    <button class="btn btn-success" onclick="downloadCertificate()">×”×•×¨×“ ×ª×¢×•×“×” ğŸ“œ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Progress tracking
        let currentStage = 1;
        let completedStages = new Set();
        let answers = {};
        let scores = {
            stage1: 0,
            stage2: 0,
            stage3: 0,
            stage4: 0,
            stage5: 0
        };
        const maxScores = {
            stage1: 15,
            stage2: 25,
            stage3: 20,
            stage4: 20,
            stage5: 20
        };

        // Show stage
        function showStage(stageNum) {
            document.querySelectorAll('.stage').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));

            document.getElementById(`stage${stageNum}`).classList.add('active');
            document.querySelectorAll('.tab')[stageNum - 1].classList.add('active');

            currentStage = stageNum;
            updateProgress();
            window.scrollTo(0, 0);
        }

        // Navigation
        function nextStage() {
            if (currentStage < 5) {
                completedStages.add(currentStage);
                document.querySelectorAll('.tab')[currentStage - 1].classList.add('completed');
                showStage(currentStage + 1);
            }
        }

        function prevStage() {
            if (currentStage > 1) {
                showStage(currentStage - 1);
            }
        }

        // Update progress bar
        function updateProgress() {
            const progress = (completedStages.size / 5) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressFill').textContent = Math.round(progress) + '%';
        }

        // Check answer
        function checkAnswer(questionId, correctAnswer, successMessage) {
            const answer = document.getElementById(questionId).value;
            const feedback = document.getElementById(`feedback_${questionId}`);

            if (!answer) {
                showFeedback(feedback, 'info', '×× × ×‘×—×¨ ×ª×©×•×‘×”');
                return;
            }

            if (answer.toLowerCase() === correctAnswer.toLowerCase()) {
                showFeedback(feedback, 'success', 'âœ“ ' + successMessage);
                answers[questionId] = true;
                updateScore(questionId, true);
            } else {
                showFeedback(feedback, 'error', 'âœ— ×ª×©×•×‘×” ×©×’×•×™×”, × ×¡×” ×©×•×‘');
                answers[questionId] = false;
            }
            autoSave(); // ×©××™×¨×” ××•×˜×•××˜×™×ª
        }

        // Check IP answer
        function checkIPAnswer(questionId, correctIP, successMessage) {
            const answer = document.getElementById(questionId).value.trim();
            const feedback = document.getElementById(`feedback_${questionId}`);

            if (!answer) {
                showFeedback(feedback, 'info', '×× × ×”×›× ×¡ ×›×ª×•×‘×ª IP');
                return;
            }

            if (answer === correctIP) {
                showFeedback(feedback, 'success', 'âœ“ ' + successMessage);
                answers[questionId] = true;
                updateScore(questionId, true);
            } else {
                showFeedback(feedback, 'error', 'âœ— ×ª×©×•×‘×” ×©×’×•×™×”. ×•×“× ×©×”×›×ª×•×‘×ª ×‘×¤×•×¨××˜ × ×›×•×Ÿ (X.X.X.X)');
                answers[questionId] = false;
            }
            autoSave(); // ×©××™×¨×” ××•×˜×•××˜×™×ª
        }

        // Check number answer
        function checkNumberAnswer(questionId, correctNumber, successMessage) {
            const answer = parseInt(document.getElementById(questionId).value);
            const feedback = document.getElementById(`feedback_${questionId}`);

            if (isNaN(answer)) {
                showFeedback(feedback, 'info', '×× × ×”×›× ×¡ ××¡×¤×¨');
                return;
            }

            if (answer === correctNumber) {
                showFeedback(feedback, 'success', 'âœ“ ' + successMessage);
                answers[questionId] = true;
                updateScore(questionId, true);
            } else {
                showFeedback(feedback, 'error', 'âœ— ×ª×©×•×‘×” ×©×’×•×™×”. × ×¡×” ×œ×—×©×‘ ×©×•×‘');
                answers[questionId] = false;
            }
            autoSave(); // ×©××™×¨×” ××•×˜×•××˜×™×ª
        }

        // Check text answer
        function checkTextAnswer(questionId, keywords, successMessage) {
            const answer = document.getElementById(questionId).value.toLowerCase();
            const feedback = document.getElementById(`feedback_${questionId}`);

            if (!answer) {
                showFeedback(feedback, 'info', '×× × ×›×ª×•×‘ ×ª×©×•×‘×”');
                return;
            }

            const hasKeywords = keywords.some(kw => answer.includes(kw.toLowerCase()));

            if (hasKeywords) {
                showFeedback(feedback, 'success', 'âœ“ ' + successMessage);
                answers[questionId] = true;
                updateScore(questionId, true);
            } else {
                showFeedback(feedback, 'error', 'âœ— ×”×ª×©×•×‘×” ×œ× ××›×™×œ×” ××ª ×”× ×§×•×“×•×ª ×”×¢×™×§×¨×™×•×ª. × ×¡×” ×œ×”×•×¡×™×£ ×¤×¨×˜×™×');
                answers[questionId] = false;
            }
            autoSave(); // ×©××™×¨×” ××•×˜×•××˜×™×ª
        }

        // Handle key answer for decryption
        function handleKeyAnswer() {
            const answer = parseInt(document.getElementById('q5_3').value);
            const feedback = document.getElementById('feedback_q5_3');

            if (isNaN(answer)) {
                showFeedback(feedback, 'info', '×× × ×”×›× ×¡ ××¡×¤×¨');
                return;
            }

            if (answer === 254) {
                showFeedback(feedback, 'success', 'âœ“ × ×›×•×Ÿ! ×”××¤×ª×— ×”×•× 254. ×¢×›×©×™×• ×¤×¢× ×— ××ª ×”×”×•×“×¢×” (254 mod 26 = 20)');
                document.getElementById('decrypt_section').style.display = 'block';
                answers['q5_3'] = true;
                updateScore('q5_3', true);
            } else {
                showFeedback(feedback, 'error', 'âœ— ×ª×©×•×‘×” ×©×’×•×™×”. ××” ×”×‘×™×ª ×”××—×¨×•×Ÿ ×©×œ 10.0.1.254?');
                answers['q5_3'] = false;
            }
            autoSave(); // ×©××™×¨×” ××•×˜×•××˜×™×ª
        }

        // Check decryption
        function checkDecryption() {
            const answer = document.getElementById('q5_4').value.toLowerCase().trim();
            const feedback = document.getElementById('feedback_q5_4');
            const correct = "this is the secret message";

            if (!answer) {
                showFeedback(feedback, 'info', '×× × ×”×›× ×¡ ××ª ×”×”×•×“×¢×” ×”××¤×•×¢× ×—×ª');
                return;
            }

            // Remove punctuation for comparison
            const cleanAnswer = answer.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");
            const cleanCorrect = correct.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"");

            if (cleanAnswer === cleanCorrect) {
                showFeedback(feedback, 'success', 'ğŸ‰ ××¢×•×œ×”! ×¤×™×¢× ×—×ª ××ª ×”×”×•×“×¢×”: "This is the secret message!" - ×”×—×§×™×¨×” ×”×¡×ª×™×™××” ×‘×”×¦×œ×—×”!');
                answers['q5_4'] = true;
                updateScore('q5_4', true);
                completedStages.add(5);
                document.querySelectorAll('.tab')[4].classList.add('completed');
                updateProgress();
            } else {
                showFeedback(feedback, 'error', 'âœ— ×”×¤×¢× ×•×— ×œ× × ×›×•×Ÿ. ×–×›×•×¨: shift ×©×œ 254 mod 26 = 20. × ×¡×” ×œ×”×–×™×– ×›×œ ××•×ª ×‘-20 ××§×•××•×ª ×§×“×™××” (××• 6 ××—×•×¨×”)');
                answers['q5_4'] = false;
            }
            autoSave(); // ×©××™×¨×” ××•×˜×•××˜×™×ª
        }

        // Show feedback
        function showFeedback(element, type, message) {
            element.className = `feedback ${type}`;
            element.textContent = message;
            element.style.display = 'block';
            element.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Update score
        function updateScore(questionId, correct) {
            // Determine stage
            let stage;
            if (questionId.startsWith('q1')) stage = 'stage1';
            else if (questionId.startsWith('q2')) stage = 'stage2';
            else if (questionId.startsWith('q3')) stage = 'stage3';
            else if (questionId.startsWith('q4')) stage = 'stage4';
            else if (questionId.startsWith('q5')) stage = 'stage5';

            // Calculate score per question
            const questionsInStage = {
                stage1: 3,
                stage2: 3,
                stage3: 4,
                stage4: 4,
                stage5: 2
            };

            const pointsPerQuestion = maxScores[stage] / questionsInStage[stage];

            if (correct && !answers[questionId + '_scored']) {
                scores[stage] += pointsPerQuestion;
                answers[questionId + '_scored'] = true;
            }
        }

        // Show summary
        function showSummary() {
            document.querySelectorAll('.stage').forEach(s => s.classList.remove('active'));
            document.getElementById('summary').style.display = 'block';

            // Calculate total score
            const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
            document.getElementById('finalScore').textContent = `×”×¦×™×•×Ÿ ×©×œ×š: ${Math.round(totalScore)}/100`;

            // Message based on score
            let message = '';
            if (totalScore >= 90) message = 'ğŸŒŸ ××¦×•×™×Ÿ! ××ª×” ××•××—×” ×œ×©×›×‘×ª ×”×¨×©×ª!';
            else if (totalScore >= 75) message = 'ğŸ‘ ×›×œ ×”×›×‘×•×“! ×‘×™×¦×•×¢×™× ×˜×•×‘×™× ×××•×“!';
            else if (totalScore >= 60) message = 'âœ”ï¸ ×¢×‘×•×“×” ×˜×•×‘×”! ×™×© ××§×•× ×œ×©×™×¤×•×¨';
            else message = 'ğŸ’ª ×›×“××™ ×œ×—×–×•×¨ ×¢×œ ×”×—×•××¨ ×•×œ× ×¡×•×ª ×©×•×‘';

            document.getElementById('scoreMessage').textContent = message;

            // Stage scores
            const stageScoresHTML = Object.entries(scores).map((entry, index) => {
                const [stage, score] = entry;
                const maxScore = maxScores[stage];
                const percentage = (score / maxScore) * 100;
                return `
                    <div style="margin: 15px 0;">
                        <strong>×©×œ×‘ ${index + 1}:</strong> ${Math.round(score)}/${maxScore} × ×§×•×“×•×ª
                        <div class="progress-bar" style="margin-top: 5px;">
                            <div class="progress-fill" style="width: ${percentage}%">${Math.round(percentage)}%</div>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('stageScores').innerHTML = stageScoresHTML;

            window.scrollTo(0, 0);
        }

        // Toggle hint
        function toggleHint(hintId) {
            const hint = document.getElementById(hintId);
            const hintBox = hint.parentElement;
            hintBox.classList.toggle('open');
        }

        // Download certificate
        function downloadCertificate() {
            alert('×ª×›×•× ×” ×–×• ×ª×”×™×” ×–××™× ×” ×‘×§×¨×•×‘! ğŸ“œ');
        }

        // Initialize
        window.onload = function() {
            updateProgress();
            loadFromLocalStorage(); // ×˜×¢×Ÿ ×ª×©×•×‘×•×ª ×©××•×¨×•×ª ×‘×¢×ª ×˜×¢×™× ×ª ×”×“×£
        };

        // Auto-save to localStorage
        function autoSave() {
            const data = {
                timestamp: new Date().toISOString(),
                currentStage: currentStage,
                completedStages: Array.from(completedStages),
                answers: answers,
                scores: scores,
                formData: getAllFormData()
            };
            
            localStorage.setItem('networkLayerExercise', JSON.stringify(data));
            showAutoSaveIndicator();
        }

        // Get all form data
        function getAllFormData() {
            const formData = {};
            const inputs = document.querySelectorAll('input[type="text"], textarea, select');
            inputs.forEach(input => {
                if (input.id) {
                    formData[input.id] = input.value;
                }
            });
            return formData;
        }

        // Show auto-save indicator
        function showAutoSaveIndicator() {
            const indicator = document.getElementById('autoSaveIndicator');
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }

        // Load from localStorage
        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('networkLayerExercise');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    
                    // Restore state
                    currentStage = data.currentStage || 1;
                    completedStages = new Set(data.completedStages || []);
                    answers = data.answers || {};
                    scores = data.scores || {stage1: 0, stage2: 0, stage3: 0, stage4: 0, stage5: 0};
                    
                    // Restore form data
                    if (data.formData) {
                        Object.entries(data.formData).forEach(([id, value]) => {
                            const element = document.getElementById(id);
                            if (element) {
                                element.value = value;
                            }
                        });
                    }
                    
                    // Update UI
                    completedStages.forEach(stage => {
                        const tabIndex = stage - 1;
                        if (tabIndex >= 0 && tabIndex < 5) {
                            document.querySelectorAll('.tab')[tabIndex].classList.add('completed');
                        }
                    });
                    
                    showStage(currentStage);
                    updateProgress();
                    
                    console.log('× ×˜×¢×Ÿ ××”×©××™×¨×” ×”××•×˜×•××˜×™×ª:', data.timestamp);
                } catch (e) {
                    console.error('×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™×:', e);
                }
            }
        }

        // Save to file
        function saveToFile() {
            const data = {
                timestamp: new Date().toISOString(),
                studentName: prompt('×”×›× ×¡ ××ª ×©××š (××•×¤×¦×™×•× ×œ×™):') || '××œ××•× ×™',
                currentStage: currentStage,
                completedStages: Array.from(completedStages),
                answers: answers,
                scores: scores,
                formData: getAllFormData(),
                totalScore: Object.values(scores).reduce((a, b) => a + b, 0)
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `network_exercise_${data.studentName}_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('âœ… ×”×§×•×‘×¥ × ×©××¨ ×‘×”×¦×œ×—×”!');
        }

        // Load from file
        function loadFromFile(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Confirm before loading
                    const msg = `×”×× ×œ×˜×¢×•×Ÿ ××ª ×”× ×ª×•× ×™× ×©×œ: ${data.studentName}
××ª××¨×™×š: ${new Date(data.timestamp).toLocaleString('he-IL')}
×¦×™×•×Ÿ ×›×•×œ×œ: ${Math.round(data.totalScore)}/100

×–×” ×™××—×§ ××ª ×”×ª×©×•×‘×•×ª ×”× ×•×›×—×™×•×ª!`;
                    
                    if (!confirm(msg)) return;
                    
                    // Restore state
                    currentStage = data.currentStage || 1;
                    completedStages = new Set(data.completedStages || []);
                    answers = data.answers || {};
                    scores = data.scores || {stage1: 0, stage2: 0, stage3: 0, stage4: 0, stage5: 0};
                    
                    // Restore form data
                    if (data.formData) {
                        Object.entries(data.formData).forEach(([id, value]) => {
                            const element = document.getElementById(id);
                            if (element) {
                                element.value = value;
                            }
                        });
                    }
                    
                    // Update UI
                    document.querySelectorAll('.tab').forEach(tab => {
                        tab.classList.remove('completed');
                    });
                    
                    completedStages.forEach(stage => {
                        const tabIndex = stage - 1;
                        if (tabIndex >= 0 && tabIndex < 5) {
                            document.querySelectorAll('.tab')[tabIndex].classList.add('completed');
                        }
                    });
                    
                    showStage(currentStage);
                    updateProgress();
                    
                    // Save to localStorage as well
                    localStorage.setItem('networkLayerExercise', JSON.stringify(data));
                    
                    alert('âœ… ×”× ×ª×•× ×™× × ×˜×¢× ×• ×‘×”×¦×œ×—×”!');
                } catch (err) {
                    alert('âŒ ×©×’×™××” ×‘×§×¨×™××ª ×”×§×•×‘×¥: ' + err.message);
                }
            };
            reader.readAsText(file);
            
            // Reset file input
            event.target.value = '';
        }

        // Add auto-save on input change
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-save on any input change
            document.addEventListener('input', function(e) {
                if (e.target.matches('input[type="text"], textarea, select')) {
                    autoSave();
                }
            });
            
            // Auto-save on stage change
            const originalShowStage = showStage;
            showStage = function(stage) {
                originalShowStage(stage);
                autoSave();
            };
        });

        // Reset all progress
        function resetProgress() {
            if (!confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×›×œ ×”×ª×§×“××•×ª×š ×•×”×ª×©×•×‘×•×ª? ×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ!')) {
                return;
            }
            
            // Clear localStorage
            localStorage.removeItem('networkLayerExercise');
            
            // Reset all variables
            currentStage = 1;
            completedStages = new Set();
            answers = {};
            scores = {
                stage1: 0,
                stage2: 0,
                stage3: 0,
                stage4: 0,
                stage5: 0
            };
            
            // Clear all form inputs
            document.querySelectorAll('input[type="text"], textarea, select').forEach(input => {
                input.value = '';
            });
            
            // Clear all feedbacks
            document.querySelectorAll('.feedback').forEach(feedback => {
                feedback.style.display = 'none';
            });
            
            // Reset tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('completed', 'active');
            });
            document.querySelectorAll('.tab')[0].classList.add('active');
            
            // Reset stages
            document.querySelectorAll('.stage').forEach(stage => {
                stage.classList.remove('active');
            });
            document.getElementById('stage1').classList.add('active');
            document.getElementById('summary').style.display = 'none';
            
            // Reset progress bar
            updateProgress();
            
            alert('âœ… ×”×”×ª×§×“××•×ª ××•×¤×¡×” ×‘×”×¦×œ×—×”!');
        }
    </script>
</body>
</html>