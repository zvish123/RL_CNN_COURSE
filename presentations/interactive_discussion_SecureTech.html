<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>דף עבודה אינטראקטיבי - תרגיל דיון אבטחת מידע</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }
        
        .worksheet {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            border-bottom: 3px solid #2196F3;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #2196F3;
            margin: 0;
            font-size: 28px;
        }
        
        .section {
            margin-bottom: 25px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
            transition: all 0.3s ease;
        }
        
        .section:hover {
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .section h2 {
            color: #1976D2;
            margin-top: 0;
            font-size: 20px;
            border-bottom: 2px solid #1976D2;
            padding-bottom: 8px;
        }
        
        .info-box {
            background: #e3f2fd;
            border: 2px solid #2196F3;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .warning-box {
            background: #fff3e0;
            border: 2px solid #ff9800;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .success-box {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        input[type="text"], input[type="date"], textarea, select {
            border: 2px solid #ddd;
            border-radius: 5px;
            padding: 8px 12px;
            font-size: 14px;
            transition: border-color 0.3s ease;
            font-family: Arial, sans-serif;
        }
        
        input[type="text"]:focus, textarea:focus, select:focus {
            border-color: #2196F3;
            outline: none;
            box-shadow: 0 0 5px rgba(33, 150, 243, 0.3);
        }
        
        .input-group {
            margin: 10px 0;
        }
        
        .input-group label {
            display: inline-block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #1976D2;
        }
        
        .input-full {
            width: 100%;
            max-width: 100%;
        }
        
        .input-medium {
            width: 200px;
        }
        
        .input-small {
            width: 100px;
        }
        
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: right;
        }
        
        th {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        .role-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .role-option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .role-option:hover {
            border-color: #2196F3;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.2);
        }
        
        .role-option.selected {
            background: #2196F3;
            color: white;
            border-color: #1976D2;
        }
        
        .rating-group {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 10px 0;
        }
        
        .rating-buttons {
            display: flex;
            gap: 5px;
        }
        
        .rating-btn {
            width: 35px;
            height: 35px;
            border: 2px solid #ddd;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .rating-btn:hover {
            border-color: #2196F3;
            background: #e3f2fd;
        }
        
        .rating-btn.selected {
            background: #2196F3;
            color: white;
            border-color: #1976D2;
        }
        
        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 15px;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .progress-indicator {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 8px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #4caf50, #2196F3);
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .cost-calculator {
            background: #f8f9fa;
            border: 2px solid #6c757d;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .cost-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
        }
        
        .cost-total {
            font-size: 18px;
            font-weight: bold;
            color: #1976D2;
            border-top: 2px solid #1976D2;
            padding-top: 10px;
        }
        
        .validation-message {
            color: #f44336;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .completion-status {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #4caf50;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
        }

        @media (max-width: 768px) {
            .worksheet {
                padding: 15px;
            }
            
            .controls {
                position: relative;
                transform: none;
                left: auto;
                bottom: auto;
                margin-top: 20px;
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        button {
          padding: 10px 20px;
          font-size: 1.2em;
          margin-top: 10px;
          cursor: pointer;
          border: none;
          border-radius: 8px;
          background-color: #4CAF50;
          color: white;
        }
        /* עיצוב לחלון הקופץ */
        .modal {
          display: none; /* מוסתר כברירת מחדל */
          position: fixed;
          z-index: 1;
          right: 0;
          top: 0;
          width: 100%;
          height: 100%;
          overflow: auto;
          background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
          background-color: #fff;
          margin: 10% auto;
          padding: 20px;
          border-radius: 12px;
          width: 60%;
          text-align: right;
          direction: rtl;
        }
        .close {
          color: #aaa;
          float: left;
          font-size: 28px;
          font-weight: bold;
          cursor: pointer;
        }
        .close:hover {
          color: black;
        }
        ul {
          text-align: right;
        }

    </style>
</head>
<body>
    <div class="worksheet">
        <div class="completion-status" id="completionStatus">מולא: 0%</div>
        
        <div class="header">
            <h1>דף עבודה אינטראקטיבי - דיון בקבוצה</h1>
            <p><strong>נושא:</strong> בחירת פתרונות אבטחת מידע לחברת SecureTech</p>
            
            <div class="input-group">
                <label>שם התלמיד:</label>
                <input type="text" id="studentName" class="input-medium" placeholder="הכנס שם מלא">
                
                <label style="margin-right: 20px;">תאריך:</label>
                <input type="date" id="lessonDate" class="input-medium">
            </div>
        </div>

        <div class="progress-indicator">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%;"></div>
            </div>
            <span id="progressText">התקדמות: 0 מתוך 10 שלבים הושלמו</span>
        </div>

        <!-- רקע משימה -->
        <div class="section">
            <h2>רקע המשימה</h2>
            <div class="info-box">
                <p><strong>חברת SecureTech</strong> - סטארט-אפ ישראלי לניהול כספים אישיים</p>
                <ul>
                    <li>15 עובדים, עבודה היברידית</li>
                    <li>מתרחבת לאירופה (GDPR)</li>
                    <li>תקציב: 50,000₪ לשנה לאבטחה</li>
                    <li>מידע רגיש: פרטי לקוחות + נתוני בנקאות</li>
                </ul>
            </div>
        </div>

        <!-- תפקיד בדיון -->
        <div class="section">
            <h2>התפקיד שלי בדיון</h2>
            <div class="input-group">
                <label>בחר את התפקיד שקיבלת:</label>
                <div class="role-selector">
                    <div class="role-option" data-role="מנחה דיון">מנחה דיון</div>
                    <div class="role-option" data-role="רשמן ראשי">רשמן ראשי</div>
                    <div class="role-option" data-role="רשמן מבקר">רשמן מבקר</div>
                    <div class="role-option" data-role="שומר זמן">שומר זמן</div>
                    <div class="role-option" data-role="מתווך">מתווך</div>
                    <div class="role-option" data-role="דובר קבוצה">דובר קבוצה</div>
                </div>
            </div>
            
            <div class="warning-box">
                <label><strong>מה התפקיד שלי כולל:</strong></label>
                <textarea id="roleDescription" class="input-full" placeholder="רשום כאן מה התפקיד שלך כולל..."></textarea>
            </div>
        </div>

        <!-- אפשרויות לבחירה -->
        <div class="section">
            <h2>אפשרויות פתרונות האבטחה</h2>
            <button id="optionsBtn">הצג מידע נוסף על האפשרויות</button>
            <table>
                <tr>
                    <th>פתרון</th>
                    <th>עלות שנתית</th>
                    <th>יתרונות עיקריים</th>
                    <th>חסרונות עיקריים</th>
                </tr>
                <tr data-cost="15000">
                    <td>אימות דו-שלבי מתקדם</td>
                    <td>15,000₪</td>
                    <td><input type="text" placeholder="יתרונות..." data-field="advantages"></td>
                    <td><input type="text" placeholder="חסרונות..." data-field="disadvantages"></td>
                </tr>
                <tr data-cost="12000">
                    <td>מערכת גיבוי ושחזור</td>
                    <td>12,000₪</td>
                    <td><input type="text" placeholder="יתרונות..." data-field="advantages"></td>
                    <td><input type="text" placeholder="חסרונות..." data-field="disadvantages"></td>
                </tr>
                <tr data-cost="8000">
                    <td>הדרכות אבטחה לעובדים</td>
                    <td>8,000₪</td>
                    <td><input type="text" placeholder="יתרונות..." data-field="advantages"></td>
                    <td><input type="text" placeholder="חסרונות..." data-field="disadvantages"></td>
                </tr>
                <tr data-cost="20000">
                    <td>חומת אש + ניטור</td>
                    <td>20,000₪</td>
                    <td><input type="text" placeholder="יתרונות..." data-field="advantages"></td>
                    <td><input type="text" placeholder="חסרונות..." data-field="disadvantages"></td>
                </tr>
                <tr data-cost="18000">
                    <td>הצפנת מסדי נתונים</td>
                    <td>18,000₪</td>
                    <td><input type="text" placeholder="יתרונות..." data-field="advantages"></td>
                    <td><input type="text" placeholder="חסרונות..." data-field="disadvantages"></td>
                </tr>
                <tr data-cost="25000">
                    <td>ניטור פעילות משתמשים</td>
                    <td>25,000₪</td>
                    <td><input type="text" placeholder="יתרונות..." data-field="advantages"></td>
                    <td><input type="text" placeholder="חסרונות..." data-field="disadvantages"></td>
                </tr>
            </table>
        </div>

        <!-- קריטריונים לבחירה -->
        <div class="section">
            <h2>שלב 2: קריטריונים לבחירה (8 דקות)</h2>
            <button id="criteriaBtn">הצג קריטריונים אפשריים</button>
            <p><strong>הקריטריונים שהקבוצה קבעה:</strong></p>
            <table>
                <tr>
                    <th>קריטריון</th>
                    <th>חשיבות (1-5)</th>
                    <th>הסבר</th>
                </tr>
                <tr>
                    <td><input type="text" placeholder="קריטריון 1"></td>
                    <td>
                        <select class="input-small">
                            <option value="">בחר</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td><input type="text" placeholder="למה זה חשוב?"></td>
                </tr>
                <tr>
                    <td><input type="text" placeholder="קריטריון 2"></td>
                    <td>
                        <select class="input-small">
                            <option value="">בחר</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td><input type="text" placeholder="למה זה חשוב?"></td>
                </tr>
                <tr>
                    <td><input type="text" placeholder="קריטריון 3"></td>
                    <td>
                        <select class="input-small">
                            <option value="">בחר</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td><input type="text" placeholder="למה זה חשוב?"></td>
                </tr>
                <tr>
                    <td><input type="text" placeholder="קריטריון 4"></td>
                    <td>
                        <select class="input-small">
                            <option value="">בחר</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td><input type="text" placeholder="למה זה חשוב?"></td>
                </tr>
            </table>
        </div>

        <!-- רעיונות אישיים -->
        <div class="section">
            <h2>שלב 3: הרעיונות האישיים שלי (לפני הדיון)</h2>
            
            <div class="info-box">
                <div class="input-group">
                    <label><strong>1. פתרון ראשון:</strong></label>
                    <select id="choice1" class="input-medium">
                        <option value="">בחר פתרון</option>
                        <option value="אימות דו-שלבי מתקדם" data-cost="15000">אימות דו-שלבי מתקדם (15,000₪)</option>
                        <option value="מערכת גיבוי ושחזור" data-cost="12000">מערכת גיבוי ושחזור (12,000₪)</option>
                        <option value="הדרכות אבטחה לעובדים" data-cost="8000">הדרכות אבטחה לעובדים (8,000₪)</option>
                        <option value="חומת אש + ניטור" data-cost="20000">חומת אש + ניטור (20,000₪)</option>
                        <option value="הצפנת מסדי נתונים" data-cost="18000">הצפנת מסדי נתונים (18,000₪)</option>
                        <option value="ניטור פעילות משתמשים" data-cost="25000">ניטור פעילות משתמשים (25,000₪)</option>
                    </select>
                    <br>
                    <label><strong>סיבה:</strong></label>
                    <input type="text" id="reason1" class="input-full" placeholder="למה בחרת בפתרון הזה?">
                </div>
                
                <div class="input-group">
                    <label><strong>2. פתרון שני:</strong></label>
                    <select id="choice2" class="input-medium">
                        <option value="">בחר פתרון</option>
                        <option value="אימות דו-שלבי מתקדם" data-cost="15000">אימות דו-שלבי מתקדם (15,000₪)</option>
                        <option value="מערכת גיבוי ושחזור" data-cost="12000">מערכת גיבוי ושחזור (12,000₪)</option>
                        <option value="הדרכות אבטחה לעובדים" data-cost="8000">הדרכות אבטחה לעובדים (8,000₪)</option>
                        <option value="חומת אש + ניטור" data-cost="20000">חומת אש + ניטור (20,000₪)</option>
                        <option value="הצפנת מסדי נתונים" data-cost="18000">הצפנת מסדי נתונים (18,000₪)</option>
                        <option value="ניטור פעילות משתמשים" data-cost="25000">ניטור פעילות משתמשים (25,000₪)</option>
                    </select>
                    <br>
                    <label><strong>סיבה:</strong></label>
                    <input type="text" id="reason2" class="input-full" placeholder="למה בחרת בפתרון הזה?">
                </div>
                
                <div class="input-group">
                    <label><strong>3. פתרון שלישי:</strong></label>
                    <select id="choice3" class="input-medium">
                        <option value="">בחר פתרון</option>
                        <option value="אימות דו-שלבי מתקדם" data-cost="15000">אימות דו-שלבי מתקדם (15,000₪)</option>
                        <option value="מערכת גיבוי ושחזור" data-cost="12000">מערכת גיבוי ושחזור (12,000₪)</option>
                        <option value="הדרכות אבטחה לעובדים" data-cost="8000">הדרכות אבטחה לעובדים (8,000₪)</option>
                        <option value="חומת אש + ניטור" data-cost="20000">חומת אש + ניטור (20,000₪)</option>
                        <option value="הצפנת מסדי נתונים" data-cost="18000">הצפנת מסדי נתונים (18,000₪)</option>
                        <option value="ניטור פעילות משתמשים" data-cost="25000">ניטור פעילות משתמשים (25,000₪)</option>
                    </select>
                    <br>
                    <label><strong>סיבה:</strong></label>
                    <input type="text" id="reason3" class="input-full" placeholder="למה בחרת בפתרון הזה?">
                </div>
            </div>
            
            <div class="cost-calculator">
                <div class="cost-item">
                    <span>פתרון ראשון:</span>
                    <span id="cost1">0₪</span>
                </div>
                <div class="cost-item">
                    <span>פתרון שני:</span>
                    <span id="cost2">0₪</span>
                </div>
                <div class="cost-item">
                    <span>פתרון שלישי:</span>
                    <span id="cost3">0₪</span>
                </div>
                <div class="cost-item cost-total">
                    <span>סה"כ עלות:</span>
                    <span id="totalCost">0₪</span>
                </div>
                <div id="budgetWarning" class="validation-message" style="display:none;">
                    אזהרה: העלות עולה על התקציב של 50,000₪!
                </div>
            </div>
        </div>

        <!-- מעקב אחר הדיון -->
        <div class="section">
            <h2>שלב 4: מעקב אחר הדיון המעמיק</h2>
            <div class="warning-box">
                <label><strong>רעיונות מעניינים ששמעתי מחברי הקבוצה:</strong></label>
                <textarea id="interestingIdeas" class="input-full" placeholder="רשום כאן רעיונות שהפתיעו אותך או שלא חשבת עליהם..."></textarea>
            </div>
            
            <div class="info-box">
                <label><strong>דברים שלא חשבתי עליהם לפני הדיון:</strong></label>
                <textarea id="newInsights" class="input-full" placeholder="מה גיליתי חדש במהלך הדיון?"></textarea>
            </div>
        </div>

        <!-- החלטה סופית -->
        <div class="section">
            <h2>שלב 5: ההחלטה הסופית של הקבוצה</h2>
            <table>
                <tr>
                    <th>פתרון נבחר</th>
                    <th>עלות</th>
                    <th>סיבה עיקרית לבחירה</th>
                </tr>
                <tr>
                    <td><input type="text" placeholder="פתרון ראשון שנבחר"></td>
                    <td><input type="text" class="input-small" placeholder="₪"></td>
                    <td><input type="text" placeholder="למה בחרנו את זה?"></td>
                </tr>
                <tr>
                    <td><input type="text" placeholder="פתרון שני שנבחר"></td>
                    <td><input type="text" class="input-small" placeholder="₪"></td>
                    <td><input type="text" placeholder="למה בחרנו את זה?"></td>
                </tr>
                <tr>
                    <td><input type="text" placeholder="פתרון שלישי שנבחר"></td>
                    <td><input type="text" class="input-small" placeholder="₪"></td>
                    <td><input type="text" placeholder="למה בחרנו את זה?"></td>
                </tr>
            </table>
            
            <div class="input-group">
                <label><strong>סה"כ עלות ההחלטה:</strong></label>
                <input type="text" id="finalTotalCost" class="input-medium" placeholder="0₪">
            </div>
            
            <div class="warning-box">
                <div class="input-group">
                    <label><strong>האם אני מסכים עם החלטת הקבוצה?</strong></label>
                    <div style="margin: 10px 0;">
                        <input type="radio" id="agreeYes" name="agreement" value="כן">
                        <label for="agreeYes" style="margin-left: 10px;">כן</label>
                        <input type="radio" id="agreeNo" name="agreement" value="לא" style="margin-right: 20px;">
                        <label for="agreeNo" style="margin-left: 10px;">לא</label>
                    </div>
                </div>
                <label><strong>הסבר:</strong></label>
                <textarea id="agreementExplanation" class="input-full" placeholder="הסבר מדוע אתה מסכים או לא מסכים עם החלטת הקבוצה..."></textarea>
            </div>
        </div>

        <!-- רפלקציה אישית -->
        <div class="section">
            <h2>רפלקציה אישית</h2>
            
            <div class="info-box">
                <label><strong>1. איך תרמתי לדיון? (תן דוגמה ספציפית)</strong></label>
                <textarea id="contribution" class="input-full" placeholder="תאר בצורה ספציפית איך תרמת לדיון..."></textarea>
            </div>
            
            <div class="info-box">
                <label><strong>2. מה למדתי חדש על אבטחת מידע מהדיון?</strong></label>
                <textarea id="newLearning" class="input-full" placeholder="איזה ידע חדש רכשת על אבטחת מידע?"></textarea>
            </div>
            
            <div class="info-box">
                <label><strong>3. איזה תפקיד היה לי הכי קל/קשה ולמה?</strong></label>
                <textarea id="roleReflection" class="input-full" placeholder="הרהר על התפקיד שלך בדיון..."></textarea>
            </div>
            
            <div class="info-box">
                <label><strong>4. אם הייתי יכול לשנות משהו בתהליך, מה זה היה?</strong></label>
                <textarea id="processImprovement" class="input-full" placeholder="מה היית משנה בתהליך הדיון?"></textarea>
            </div>
        </div>

        <!-- מעקב ביצוע -->
        <div class="section">
            <h2>מעקב ביצוע - ציונים עצמיים</h2>
            <p><strong>דרג את עצמך (1-4):</strong></p>
            
            <div class="rating-group">
                <span><strong>השתתפות פעילה:</strong></span>
                <div class="rating-buttons">
                    <div class="rating-btn" data-rating="participation" data-value="1">1</div>
                    <div class="rating-btn" data-rating="participation" data-value="2">2</div>
                    <div class="rating-btn" data-rating="participation" data-value="3">3</div>
                    <div class="rating-btn" data-rating="participation" data-value="4">4</div>
                </div>
            </div>
            
            <div class="rating-group">
                <span><strong>הקשבה לאחרים:</strong></span>
                <div class="rating-buttons">
                    <div class="rating-btn" data-rating="listening" data-value="1">1</div>
                    <div class="rating-btn" data-rating="listening" data-value="2">2</div>
                    <div class="rating-btn" data-rating="listening" data-value="3">3</div>
                    <div class="rating-btn" data-rating="listening" data-value="4">4</div>
                </div>
            </div>
            
            <div class="rating-group">
                <span><strong>ביצוע התפקיד שלי:</strong></span>
                <div class="rating-buttons">
                    <div class="rating-btn" data-rating="roleExecution" data-value="1">1</div>
                    <div class="rating-btn" data-rating="roleExecution" data-value="2">2</div>
                    <div class="rating-btn" data-rating="roleExecution" data-value="3">3</div>
                    <div class="rating-btn" data-rating="roleExecution" data-value="4">4</div>
                </div>
            </div>
            
            <div class="rating-group">
                <span><strong>כיבוד דעות שונות:</strong></span>
                <div class="rating-buttons">
                    <div class="rating-btn" data-rating="respect" data-value="1">1</div>
                    <div class="rating-btn" data-rating="respect" data-value="2">2</div>
                    <div class="rating-btn" data-rating="respect" data-value="3">3</div>
                    <div class="rating-btn" data-rating="respect" data-value="4">4</div>
                </div>
            </div>
            
            <div class="rating-group">
                <span><strong>תרומה לפתרון בעיות:</strong></span>
                <div class="rating-buttons">
                    <div class="rating-btn" data-rating="problemSolving" data-value="1">1</div>
                    <div class="rating-btn" data-rating="problemSolving" data-value="2">2</div>
                    <div class="rating-btn" data-rating="problemSolving" data-value="3">3</div>
                    <div class="rating-btn" data-rating="problemSolving" data-value="4">4</div>
                </div>
            </div>
        </div>

        <!-- משימה לבית -->
        <div class="section">
            <h2>המשימה שלי לבית</h2>
            <div class="warning-box">
                <p><strong>בהתבסס על התפקיד שהיה לי בדיון:</strong></p>
                
                <div class="info-box">
                    <strong>מנחה דיון:</strong> הכן מצגת 5 דקות על ההחלטה<br>
                    <strong>רשמנים:</strong> ערוך את סיכום הדיון ושלח לכולם<br>
                    <strong>שאר הקבוצה:</strong> מצא בחדשות דוגמה לחברה שנפגעה מהיעדר הפתרון שלא בחרנו
                </div>
                
                <label><strong>המשימה הספציפית שלי:</strong></label>
                <textarea id="homeworkTask" class="input-full" placeholder="רשום את המשימה הספציפית שלך לבית..."></textarea>
            </div>
        </div>

        <!-- סיכום אישי -->
        <div class="section">
            <h2>סיכום אישי</h2>
            <div class="success-box">
                <label><strong>המסקנות החשובות ביותר מהתרגיל:</strong></label>
                <textarea id="keyTakeaways" class="input-full" placeholder="מה הדברים החשובים ביותר שלמדת מהתרגיל הזה?"></textarea>
            </div>
        </div>

        <!-- חלון הקופץ -->
        <div id="criteriaModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>קריטריונים להערכת פתרונות</h2>
                <ul>
                    <li><strong>עלות-תועלת:</strong> עד כמה ההשקעה הכספית מצדיקה את הערך שהפתרון מספק.</li>
                    <li><strong>רמת הסיכון שמטופלת:</strong> באיזו מידה הפתרון מפחית סיכונים קיימים.</li>
                    <li><strong>קלות יישום:</strong> כמה פשוט להטמיע את הפתרון מבחינת משאבים וכוח אדם.</li>
                    <li><strong>עמידה בתקנות אירופיות:</strong> האם הפתרון תואם את החוקים והרגולציות הרלוונטיות (כגון GDPR).</li>
                    <li><strong>השפעה על פרודוקטיביות העובדים:</strong> האם הפתרון מייעל את העבודה היומיומית.</li>
                    <li><strong>זמן יישום:</strong> משך הזמן הדרוש עד שהפתרון יפעל בפועל.</li>
                    <li><strong>דרישות תחזוקה:</strong> כמה תחזוקה נדרשת לאחר ההטמעה.</li>
                    <li><strong>גמישות ויכולת הרחבה:</strong> עד כמה הפתרון ניתן להתאמות עתידיות.</li>
                    <li><strong>השפעה סביבתית:</strong> מהי ההשפעה של הפתרון על משאבי טבע ואקולוגיה.</li>
                    <li><strong>השפעה על מוניטין:</strong> האם הפתרון משפר את תדמית הארגון בעיני הציבור.</li>
                    <li><strong>רמת חדשנות:</strong> עד כמה הפתרון מביא ערך חדשני ושונה.</li>
                    <li><strong>התאמה לאסטרטגיה הארגונית:</strong> האם הפתרון תואם ליעדים ארוכי הטווח של הארגון.</li>
                    <li><strong>תמיכה טכנית/קהילה:</strong> האם קיימת תמיכה מקצועית או קהילתית זמינה.</li>
                    <li><strong>עלות הכשרה:</strong> האם העובדים צריכים לעבור הכשרה מיוחדת ליישום הפתרון.</li>
                    <li><strong>השפעה על איכות השירות/המוצר:</strong> האם האיכות הסופית משתפרת בזכות הפתרון.</li>
                    <li><strong>אמינות ובגרות הפתרון:</strong> האם מדובר בפתרון יציב שנבדק והוכח בשוק.</li>
                    <li><strong>שיעור החזר השקעה (ROI):</strong> תוך כמה זמן צפויה החזרת ההשקעה.</li>
                </ul>
            </div>
        </div>

        <!-- חלון הקופץ -->
        <div class="modal" id="optionsModal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>אפשרויות אבטחה ומידע נוסף</h2>

                <div class="option">
                    <h3>אימות דו-שלבי מתקדם <span class="price">(15,000₪/שנה)</span></h3>
                    <ul>
                      <li>אימות ביומטרי + SMS</li>
                      <li>הגנה מפני פריצות לחשבונות</li>
                    </ul>
                </div>

                <div class="option">
                    <h3>מערכת גיבוי ושחזור <span class="price">(12,000₪/שנה)</span></h3>
                    <ul>
                      <li>גיבוי אוטומטי יומי</li>
                      <li>שחזור מהיר במקרה חירום</li>
                    </ul>
                </div>

              <div class="option">
                <h3>הדרכות אבטחה לעובדים <span class="price">(8,000₪/שנה)</span></h3>
                <ul>
                  <li>סימולציות פישינג</li>
                  <li>הדרכות רבעוניות</li>
                </ul>
              </div>

              <div class="option">
                <h3>חומת אש מתקדמת + ניטור <span class="price">(20,000₪/שנה)</span></h3>
                <ul>
                  <li>זיהוי התקפות בזמן אמת</li>
                  <li>חסימה אוטומטית של איומים</li>
                </ul>
              </div>

              <div class="option">
                <h3>הצפנת מסדי נתונים <span class="price">(18,000₪/שנה)</span></h3>
                <ul>
                  <li>הצפנה מלאה של כל המידע הרגיש</li>
                  <li>מפתחות הצפנה מבוזרים</li>
                </ul>
              </div>

              <div class="option">
                <h3>ניטור פעילות משתמשים <span class="price">(25,000₪/שנה)</span></h3>
                <ul>
                  <li>מעקב אחר גישות לקבצים</li>
                  <li>זיהוי פעילות חריגה</li>
                </ul>
              </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn btn-primary" onclick="saveProgress()">
            💾 שמירה זמנית
        </button>
        <button class="btn btn-success" onclick="generateSummary()">
            📄 יצירת סיכום
        </button>
        <button class="btn btn-warning" onclick="downloadWorksheet()">
            📥 הורדת קובץ
        </button>
    </div>

    <script>
        // משתנים גלובליים
        let selectedRole = '';
        let formData = {};
        let ratings = {};

        // אתחול הדף
        document.addEventListener('DOMContentLoaded', function() {
            setTodayDate();
            setupEventListeners();
            loadSavedData();
            updateProgress();
        });

        // הגדרת תאריך היום
        function setTodayDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('lessonDate').value = today;
        }

        // הגדרת מאזינים לאירועים
        function setupEventListeners() {
            // בחירת תפקיד
            document.querySelectorAll('.role-option').forEach(option => {
                option.addEventListener('click', function() {
                    selectRole(this.dataset.role);
                });
            });

            // חישוב עלויות
            ['choice1', 'choice2', 'choice3'].forEach(id => {
                document.getElementById(id).addEventListener('change', calculateCosts);
            });

            // דירוגים
            document.querySelectorAll('.rating-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    setRating(this.dataset.rating, this.dataset.value);
                });
            });

            // שמירה אוטומטית
            document.addEventListener('input', function() {
                updateProgress();
                autoSave();
            });

            document.addEventListener('change', function() {
                updateProgress();
                autoSave();
            });
        }

        // בחירת תפקיד
        function selectRole(role) {
            // הסרת בחירה קודמת
            document.querySelectorAll('.role-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // הוספת בחירה חדשה
            document.querySelector(`[data-role="${role}"]`).classList.add('selected');
            selectedRole = role;
            
            // הוספת תיאור תפקיד אוטומטי
            const roleDescriptions = {
                'מנחה דיון': 'מוביל את התהליך, מוודא שכולם משתתפים, שומר על הסדר ומנהל את המעברים בין השלבים',
                'רשמן ראשי': 'כותב על הלוח את כל הרעיונות וההחלטות, מתעד בצורה ברורה ומסודרת',
                'רשמן מבקר': 'בודק שהכל נרשם נכון, מוודא שלא נשכח כלום ושומר על דיוק המידע',
                'שומר זמן': 'עוקב אחרי השעון, מזכיר למעברי שלבים, מוודא שהדיון מתקדם בזמן',
                'מתווך': 'עוזר כשיש ויכוחים, מעודד תלמידים שקטים, שומר על אווירה חיובית',
                'דובר קבוצה': 'מציג למורה את החלטת הקבוצה בסוף, מייצג את הקבוצה כלפי חוץ'
            };
            
            document.getElementById('roleDescription').value = roleDescriptions[role] || '';
        }

        // חישוב עלויות
        function calculateCosts() {
            let total = 0;
            
            ['choice1', 'choice2', 'choice3'].forEach((choiceId, index) => {
                const select = document.getElementById(choiceId);
                const costElement = document.getElementById(`cost${index + 1}`);
                
                if (select.value && select.selectedOptions[0]) {
                    const cost = parseInt(select.selectedOptions[0].dataset.cost) || 0;
                    costElement.textContent = `${cost.toLocaleString()}₪`;
                    total += cost;
                } else {
                    costElement.textContent = '0₪';
                }
            });
            
            document.getElementById('totalCost').textContent = `${total.toLocaleString()}₪`;
            
            // אזהרה על תקציב
            const warningElement = document.getElementById('budgetWarning');
            if (total > 50000) {
                warningElement.style.display = 'block';
                warningElement.textContent = `אזהרה: העלות ${total.toLocaleString()}₪ עולה על התקציב של 50,000₪!`;
            } else {
                warningElement.style.display = 'none';
            }
        }

        // הגדרת דירוג
        function setRating(category, value) {
            // הסרת בחירות קודמות באותה קטגוריה
            document.querySelectorAll(`[data-rating="${category}"]`).forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // הוספת הבחירה החדשה
            document.querySelector(`[data-rating="${category}"][data-value="${value}"]`).classList.add('selected');
            ratings[category] = parseInt(value);
        }

        // עדכון התקדמות
        function updateProgress() {
            const fields = [
                'studentName', 'lessonDate', 'roleDescription',
                'choice1', 'choice2', 'choice3',
                'interestingIdeas', 'newInsights',
                'contribution', 'newLearning', 'roleReflection', 'processImprovement'
            ];
            
            let completed = 0;
            const total = fields.length + Object.keys(ratings).length + (selectedRole ? 1 : 0);
            
            fields.forEach(fieldId => {
                const element = document.getElementById(fieldId);
                if (element && element.value.trim()) {
                    completed++;
                }
            });
            
            completed += Object.keys(ratings).length;
            if (selectedRole) completed++;
            
            const percentage = Math.round((completed / total) * 100);
            document.getElementById('progressBar').style.width = `${percentage}%`;
            document.getElementById('progressText').textContent = `התקדמות: ${completed} מתוך ${total} שלבים הושלמו`;
            document.getElementById('completionStatus').textContent = `מולא: ${percentage}%`;
        }

        // שמירה אוטומטית
        function autoSave() {
            const data = collectFormData();
            localStorage.setItem('discussionWorksheet', JSON.stringify(data));
        }

        // טעינת נתונים שמורים
        function loadSavedData() {
            const saved = localStorage.getItem('discussionWorksheet');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    restoreFormData(data);
                } catch (e) {
                    console.log('שגיאה בטעינת נתונים שמורים');
                }
            }
        }

        // איסוף נתוני הטופס
        function collectFormData() {
            const data = {
                studentName: document.getElementById('studentName').value,
                lessonDate: document.getElementById('lessonDate').value,
                selectedRole: selectedRole,
                roleDescription: document.getElementById('roleDescription').value,
                choices: {
                    choice1: document.getElementById('choice1').value,
                    choice2: document.getElementById('choice2').value,
                    choice3: document.getElementById('choice3').value,
                    reason1: document.getElementById('reason1').value,
                    reason2: document.getElementById('reason2').value,
                    reason3: document.getElementById('reason3').value
                },
                discussion: {
                    interestingIdeas: document.getElementById('interestingIdeas').value,
                    newInsights: document.getElementById('newInsights').value
                },
                reflection: {
                    contribution: document.getElementById('contribution').value,
                    newLearning: document.getElementById('newLearning').value,
                    roleReflection: document.getElementById('roleReflection').value,
                    processImprovement: document.getElementById('processImprovement').value
                },
                ratings: ratings,
                homework: document.getElementById('homeworkTask').value,
                keyTakeaways: document.getElementById('keyTakeaways').value,
                timestamp: new Date().toISOString()
            };
            return data;
        }

        // שחזור נתוני טופס
        function restoreFormData(data) {
            if (data.studentName) document.getElementById('studentName').value = data.studentName;
            if (data.lessonDate) document.getElementById('lessonDate').value = data.lessonDate;
            if (data.selectedRole) selectRole(data.selectedRole);
            if (data.roleDescription) document.getElementById('roleDescription').value = data.roleDescription;
            
            if (data.choices) {
                Object.keys(data.choices).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) element.value = data.choices[key];
                });
                calculateCosts();
            }
            
            if (data.discussion) {
                Object.keys(data.discussion).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) element.value = data.discussion[key];
                });
            }
            
            if (data.reflection) {
                Object.keys(data.reflection).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) element.value = data.reflection[key];
                });
            }
            
            if (data.ratings) {
                Object.keys(data.ratings).forEach(category => {
                    setRating(category, data.ratings[category]);
                });
            }
            
            if (data.homework) document.getElementById('homeworkTask').value = data.homework;
            if (data.keyTakeaways) document.getElementById('keyTakeaways').value = data.keyTakeaways;
        }

        // שמירת התקדמות
        function saveProgress() {
            autoSave();
            alert('הנתונים נשמרו בהצלחה! 💾');
        }

        // יצירת סיכום
        function generateSummary() {
            const data = collectFormData();
            const summaryWindow = window.open('', '_blank');
            
            const summaryHTML = `
                <!DOCTYPE html>
                <html lang="he" dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>סיכום תרגיל דיון - ${data.studentName}</title>
                    <style>
                        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; }
                        .header { text-align: center; border-bottom: 2px solid #2196F3; padding-bottom: 20px; margin-bottom: 30px; }
                        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
                        .section h3 { color: #1976D2; margin-top: 0; }
                        .rating { display: inline-block; background: #2196F3; color: white; padding: 2px 8px; border-radius: 3px; margin: 2px; }
                        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: right; }
                        th { background: #f5f5f5; }
                        @media print { body { margin: 0; } }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>סיכום תרגיל דיון בקבוצה</h1>
                        <h2>אבטחת מידע - חברת SecureTech</h2>
                        <p><strong>תלמיד:</strong> ${data.studentName} | <strong>תאריך:</strong> ${data.lessonDate}</p>
                    </div>
                    
                    <div class="section">
                        <h3>תפקיד בדיון</h3>
                        <p><strong>התפקיד:</strong> ${data.selectedRole}</p>
                        <p><strong>תיאור:</strong> ${data.roleDescription}</p>
                    </div>
                    
                    <div class="section">
                        <h3>הבחירות האישיות</h3>
                        <table>
                            <tr><th>פתרון</th><th>סיבה</th></tr>
                            <tr><td>${data.choices.choice1}</td><td>${data.choices.reason1}</td></tr>
                            <tr><td>${data.choices.choice2}</td><td>${data.choices.reason2}</td></tr>
                            <tr><td>${data.choices.choice3}</td><td>${data.choices.reason3}</td></tr>
                        </table>
                    </div>
                    
                    <div class="section">
                        <h3>תובנות מהדיון</h3>
                        <p><strong>רעיונות מעניינים:</strong> ${data.discussion.interestingIdeas}</p>
                        <p><strong>תגליות חדשות:</strong> ${data.discussion.newInsights}</p>
                    </div>
                    
                    <div class="section">
                        <h3>רפלקציה אישית</h3>
                        <p><strong>התרומה שלי:</strong> ${data.reflection.contribution}</p>
                        <p><strong>מה למדתי:</strong> ${data.reflection.newLearning}</p>
                        <p><strong>הרהורים על התפקיד:</strong> ${data.reflection.roleReflection}</p>
                        <p><strong>שיפורים מוצעים:</strong> ${data.reflection.processImprovement}</p>
                    </div>
                    
                    <div class="section">
                        <h3>הערכה עצמית</h3>
                        ${Object.keys(data.ratings).map(key => 
                            `<span class="rating">${translateRating(key)}: ${data.ratings[key]}/4</span>`
                        ).join(' ')}
                    </div>
                    
                    <div class="section">
                        <h3>מסקנות ומשימות</h3>
                        <p><strong>משימת בית:</strong> ${data.homework}</p>
                        <p><strong>מסקנות עיקריות:</strong> ${data.keyTakeaways}</p>
                    </div>
                    
                    <div class="section">
                        <p style="text-align: center; color: #666; font-size: 12px;">
                            נוצר באופן אוטומטי ב-${new Date().toLocaleDateString('he-IL')} | 
                            תרגיל דיון אינטראקטיבי
                        </p>
                    </div>
                </body>
                </html>
            `;
            
            summaryWindow.document.write(summaryHTML);
            summaryWindow.document.close();
        }

        // תרגום שמות דירוגים
        function translateRating(key) {
            const translations = {
                'participation': 'השתתפות פעילה',
                'listening': 'הקשבה לאחרים',
                'roleExecution': 'ביצוע התפקיד',
                'respect': 'כיבוד דעות',
                'problemSolving': 'פתרון בעיות'
            };
            return translations[key] || key;
        }

        // הורדת קובץ
        function downloadWorksheet() {
            const data = collectFormData();
            const content = JSON.stringify(data, null, 2);
            const blob = new Blob([content], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `worksheet_${data.studentName}_${data.lessonDate}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('הקובץ הורד בהצלחה! 📥');
        }

        // השגת האלמנטים
        const modal = document.getElementById("criteriaModal");
        const btn = document.getElementById("criteriaBtn");
        const span = document.getElementsByClassName("close")[0];

        // פתיחת החלון
        btn.onclick = function() {
          modal.style.display = "block";
        }


        const modalOptions = document.getElementById("optionsModal");
        const btnOptions = document.getElementById("optionsBtn");
        const spanOptions = document.getElementsByClassName("close")[0];

        btnOptions.onclick = function() {
          modalOptions.style.display = "block";
        }

         // סגירה על ידי כל כפתור X
        document.querySelectorAll(".close").forEach((closeBtn) => {
          closeBtn.onclick = () => {
            closeBtn.closest(".modal").style.display = "none";
          };
        });

        // סגירה בלחיצה מחוץ לחלון
        window.onclick = (event) => {
          if (event.target.classList.contains("modal")) {
            event.target.style.display = "none";
          }
        };
    </script>
</body>
</html>