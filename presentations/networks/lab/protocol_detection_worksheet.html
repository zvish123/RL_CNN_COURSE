<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>משימת סייבר: פענוח הפרוטוקול המסתורי</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            line-height: 1.8;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        h1 {
            color: #2d3748;
            text-align: center;
            border-bottom: 4px solid #667eea;
            padding-bottom: 15px;
            font-size: 2.2em;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #718096;
            font-style: italic;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        .story-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 25px;
            border-radius: 10px;
            border-right: 5px solid #e17055;
            margin: 25px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .mission-box {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .mission-box h2 {
            color: white;
            margin-top: 0;
            font-size: 1.8em;
        }
        h2 {
            color: #2d3748;
            border-right: 5px solid #667eea;
            padding-right: 15px;
            margin-top: 35px;
            font-size: 1.6em;
        }
        h3 {
            color: #4a5568;
            margin-top: 25px;
            font-size: 1.3em;
        }
        .task {
            background: #f7fafc;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-right: 4px solid #48bb78;
        }
        .task-number {
            background: #48bb78;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            font-weight: bold;
            margin-bottom: 10px;
        }
        code {
            background: #2d3748;
            color: #68d391;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
        }
        .code-block {
            background: #2d3748;
            color: #68d391;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            direction: ltr;
            text-align: left;
        }
        .hint-box {
            background: #fff5f5;
            border: 2px solid #fc8181;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .hint-box::before {
            content: "💡 רמז: ";
            font-weight: bold;
            color: #c53030;
        }
        .info-box {
            background: #ebf8ff;
            border: 2px solid #4299e1;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .info-box::before {
            content: "ℹ️ מידע חשוב: ";
            font-weight: bold;
            color: #2c5282;
        }
        .warning-box {
            background: #fffaf0;
            border: 2px solid #ed8936;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .warning-box::before {
            content: "⚠️ שים לב: ";
            font-weight: bold;
            color: #c05621;
        }
        ul {
            margin: 15px 0;
            padding-right: 30px;
        }
        li {
            margin: 10px 0;
            color: #4a5568;
        }
        .deliverables {
            background: #f0fff4;
            border: 2px solid #48bb78;
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
        }
        .deliverables h3 {
            color: #22543d;
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: right;
        }
        td {
            border: 1px solid #e2e8f0;
            padding: 12px;
            text-align: right;
        }
        tr:nth-child(even) {
            background: #f7fafc;
        }
        .footer {
            text-align: center;
            color: #718096;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔐 משימת סייבר: פענוח הפרוטוקול המסתורי</h1>
        <div class="subtitle">חקירת רשת מתקדמת עם Scapy</div>

        <div class="story-box">
            <h2 style="margin-top: 0; color: #2d3748;">📖 הסיפור</h2>
            <p style="font-size: 1.1em; color: #2d3748;">
                אתם חוקרי סייבר בארגון הביטחון הסודי "CyberShield". היום בבוקר התקבלה אצלכם משימה דחופה:
            </p>
            <p style="font-size: 1.1em; color: #2d3748;">
                <strong>"שרת מסתורי באתר djxmmx.net מפיץ מסרים מוצפנים בפורט 17. אנחנו לא יודעים אם הוא משתמש ב-TCP או ב-UDP. המודיעין שלנו מצביע על כך שהשרת מחלק כל פעם מסר שונה - אולי קוד סודי? עליכם לפענח את שיטת התקשורת ולאסוף 10 מסרים ראשונים."</strong>
            </p>
            <p style="font-size: 1.1em; color: #2d3748;">
                אתם יודעים שפרוטוקול QOTD (Quote of the Day) פועל בפורט 17, אבל לא ידוע לכם אם השרת הספציפי הזה עובד ב-TCP, ב-UDP, או בשניהם. זמן יקר - עליכם לפעול מהר!
            </p>
        </div>

        <div class="mission-box">
            <h2>🎯 המשימה שלכם</h2>
            <p style="font-size: 1.1em;">
                <strong>שלב א':</strong> זהו את הפרוטוקול בו השרת עובד (TCP או UDP)<br>
                <strong>שלב ב':</strong> אספו 10 "מסרים" (ציטוטים) שונים מהשרת<br>
                <strong>שלב ג':</strong> תעדו את תהליך החקירה והאלגוריתם שפיתחתם
            </p>
        </div>

        <h2>📚 רקע תיאורטי</h2>
        
        <h3>מהו פרוטוקול QOTD?</h3>
        <p>
            <strong>QOTD (Quote of the Day)</strong> הוא פרוטוקול רשת פשוט המוגדר ב-RFC 865. השרת מחזיר ציטוט אקראי לכל לקוח שמתחבר אליו. הפרוטוקול יכול לפעול גם ב-TCP וגם ב-UDP בפורט 17.
        </p>

        <h3>הבדלים בין TCP ל-UDP</h3>
        <table>
            <tr>
                <th>מאפיין</th>
                <th>TCP</th>
                <th>UDP</th>
            </tr>
            <tr>
                <td><strong>סוג חיבור</strong></td>
                <td>Connection-oriented (3-way handshake)</td>
                <td>Connectionless</td>
            </tr>
            <tr>
                <td><strong>אמינות</strong></td>
                <td>מובטחת - יש אישורים</td>
                <td>לא מובטחת - אין אישורים</td>
            </tr>
            <tr>
                <td><strong>מהירות</strong></td>
                <td>איטי יותר (בגלל overhead)</td>
                <td>מהיר יותר</td>
            </tr>
            <tr>
                <td><strong>זיהוי תקשורת</strong></td>
                <td>SYN → SYN-ACK → ACK</td>
                <td>שליחה ישירה של מסר</td>
            </tr>
            <tr>
                <td><strong>תשובה לפורט סגור</strong></td>
                <td>RST (Reset)</td>
                <td>ICMP Port Unreachable</td>
            </tr>
        </table>

        <h2>🛠️ כלי העבודה - Scapy</h2>
        
        <div class="info-box">
            Scapy הוא כלי Python חזק למניפולציה של חבילות רשת. הוא מאפשר לכם לבנות, לשלוח ולנתח חבילות בכל הפרוטוקולים.
        </div>

        <h3>פקודות Scapy בסיסיות שתזדקקו להן:</h3>
        
        <pre class="code-block">
# ייבוא הספרייה
from scapy.all import *

# בניית חבילת TCP
packet_tcp = IP(dst="target.com") / TCP(dport=80, flags="S")

# בניית חבילת UDP
packet_udp = IP(dst="target.com") / UDP(dport=53)

# שליחה וקבלת תשובה (Layer 3)
ans = sr1(packet, verbose=0, timeout=2)

# בדיקת תוכן התשובה
if ans and ans.haslayer(TCP):
    print(ans[TCP].flags)  # בדיקת הדגלים
    
if ans and Raw in ans:
    print(ans[Raw].load.decode())  # הדפסת התוכן
        </pre>

        <h3>דגלי TCP חשובים:</h3>
        <ul>
            <li><code>S</code> - SYN (בקשת חיבור)</li>
            <li><code>SA</code> - SYN-ACK (אישור חיבור - הפורט פתוח!)</li>
            <li><code>RA</code> - RST-ACK (דחייה - הפורט סגור!)</li>
            <li><code>A</code> - ACK (אישור)</li>
            <li><code>PA</code> - PUSH-ACK (שליחת נתונים)</li>
            <li><code>FA</code> - FIN-ACK (סגירת חיבור)</li>
        </ul>

        <h2>📝 שלב א': זיהוי הפרוטוקול</h2>

        <div class="task">
            <span class="task-number">משימה 1</span>
            <h3 style="margin-top: 0;">כתבו קוד Scapy שבודק האם השרת djxmmx.net עובד ב-TCP</h3>
            
            <p><strong>מה לעשות:</strong></p>
            <ul>
                <li>שלחו חבילת SYN לפורט 17</li>
                <li>בדקו אם קיבלתם SYN-ACK בחזרה (המשמעות: הפורט פתוח!)</li>
                <li>אם קיבלתם RST - הפורט סגור</li>
                <li>הדפיסו הודעה ברורה על התוצאה</li>
            </ul>

            <div class="hint-box">
                השתמשו ב-<code>ans[TCP].flags</code> כדי לבדוק את הדגלים שחזרו. השוו ל-<code>"SA"</code> או <code>"RA"</code>.
            </div>
        </div>

        <div class="task">
            <span class="task-number">משימה 2</span>
            <h3 style="margin-top: 0;">כתבו קוד Scapy שבודק האם השרת עובד ב-UDP</h3>
            
            <p><strong>מה לעשות:</strong></p>
            <ul>
                <li>שלחו חבילת UDP לפורט 17 (עם payload כלשהו, גם ריק)</li>
                <li>המתינו לתשובה עד 3 שניות</li>
                <li>בדקו אם קיבלתם תשובת UDP בחזרה (= פתוח!)</li>
                <li>בדקו אם קיבלתם ICMP type 3 (Port Unreachable = סגור!)</li>
                <li>אם לא קיבלתם כלום - זה יכול להיות שהפורט פתוח או שהוא מסונן</li>
            </ul>

            <div class="hint-box">
                UDP לא שולח אישורים כמו TCP. אם הפורט פתוח והשרת לא שולח תשובה, לא תקבלו כלום. אבל אם הפורט <strong>סגור</strong>, תקבלו הודעת ICMP מסוג 3 (Destination Unreachable).
            </div>
        </div>

        <div class="warning-box">
            <strong>חשוב מאוד:</strong> הריצו את שתי הבדיקות ותעדו את התוצאות. מה עבד? מה לא עבד? למה?
        </div>

        <h2>📝 שלב ב': איסוף המסרים</h2>

        <div class="task">
            <span class="task-number">משימה 3</span>
            <h3 style="margin-top: 0;">כתבו קוד שאוסף 10 ציטוטים מהשרת</h3>
            
            <p><strong>דרישות:</strong></p>
            <ul>
                <li>השתמשו בפרוטוקול שזיהיתם כעובד (TCP או UDP)</li>
                <li>אספו <strong>10 ציטוטים שונים</strong></li>
                <li>הדפיסו כל ציטוט עם מספר סידורי</li>
                <li>הקפידו על קוד נקי וקריא</li>
            </ul>

            <div class="hint-box">
                אם השרת עובד ב-TCP:
                <ul>
                    <li>זכרו את ה-3-way handshake (SYN → SYN-ACK → ACK)</li>
                    <li>שימו לב שכל בקשה צריכה להיות <strong>חיבור חדש</strong> (פורט מקור שונה או סגירת החיבור)</li>
                    <li>אפשר להשתמש בפורטים אקראיים: <code>import random; sport = random.randint(10000, 65000)</code></li>
                </ul>
            </div>

            <div class="hint-box">
                אם השרת עובד ב-UDP:
                <ul>
                    <li>UDP הרבה יותר פשוט - פשוט שלחו חבילה וקבלו תשובה</li>
                    <li>לא צריך handshake</li>
                    <li>כל בקשה עצמאית לחלוטין</li>
                </ul>
            </div>
        </div>

        <h2>📝 שלב ג': תיעוד ואלגוריתם</h2>

        <div class="deliverables">
            <h3>מה להגיש:</h3>
            <ol>
                <li>
                    <strong>קוד Python מלא:</strong>
                    <ul>
                        <li>קוד בדיקת TCP</li>
                        <li>קוד בדיקת UDP</li>
                        <li>קוד איסוף 10 הציטוטים</li>
                    </ul>
                </li>
                <li>
                    <strong>הסבר האלגוריתם (בעברית):</strong>
                    <ul>
                        <li>תארו את תהליך זיהוי הפרוטוקול - איך עשיתם את זה?</li>
                        <li>מה המשמעות של כל תשובה שקיבלתם?</li>
                        <li>איך פתרתם את בעיית איסוף מספר ציטוטים?</li>
                        <li>אם השרת עובד ב-TCP - הסבירו למה צריך חיבור חדש בכל פעם</li>
                    </ul>
                </li>
                <li>
                    <strong>תוצאות:</strong>
                    <ul>
                        <li>באיזה פרוטוקול השרת עובד?</li>
                        <li>10 הציטוטים שאספתם (העתיקו-הדביקו מהפלט)</li>
                    </ul>
                </li>
            </ol>
        </div>

        <h2>💡 שאלות מנחות לכתיבת ההסבר</h2>

        <ul>
            <li>מהי המשמעות של דגל SYN-ACK בתשובה מהשרת?</li>
            <li>מה קורה אם שולחים שתי בקשות TCP עם אותו פורט מקור?</li>
            <li>למה UDP פשוט יותר מ-TCP בהקשר הזה?</li>
            <li>מהו "4-tuple" בהקשר של חיבור TCP?</li>
            <li>איך ניתן לוודא שכל בקשה נחשבת כחיבור חדש?</li>
        </ul>

        <h2>🌟 אתגר </h2>

        <div class="task">
            <span class="task-number" style="background: #9f7aea;">בונוס</span>
            <h3 style="margin-top: 0;">הפכו את הקוד לכלי חקירה מקצועי</h3>
            
            <p>הוסיפו את היכולות הבאות:</p>
            <ul>
                <li>פרמטר שמאפשר לבחור כמה ציטוטים לאסוף (לא רק 10)</li>
                <li>שמירת הציטוטים לקובץ טקסט</li>
                <li>הדפסת זמן תגובה ממוצע של השרת</li>
                <li>זיהוי אוטומטי של הפרוטוקול ומעבר ל"כישלון חן" אם אחד לא עובד</li>
                <li>סרגל התקדמות יפה למשתמש</li>
            </ul>
        </div>

        <h2>📊 קריטריוני הערכה</h2>

        <table>
            <tr>
                <th>קריטריון</th>
                <th>נקודות</th>
            </tr>
            <tr>
                <td>קוד בדיקת TCP - נכון ועובד</td>
                <td>15</td>
            </tr>
            <tr>
                <td>קוד בדיקת UDP - נכון ועובד</td>
                <td>15</td>
            </tr>
            <tr>
                <td>קוד איסוף 10 ציטוטים - עובד כראוי</td>
                <td>30</td>
            </tr>
            <tr>
                <td>הסבר אלגוריתם - ברור ומפורט</td>
                <td>25</td>
            </tr>
            <tr>
                <td>תיעוד תוצאות והצגת הציטוטים</td>
                <td>10</td>
            </tr>
            <tr>
                <td>איכות קוד (קריאות, הערות, מבנה)</td>
                <td>5</td>
            </tr>
            <tr>
                <td><strong>סה"כ</strong></td>
                <td><strong>100</strong></td>
            </tr>
            <tr style="background: #f0fff4;">
                <td><strong>בונוס</strong></td>
                <td><strong>+20</strong></td>
            </tr>
        </table>

        <div class="warning-box">
            <strong>מועד הגשה:</strong> יש להגיש את המשימה עד סוף השבוע. הגישו קובץ Python אחד עם כל הקוד, וקובץ Word/PDF עם ההסבר.
        </div>

        <div class="info-box">
            <strong>טיפים לצלחה:</strong>
            <ul style="margin: 10px 0;">
                <li>התחילו מהבדיקות הפשוטות - זיהוי הפרוטוקול</li>
                <li>תעדו כל צעד בדרך</li>
                <li>אל תתביישו לשאול שאלות!</li>
                <li>עבדו בזוגות - זה מומלץ!</li>
                <li>נסו את הקוד צעד אחרי צעד</li>
            </ul>
        </div>

        <div class="footer">
            <p><strong>בהצלחה חוקרי סייבר! 🕵️‍♂️🔐</strong></p>
            <p style="font-size: 0.9em; color: #a0aec0;">
                דף עבודה זה הוכן עבור קורס סייבר ורשתות - Blich High School<br>
                בכל שאלה או בעיה, פנו למורה
            </p>
        </div>
    </div>
</body>
</html>