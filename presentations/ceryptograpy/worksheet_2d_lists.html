<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×“×£ ×¢×‘×•×“×” - ×¨×©×™××•×ª ×“×•-×××“×™×•×ª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: #f5f5f5;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 50px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            border-bottom: 3px solid #667eea;
            padding-bottom: 20px;
            margin-bottom: 40px;
        }
        
        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            color: #666;
            font-size: 1.2em;
        }
        
        .student-info {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .student-info div {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .student-info label {
            font-weight: bold;
            color: #667eea;
        }
        
        .student-info input {
            flex: 1;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 5px;
        }
        
        .exercise {
            margin-bottom: 50px;
            page-break-inside: avoid;
        }
        
        .exercise-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 8px 8px 0 0;
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .exercise-content {
            border: 2px solid #667eea;
            border-top: none;
            padding: 25px;
            border-radius: 0 0 8px 8px;
        }
        
        .exercise p {
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 1.05em;
        }
        
        .code-box {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            direction: ltr;
            text-align: left;
            overflow-x: auto;
        }
        
        .answer-space {
            border: 2px dashed #667eea;
            min-height: 150px;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            background: #fafafa;
            direction: ltr;
        }
        
        .answer-space.large {
            min-height: 250px;
        }
        
        .hint-box {
            background: #fff3cd;
            border-right: 5px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .hint-box::before {
            content: 'ğŸ’¡ ×¨××–: ';
            font-weight: bold;
            color: #856404;
        }
        
        .challenge-badge {
            display: inline-block;
            background: #dc3545;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-right: 10px;
        }
        
        .bonus-badge {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-right: 10px;
        }
        
        .points {
            float: left;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            border: 2px solid #667eea;
            padding: 12px;
            text-align: center;
        }
        
        th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        
        .matrix-visual {
            display: inline-block;
            border: 2px solid #667eea;
            padding: 10px;
            margin: 10px;
            border-radius: 5px;
            background: #f8f9fa;
        }
        
        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 2px solid #ddd;
            text-align: center;
            color: #666;
        }
        
        .save-button {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
            transition: all 0.3s;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .save-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.6);
        }
        
        .save-button:active {
            transform: translateY(0);
        }
        
        .load-button {
            position: fixed;
            bottom: 30px;
            left: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .load-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background: #28a745;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 2000;
            display: none;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                padding: 20px;
            }
            
            .exercise {
                page-break-inside: avoid;
            }
            
            .save-button, .load-button, .notification {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ ×“×£ ×¢×‘×•×“×” - ×¨×©×™××•×ª ×“×•-×××“×™×•×ª ğŸ</h1>
            <div class="subtitle">×›×™×ª×” ×™' | ×¤×™×™×ª×•×Ÿ - ××¢×¨×›×™× ×“×•-×××“×™×™×</div>
        </div>
        
        <div class="student-info">
            <div>
                <label>×©× ×”×ª×œ××™×“/×”:</label>
                <input type="text" placeholder="×”×›× ×¡ ×©× ××œ×">
            </div>
        </div>

        <!-- Exercise 1 -->
        <div class="exercise">
            <div class="exercise-header">
                <span class="points">10 × ×§×•×“×•×ª</span>
                ×ª×¨×’×™×œ 1: ×”×‘× ×ª ×”××‘× ×”
            </div>
            <div class="exercise-content">
                <p>× ×ª×•× ×” ×”××˜×¨×™×¦×” ×”×‘××”:</p>
                <pre class="code-box">
data = [
    [10, 20, 30, 40],
    [50, 60, 70, 80],
    [90, 100, 110, 120]
]
                </pre>
                
                <p><strong>×.</strong> ××” ×™×•×“×¤×¡ ×‘×¤×§×•×“×•×ª ×”×‘××•×ª?</p>
                <table>
                    <tr>
                        <th>×¤×§×•×“×”</th>
                        <th>×¤×œ×˜</th>
                    </tr>
                    <tr>
                        <td><code>print(data[0][2])</code></td>
                        <td><input type="text" style="width: 100px; padding: 5px;"></td>
                    </tr>
                    <tr>
                        <td><code>print(data[2][1])</code></td>
                        <td><input type="text" style="width: 100px; padding: 5px;"></td>
                    </tr>
                    <tr>
                        <td><code>print(len(data))</code></td>
                        <td><input type="text" style="width: 100px; padding: 5px;"></td>
                    </tr>
                    <tr>
                        <td><code>print(len(data[0]))</code></td>
                        <td><input type="text" style="width: 100px; padding: 5px;"></td>
                    </tr>
                </table>
                
                <p><strong>×‘.</strong> ×›×ª×•×‘ ××ª ×”×¤×§×•×“×” ×©×ª×“×¤×™×¡ ××ª ×”××¡×¤×¨ 110:</p>
                <div class="answer-space" style="min-height: 60px;"></div>
            </div>
        </div>

        <!-- Exercise 2 -->
        <div class="exercise">
            <div class="exercise-header">
                <span class="points">15 × ×§×•×“×•×ª</span>
                ×ª×¨×’×™×œ 2: ××©×—×§ ×˜×™×§-×˜×§-×˜×•
            </div>
            <div class="exercise-content">
                <p>× ×ª×•×Ÿ ×œ×•×— ××©×—×§ ×˜×™×§-×˜×§-×˜×• ×”××™×•×¦×’ ×›××˜×¨×™×¦×” 3x3. ×”××•×ª 'X' ××™×™×¦×’×ª ×©×—×§×Ÿ 1, 'O' ××™×™×¦×’×ª ×©×—×§×Ÿ 2, ×•-' ' (×¨×•×•×—) ××™×™×¦×’ ×ª× ×¨×™×§.</p>
                
                <pre class="code-box">
board = [
    ['X', 'O', 'X'],
    ['O', 'X', 'O'],
    ['X', ' ', 'O']
]
                </pre>
                
                <p><strong>×.</strong> ×›×ª×•×‘ ×§×•×“ ×©×‘×•×“×§ ×”×× ×™×© ×©×œ×•×©×” X-×™× ×‘×©×•×¨×” ×”×¨××©×•× ×” (×©×•×¨×” 0):</p>
                <div class="answer-space"></div>
                
                <p><strong>×‘.</strong> ×›×ª×•×‘ ×§×•×“ ×©×¡×•×¤×¨ ×›××” ×ª××™× ×¨×™×§×™× ×™×© ×‘×œ×•×—:</p>
                <div class="answer-space"></div>
                
                <div class="hint-box">
                    ×œ×¡×¤×™×¨×ª ×ª××™× ×¨×™×§×™×, ×”×©×ª××© ×‘×œ×•×œ××•×ª ××§×•× × ×•×ª ×•×‘×“×•×§ ×× ×”×ª× ×©×•×•×” ×œ-' '
                </div>
            </div>
        </div>

        <!-- Exercise 3 -->
        <div class="exercise">
            <div class="exercise-header">
                <span class="challenge-badge">×××ª×’×¨</span>
                <span class="points">20 × ×§×•×“×•×ª</span>
                ×ª×¨×’×™×œ 3: ××˜×¨×™×¦×” ×§×¡×•××”
            </div>
            <div class="exercise-content">
                <p><strong>××˜×¨×™×¦×” ×§×¡×•××”</strong> ×”×™× ××˜×¨×™×¦×” ×©×‘×” ×¡×›×•× ×›×œ ×©×•×¨×”, ×›×œ ×¢××•×“×” ×•×©× ×™ ×”××œ×›×¡×•× ×™× ×©×•×•×™× ×–×” ×œ×–×”.</p>
                
                <p>×œ×“×•×’××”, ×–×• ××˜×¨×™×¦×” ×§×¡×•××”:</p>
                <div class="matrix-visual">
                    <table>
                        <tr><td>2</td><td>7</td><td>6</td></tr>
                        <tr><td>9</td><td>5</td><td>1</td></tr>
                        <tr><td>4</td><td>3</td><td>8</td></tr>
                    </table>
                </div>
                <p style="text-align: center; color: #666;">×›×œ ×©×•×¨×”, ×¢××•×“×” ×•××œ×›×¡×•×Ÿ ××¡×ª×›× ×œ-15</p>
                
                <p><strong>×›×ª×•×‘ ×¤×•× ×§×¦×™×”</strong> <code>is_magic_square(matrix)</code> ×©××§×‘×œ×ª ××˜×¨×™×¦×” ×¨×™×‘×•×¢×™×ª (3x3) ×•××—×–×™×¨×” <code>True</code> ×× ×”×™× ×§×¡×•××” ×•-<code>False</code> ××—×¨×ª.</p>
                
                <div class="answer-space large"></div>
                
                <div class="hint-box">
                    ×—×©×•×‘ ×§×•×“× ××ª ×”×¡×›×•× ×©×œ ×”×©×•×¨×” ×”×¨××©×•× ×”. ××—×¨ ×›×š ×‘×“×•×§ ×©×›×œ ×”×©×•×¨×•×ª, ×”×¢××•×“×•×ª ×•×”××œ×›×¡×•× ×™× ×©×•×•×™× ×œ×¡×›×•× ×–×”.
                </div>
                
                <p><strong>×‘×“×•×§ ××ª ×”×¤×•× ×§×¦×™×” ×©×œ×š ×¢× ×”××˜×¨×™×¦×•×ª ×”×‘××•×ª:</strong></p>
                <pre class="code-box">
# ××˜×¨×™×¦×” ×§×¡×•××” - ×¦×¨×™×›×” ×œ×”×—×–×™×¨ True
magic = [
    [2, 7, 6],
    [9, 5, 1],
    [4, 3, 8]
]

# ××˜×¨×™×¦×” ×¨×’×™×œ×” - ×¦×¨×™×›×” ×œ×”×—×–×™×¨ False
regular = [
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9]
]
                </pre>
            </div>
        </div>

        <!-- Exercise 4 -->
        <div class="exercise">
            <div class="exercise-header">
                <span class="points">15 × ×§×•×“×•×ª</span>
                ×ª×¨×’×™×œ 4: ××¦×™××ª ×©×›× ×™×
            </div>
            <div class="exercise-content">
                <p>× ×ª×•× ×” ××˜×¨×™×¦×” ×”××™×™×¦×’×ª ××¤×ª ×’×‘×”×™×. ×›×ª×•×‘ ×¤×•× ×§×¦×™×” <code>find_neighbors(matrix, row, col)</code> ×©××§×‘×œ×ª ××˜×¨×™×¦×” ×•××™×§×•× (×©×•×¨×” ×•×¢××•×“×”), ×•××—×–×™×¨×” ×¨×©×™××” ×©×œ ×›×œ ×”×¢×¨×›×™× ×”×©×›× ×™× (××¢×œ×”, ××˜×”, ×™××™× ×”, ×©×××œ×” - ×œ×œ× ××œ×›×¡×•× ×™×).</p>
                
                <p><strong>×“×•×’××”:</strong></p>
                <pre class="code-box">
heights = [
    [100, 150, 200],
    [120, 180, 210],
    [110, 160, 190]
]

# find_neighbors(heights, 1, 1) ×¦×¨×™×š ×œ×”×—×–×™×¨:
# [150, 120, 210, 160]
# (××¢×œ×”, ×©×××œ×”, ×™××™× ×”, ××˜×”)
                </pre>
                
                <div class="answer-space large"></div>
                
                <div class="hint-box">
                    ×©×™× ×œ×‘ ×œ××§×¨×™ ×§×¦×”! ×× ×”×ª× × ××¦× ×‘×©×•×¨×” ×”×¨××©×•× ×” ××™×Ÿ ×œ×• ×©×›×Ÿ ××¢×œ×™×•, ×•×× ×‘×¢××•×“×” ×”×¨××©×•× ×” ××™×Ÿ ×©×›×Ÿ ××©×××œ.
                </div>
            </div>
        </div>

        <!-- Exercise 5 -->
        <div class="exercise">
            <div class="exercise-header">
                <span class="challenge-badge">×××ª×’×¨</span>
                <span class="points">25 × ×§×•×“×•×ª</span>
                ×ª×¨×’×™×œ 5: ×¡×™×‘×•×‘ ××˜×¨×™×¦×”
            </div>
            <div class="exercise-content">
                <p>×›×ª×•×‘ ×¤×•× ×§×¦×™×” <code>rotate_matrix_90(matrix)</code> ×©××§×‘×œ×ª ××˜×¨×™×¦×” ×¨×™×‘×•×¢×™×ª ×•××—×–×™×¨×” ××˜×¨×™×¦×” ×—×“×©×” ×©××¡×•×‘×‘×ª 90 ××¢×œ×•×ª ×‘×›×™×•×•×Ÿ ×”×©×¢×•×Ÿ.</p>
                
                <p><strong>×“×•×’××”:</strong></p>
                <div style="display: flex; justify-content: space-around; align-items: center; margin: 20px 0;">
                    <div class="matrix-visual">
                        <strong>××˜×¨×™×¦×” ××§×•×¨×™×ª:</strong>
                        <table>
                            <tr><td>1</td><td>2</td><td>3</td></tr>
                            <tr><td>4</td><td>5</td><td>6</td></tr>
                            <tr><td>7</td><td>8</td><td>9</td></tr>
                        </table>
                    </div>
                    <div style="font-size: 2em; color: #667eea;">âœ</div>
                    <div class="matrix-visual">
                        <strong>××—×¨×™ ×¡×™×‘×•×‘:</strong>
                        <table>
                            <tr><td>7</td><td>4</td><td>1</td></tr>
                            <tr><td>8</td><td>5</td><td>2</td></tr>
                            <tr><td>9</td><td>6</td><td>3</td></tr>
                        </table>
                    </div>
                </div>
                
                <div class="answer-space large"></div>
                
                <div class="hint-box">
                    ×©×™× ×œ×‘ ×œ×“×¤×•×¡: ×”×¢××•×“×” ×”×¨××©×•× ×” ×‘××˜×¨×™×¦×” ×”××§×•×¨×™×ª ×”×•×¤×›×ª ×œ×©×•×¨×” ×”×¨××©×•× ×” ×‘××˜×¨×™×¦×” ×”××¡×•×‘×‘×ª (××‘×œ ×”×¤×•×›×”). × ×¡×” ×œ×”×‘×™×Ÿ ××ª ×”×§×©×¨ ×‘×™×Ÿ ×”××™× ×“×§×¡×™× ×‘××˜×¨×™×¦×” ×”××§×•×¨×™×ª ×œ××˜×¨×™×¦×” ×”×—×“×©×”.
                </div>
            </div>
        </div>

        <!-- Exercise 6 -->
        <div class="exercise">
            <div class="exercise-header">
                <span class="bonus-badge">×‘×•× ×•×¡</span>
                <span class="points">15 × ×§×•×“×•×ª</span>
                ×ª×¨×’×™×œ 6: ××¦×™××ª ××¡×œ×•×œ ×‘××‘×•×š
            </div>
            <div class="exercise-content">
                <p>× ×ª×•×Ÿ ××‘×•×š ×”××™×•×¦×’ ×›××˜×¨×™×¦×”. 0 ××™×™×¦×’ ×“×¨×š ×¤×ª×•×—×”, 1 ××™×™×¦×’ ×§×™×¨. ×›×ª×•×‘ ×¤×•× ×§×¦×™×” <code>can_reach(maze, start_row, start_col, end_row, end_col)</code> ×©×‘×•×“×§×ª ×”×× × ×™×ª×Ÿ ×œ×”×’×™×¢ ×× ×§×•×“×ª ×”×ª×—×œ×” ×œ× ×§×•×“×ª ×¡×™×•× ×¢×œ ×™×“×™ ×ª× ×•×¢×” ×¨×§ ×œ××¢×œ×”, ××˜×”, ×™××™× ×” ××• ×©×××œ×” (×œ×œ× ××œ×›×¡×•× ×™×).</p>
                
                <pre class="code-box">
maze = [
    [0, 0, 1, 0],
    [1, 0, 0, 0],
    [0, 0, 1, 0],
    [0, 1, 0, 0]
]

# ×”×× × ×™×ª×Ÿ ×œ×”×’×™×¢ ×-(0,0) ×œ-(3,3)?
                </pre>
                
                <div class="answer-space large"></div>
                
                <div class="hint-box">
                    ×–×” ×ª×¨×’×™×œ ×××ª×’×¨ ×××•×“! ××¤×©×¨ ×œ×”×©×ª××© ×‘××œ×’×•×¨×™×ª× ×¨×§×•×¨×¡×™×‘×™ ××• ×‘×¢×–×¨×ª ×¨×©×™××ª ×ª××™× ×©×‘×™×§×¨×ª ×‘×”×. ××œ ×ª×ª×‘×™×™×© ×œ×”×ª×™×™×¢×¥ ××• ×œ×—×¤×© ××™×“×¢ ×¢×œ BFS ××• DFS.
                </div>
            </div>
        </div>

        <!-- Challenge Problem -->
        <div class="exercise" style="background: linear-gradient(135deg, #fff5e6 0%, #ffe6cc 100%); border: 3px solid #ff9500; padding: 0;">
            <div class="exercise-header" style="background: linear-gradient(135deg, #ff9500 0%, #ff6b00 100%);">
                <span class="points">â­ 20 × ×§×•×“×•×ª ×‘×•× ×•×¡ â­</span>
                ××ª×’×¨ ××™×•×—×“: ××©×—×§ 2048 ×‘×¡×™×¡×™
            </div>
            <div class="exercise-content">
                <p><strong>××©×—×§ 2048</strong> ×”×•× ××©×—×§ ×¤××–×œ ×¤×•×¤×•×œ×¨×™. ×›×ª×•×‘ ×¤×•× ×§×¦×™×” <code>move_left(board)</code> ×©××–×™×–×” ××ª ×›×œ ×”××¡×¤×¨×™× ×‘×œ×•×— ×©×××œ×”, ×•×××—×“×ª ××¡×¤×¨×™× ×–×”×™× ×”× ××¦××™× ×–×” ×œ×™×“ ×–×”.</p>
                
                <p><strong>×—×•×§×™×:</strong></p>
                <ul>
                    <li>×›×œ ×”××¡×¤×¨×™× × ×¢×™× ×©×××œ×” ×¢×“ ×©×”× ×¤×•×’×©×™× ×§×™×¨ ××• ××¡×¤×¨ ××—×¨</li>
                    <li>×›×©××¡×¤×¨×™× ×–×”×™× × ×¤×’×©×™×, ×”× ××ª××—×“×™× ×œ××¡×¤×¨ ×›×¤×•×œ (2+2=4, 4+4=8 ×•×›×•')</li>
                    <li>××™×—×•×“ ×§×•×¨×” ×¨×§ ×¤×¢× ××—×ª ×‘×›×œ ×ª× ×•×¢×”</li>
                    <li>0 ××™×™×¦×’ ×ª× ×¨×™×§</li>
                </ul>
                
                <p><strong>×“×•×’×××•×ª:</strong></p>
                <pre class="code-box">
# ×œ×¤× ×™:
[2, 0, 2, 4]
# ××—×¨×™:
[4, 4, 0, 0]

# ×œ×¤× ×™:
[2, 2, 4, 4]
# ××—×¨×™:
[4, 8, 0, 0]

# ×œ×¤× ×™:
[0, 2, 0, 2]
# ××—×¨×™:
[4, 0, 0, 0]
                </pre>
                
                <div class="answer-space large"></div>
                
                <p style="text-align: center; color: #ff6b00; font-weight: bold; margin-top: 20px;">
                    ×–×” ×”×ª×¨×’×™×œ ×”×›×™ ×××ª×’×¨ ×‘×“×£! ×× ×ª×¤×ª×•×¨ ××•×ª×•, ×–×” ××¨××” ×©×œ×™×˜×” ××¦×•×™× ×ª ×‘××˜×¨×™×¦×•×ª! ğŸ†
                </p>
            </div>
        </div>

        <div class="footer">
            <p><strong>×‘×”×¦×œ×—×”! ğŸ¯</strong></p>
            <p>×–×›×•×¨: ×—×©×™×‘×” ×œ×•×’×™×ª ×•× ×™×¡×•×™ ×•×˜×¢×™×™×” ×”× ×—×œ×§ ×—×©×•×‘ ××ª×”×œ×™×š ×”×œ××™×“×”.</p>
            <p style="margin-top: 20px; color: #999;">××¢×•×‘×“ ×¢×œ ×™×“×™: ×¦×‘×™ ×©×™×¨×Ÿ | ×‘×™×ª ×¡×¤×¨ ×ª×™×›×•×Ÿ ×‘×œ×™×š</p>
        </div>
    </div>
    
    <!-- Save/Load Buttons -->
    <button class="save-button" onclick="saveWork()">
        <span>ğŸ’¾</span>
        <span>×©××•×¨ ×¢×‘×•×“×”</span>
    </button>
    
    <button class="load-button" onclick="loadWork()">
        <span>ğŸ“‚</span>
        <span>×˜×¢×Ÿ ×¢×‘×•×“×”</span>
    </button>
    
    <!-- Hidden file input for loading -->
    <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="handleFileSelect(event)">
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>
    
    <script>
        // Save all student work to JSON
        function saveWork() {
            const studentData = {
                timestamp: new Date().toISOString(),
                studentInfo: {
                    name: document.querySelector('.student-info input[placeholder="×”×›× ×¡ ×©× ××œ×"]').value
                },
                answers: {}
            };
            
            // Get all answer spaces
            const answerSpaces = document.querySelectorAll('.answer-space');
            answerSpaces.forEach((space, index) => {
                studentData.answers[`answer_${index + 1}`] = space.textContent || space.innerText;
            });
            
            // Get all table inputs (for exercise 1)
            const tableInputs = document.querySelectorAll('table input');
            tableInputs.forEach((input, index) => {
                studentData.answers[`table_input_${index + 1}`] = input.value;
            });
            
            // Get all other inputs
            const allInputs = document.querySelectorAll('input[type="text"]:not(table input):not(.student-info input)');
            allInputs.forEach((input, index) => {
                if (input.value) {
                    studentData.answers[`other_input_${index + 1}`] = input.value;
                }
            });
            
            // Create filename with student name and date
            const studentName = studentData.studentInfo.name || 'student';
            const date = new Date().toISOString().split('T')[0];
            const filename = `worksheet_2d_lists_${sanitizeFilename(studentName)}_${date}.json`;
            
            // Convert to JSON and download
            const jsonStr = JSON.stringify(studentData, null, 2);
            const blob = new Blob([jsonStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('×”×¢×‘×•×“×” × ×©××¨×” ×‘×”×¦×œ×—×”! âœ…', 'success');
        }
        
        // Load student work from JSON
        function loadWork() {
            document.getElementById('fileInput').click();
        }
        
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Load student info
                    if (data.studentInfo) {
                        document.querySelector('.student-info input[placeholder="×”×›× ×¡ ×©× ××œ×"]').value = data.studentInfo.name || '';
                    }
                    
                    // Load answers
                    if (data.answers) {
                        const answerSpaces = document.querySelectorAll('.answer-space');
                        answerSpaces.forEach((space, index) => {
                            const answer = data.answers[`answer_${index + 1}`];
                            if (answer) {
                                space.textContent = answer;
                            }
                        });
                        
                        // Load table inputs
                        const tableInputs = document.querySelectorAll('table input');
                        tableInputs.forEach((input, index) => {
                            const value = data.answers[`table_input_${index + 1}`];
                            if (value) {
                                input.value = value;
                            }
                        });
                        
                        // Load other inputs
                        const allInputs = document.querySelectorAll('input[type="text"]:not(table input):not(.student-info input)');
                        allInputs.forEach((input, index) => {
                            const value = data.answers[`other_input_${index + 1}`];
                            if (value) {
                                input.value = value;
                            }
                        });
                    }
                    
                    showNotification('×”×¢×‘×•×“×” × ×˜×¢× ×” ×‘×”×¦×œ×—×”! âœ…', 'success');
                } catch (error) {
                    showNotification('×©×’×™××” ×‘×˜×¢×™× ×ª ×”×§×•×‘×¥! âŒ', 'error');
                    console.error('Error loading file:', error);
                }
            };
            reader.readAsText(file);
            
            // Reset file input
            event.target.value = '';
        }
        
        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = type === 'success' ? '#28a745' : '#dc3545';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // Sanitize filename
        function sanitizeFilename(name) {
            return name.replace(/[^a-z0-9×-×ª]/gi, '_').toLowerCase();
        }
        
        // Make answer spaces editable
        document.addEventListener('DOMContentLoaded', function() {
            const answerSpaces = document.querySelectorAll('.answer-space');
            answerSpaces.forEach(space => {
                space.contentEditable = true;
                space.style.cursor = 'text';
                
                // Placeholder text
                if (!space.textContent.trim()) {
                    space.innerHTML = '<span style="color: #999;">write your answer here...</span>';
                }
                
                space.addEventListener('focus', function() {
                    if (this.innerHTML.includes('color: #999')) {
                        this.innerHTML = '';
                    }
                });
                
                space.addEventListener('blur', function() {
                    if (!this.textContent.trim()) {
                        this.innerHTML = '<span style="color: #999;">write your answer here...</span>';
                    }
                });
            });
            
            // Auto-save to localStorage every 30 seconds
            setInterval(() => {
                const autoSaveData = {
                    timestamp: new Date().toISOString(),
                    studentInfo: {
                        name: document.querySelector('.student-info input[placeholder="×”×›× ×¡ ×©× ××œ×"]').value
                    },
                    answers: {}
                };
                
                const answerSpaces = document.querySelectorAll('.answer-space');
                answerSpaces.forEach((space, index) => {
                    autoSaveData.answers[`answer_${index + 1}`] = space.textContent || space.innerText;
                });
                
                localStorage.setItem('worksheet_2d_lists_autosave', JSON.stringify(autoSaveData));
            }, 30000);
            
            // Try to restore from localStorage on load
            const autoSaveData = localStorage.getItem('worksheet_2d_lists_autosave');
            if (autoSaveData) {
                try {
                    const data = JSON.parse(autoSaveData);
                    const timeDiff = new Date() - new Date(data.timestamp);
                    
                    // Only restore if less than 24 hours old
                    if (timeDiff < 24 * 60 * 60 * 1000) {
                        if (confirm('× ××¦××” ×¢×‘×•×“×” ×©××•×¨×” ××•×˜×•××˜×™×ª. ×”×× ×œ×˜×¢×•×Ÿ ××•×ª×”?')) {
                            if (data.studentInfo) {
                                document.querySelector('.student-info input[placeholder="×”×›× ×¡ ×©× ××œ×"]').value = data.studentInfo.name || '';
                            }
                            
                            const answerSpaces = document.querySelectorAll('.answer-space');
                            answerSpaces.forEach((space, index) => {
                                const answer = data.answers[`answer_${index + 1}`];
                                if (answer && !answer.includes('color: #999')) {
                                    space.textContent = answer;
                                }
                            });
                            
                            showNotification('×¢×‘×•×“×” ×©××•×¨×” ××•×˜×•××˜×™×ª × ×˜×¢× ×”! ğŸ”„', 'success');
                        }
                    }
                } catch (error) {
                    console.error('Error loading autosave:', error);
                }
            }
        });
    </script>
</body>
</html>