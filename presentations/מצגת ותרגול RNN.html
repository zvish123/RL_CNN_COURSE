<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>הגדרת RNN - מצגת ותרגיל מקיף</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
            line-height: 1.6;
        }
        pre {
            direction: ltr;
            font-size: 1.2em;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .navigation {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 15px;
            z-index: 1000;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .nav-button {
            display: block;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 8px 15px;
            margin: 5px 0;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
        }
        
        .nav-button:hover {
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .slide {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 40px;
            margin: 40px 0;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            min-height: 80vh;
        }
        
        .slide:hover {
            transform: translateY(-8px);
            box-shadow: 0 35px 70px rgba(0, 0, 0, 0.2);
        }
        
        .slide-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }
        
        .slide-number {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .slide-title {
            color: #2c3e50;
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            flex-grow: 1;
        }
        
        .main-objective {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin: 25px 0;
            text-align: center;
            font-size: 1.4em;
            font-weight: bold;
            box-shadow: 0 15px 35px rgba(116, 185, 255, 0.3);
        }
        
        .concept-card {
            background: linear-gradient(135deg, #a8e6cf 0%, #dcedc1 100%);
            padding: 25px;
            border-radius: 18px;
            margin: 20px 0;
            border-right: 6px solid #00b894;
            position: relative;
            overflow: hidden;
        }
        
        .concept-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }
        
        .interactive-section {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin: 25px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .interactive-section::before {
            content: '🎯';
            font-size: 3em;
            position: absolute;
            top: -10px;
            left: -10px;
            opacity: 0.2;
        }
        
        .exercise-button {
            background: white;
            color: #e84393;
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            margin: 15px;
            transition: all 0.3s ease;
            font-size: 1.1em;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .exercise-button:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.25);
        }
        
        .code-workspace {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 30px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            margin: 25px 0;
            overflow-x: auto;
            direction: ltr;
            text-align: left;
            position: relative;
            border: 3px solid #34495e;
        }
        
        .code-header {
            background: #34495e;
            color: #ecf0f1;
            padding: 12px 25px;
            margin: -30px -30px 25px -30px;
            border-radius: 15px 15px 0 0;
            font-weight: bold;
            direction: rtl;
            text-align: center;
            border-bottom: 2px solid #667eea;
        }
        
        .live-demo {
            background: linear-gradient(135deg, #00b894 0%, #55efc4 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            position: relative;
        }
        
        .demo-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .control-input {
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
            font-weight: bold;
            text-align: center;
        }
        
        .architecture-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .arch-card {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            color: white;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .arch-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .arch-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(20px, -20px);
        }
        
        .one-to-one { background: linear-gradient(135deg, #74b9ff, #0984e3); }
        .one-to-many { background: linear-gradient(135deg, #fd79a8, #e84393); }
        .many-to-one { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .many-to-many { background: linear-gradient(135deg, #00b894, #55efc4); }
        
        .formula-display {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: #ecf0f1;
            padding: 25px;
            border-radius: 15px;
            font-family: 'Times New Roman', serif;
            font-size: 1.5em;
            text-align: center;
            margin: 25px 0;
            direction: ltr;
            border: 3px solid #667eea;
            position: relative;
        }
        
        .formula-display::before {
            content: '∑';
            position: absolute;
            top: -15px;
            right: 20px;
            font-size: 2em;
            color: #667eea;
        }
        
        .parameter-explorer {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .param-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .param-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .param-item:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        
        .exercise-workspace {
            background: linear-gradient(135deg, #e17055, #fab1a0);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin: 25px 0;
            position: relative;
        }
        
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            position: relative;
        }
        
        .step {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 20px;
            position: relative;
            flex: 1;
            text-align: center;
            margin: 0 5px;
            transition: all 0.3s ease;
        }
        
        .step.active {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
        }
        
        .step.completed {
            background: #00b894;
        }
        
        .quiz-section {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .quiz-option {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px 20px;
            margin: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .quiz-option:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(-10px);
        }
        
        .quiz-option.correct {
            border-color: #00b894;
            background: rgba(0, 184, 148, 0.3);
        }
        
        .quiz-option.incorrect {
            border-color: #e74c3c;
            background: rgba(231, 76, 60, 0.3);
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00b894, #55efc4);
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 0%;
        }
        
        .network-visualization {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .neuron-node {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            animation: neuronPulse 3s infinite;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .neuron-node:hover {
            transform: scale(1.2);
            animation-duration: 1s;
        }
        
        @keyframes neuronPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        .connection-arrow {
            font-size: 2.5em;
            color: #667eea;
            font-weight: bold;
            animation: arrowFlow 2s infinite;
        }
        
        @keyframes arrowFlow {
            0%, 100% { transform: scale(1) translateX(0); }
            50% { transform: scale(1.1) translateX(5px); }
        }
        
        .tooltip {
            position: relative;
            cursor: help;
        }
        
        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            right: 50%;
            transform: translateX(50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.9em;
            white-space: nowrap;
            z-index: 1000;
        }
        
        .success-indicator {
            background: linear-gradient(135deg, #00b894, #55efc4);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
            transform: scale(0);
            transition: transform 0.5s ease;
        }
        
        .success-indicator.show {
            transform: scale(1);
        }
        
        @media (max-width: 768px) {
            .slide {
                padding: 20px;
                margin: 20px 0;
            }
            
            .slide-title {
                font-size: 1.8em;
            }
            
            .navigation {
                position: relative;
                margin-bottom: 20px;
            }
            
            .architecture-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        
        <!-- Navigation -->
        <div class="navigation">
            <a href="#slide1" class="nav-button">🎯 מטרה</a>
            <a href="#slide2" class="nav-button">🧠 מושגים</a>
            <a href="#slide3" class="nav-button">⚙️ הגדרה</a>
            <a href="#slide4" class="nav-button">💻 קוד</a>
            <a href="#slide5" class="nav-button">🏗️ ארכיטקטורות</a>
            <a href="#slide6" class="nav-button">🎮 תרגיל</a>
            <a href="#slide7" class="nav-button">📊 הערכה</a>
        </div>

        <!-- Slide 1: Introduction and Objective -->
        <div id="slide1" class="slide">
            <div class="slide-header">
                <div class="slide-number">1</div>
                <h1 class="slide-title">הגדרת רשת נוירונים סדרתית חוזרת</h1>
            </div>
            
            <div class="main-objective">
                🎯 <strong>מטרת השיעור:</strong><br>
                בסיום השיעור תוכלו להגדיר, לממש ולהפעיל RNN בצורה עצמאית ומדויקת
            </div>
            
            <div class="concept-card">
                <h3>🤔 למה אנחנו כאן?</h3>
                <p>רשתות נוירונים רגילות לא יכולות לטפל ברצפי נתונים. איך מחשב יכול לזכור מה קרה לפני רגע? איך הוא יכול להבין שהמילה "בנק" במשפט "הלכתי לבנק" שונה מ"בנק" במשפט "ישבתי על בנק בפארק"?</p>
                <p><strong>התשובה:</strong> RNN - רשת עם זיכרון!</p>
            </div>
            
            <div class="interactive-section">
                <h3>🎮 בואו נתחיל עם משחק!</h3>
                <p>נסו להשלים את המשפט: "בחוץ יורד גשם, אז אני אקח..."</p>
                <div class="demo-controls">
                    <button class="exercise-button" onclick="checkAnswer('מטריה')">מטריה</button>
                    <button class="exercise-button" onclick="checkAnswer('משקפי שמש')">משקפי שמש</button>
                    <button class="exercise-button" onclick="checkAnswer('בגד ים')">בגד ים</button>
                </div>
                <div id="answer-feedback" class="success-indicator"></div>
            </div>
            
            <div class="network-visualization">
                <div class="neuron-node tooltip" data-tooltip="מידע מהעבר">העבר</div>
                <div class="connection-arrow">←</div>
                <div class="neuron-node tooltip" data-tooltip="RNN Cell">🧠</div>
                <div class="connection-arrow">←</div>
                <div class="neuron-node tooltip" data-tooltip="החלטה נוכחית">ההווה</div>
            </div>
        </div>

        <!-- Slide 2: Core Concepts -->
        <div id="slide2" class="slide">
            <div class="slide-header">
                <div class="slide-number">2</div>
                <h1 class="slide-title">מושגי יסוד ב-RNN</h1>
            </div>
            
            <div class="concept-card">
                <h3>🧩 המרכיבים של RNN</h3>
                <div class="network-visualization">
                    <div style="text-align: center;">
                        <div class="neuron-node" style="background: linear-gradient(45deg, #3498db, #2980b9);">x(t)</div>
                        <div style="margin: 10px 0; font-weight: bold;">קלט בזמן t</div>
                    </div>
                    <div class="connection-arrow">←</div>
                    <div style="text-align: center;">
                        <div class="neuron-node" style="background: linear-gradient(45deg, #e74c3c, #c0392b);">h(t)</div>
                        <div style="margin: 10px 0; font-weight: bold;">מצב נסתר (זיכרון)</div>
                    </div>
                    <div class="connection-arrow">←</div>
                    <div style="text-align: center;">
                        <div class="neuron-node" style="background: linear-gradient(45deg, #27ae60, #229954);">y(t)</div>
                        <div style="margin: 10px 0; font-weight: bold;">פלט בזמן t</div>
                    </div>
                </div>
            </div>
            
            <div class="formula-display">
                h(t) = tanh(W_h × h(t-1) + W_x × x(t) + b_h)<br>
                y(t) = W_y × h(t) + b_y
            </div>
            
            <div class="parameter-explorer">
                <h3>🔍 מחקר פרמטרים אינטראקטיבי</h3>
                <div class="param-grid">
                    <div class="param-item tooltip" data-tooltip="גודל וקטור הקלט" onclick="explainParameter('input_size')">
                        <strong>input_size</strong><br>
                        <span id="input_size_value">10</span>
                    </div>
                    <div class="param-item tooltip" data-tooltip="גודל וקטור הזיכרון" onclick="explainParameter('hidden_size')">
                        <strong>hidden_size</strong><br>
                        <span id="hidden_size_value">20</span>
                    </div>
                    <div class="param-item tooltip" data-tooltip="מספר שכבות RNN" onclick="explainParameter('num_layers')">
                        <strong>num_layers</strong><br>
                        <span id="num_layers_value">1</span>
                    </div>
                    <div class="param-item tooltip" data-tooltip="סדר ממדי הנתונים" onclick="explainParameter('batch_first')">
                        <strong>batch_first</strong><br>
                        <span id="batch_first_value">True</span>
                    </div>
                </div>
                <div class="demo-controls">
                    <input type="range" class="control-input" min="1" max="100" value="10" onchange="updateParameter('input_size', this.value)">
                    <input type="range" class="control-input" min="5" max="200" value="20" onchange="updateParameter('hidden_size', this.value)">
                    <input type="range" class="control-input" min="1" max="5" value="1" onchange="updateParameter('num_layers', this.value)">
                    <select class="control-input" onchange="updateParameter('batch_first', this.value)">
                        <option value="True">True</option>
                        <option value="False">False</option>
                    </select>
                </div>
            </div>
            
            <div class="quiz-section">
                <h3>🎯 בחן את ההבנה</h3>
                <p><strong>שאלה:</strong> מה קורה אם נגדיל את hidden_size?</p>
                <div class="quiz-option" onclick="answerQuiz(this, false)">א. הרשת תהיה מהירה יותר</div>
                <div class="quiz-option" onclick="answerQuiz(this, true)">ב. הרשת תוכל לזכור יותר מידע</div>
                <div class="quiz-option" onclick="answerQuiz(this, false)">ג. הרשת תהיה פחות מדויקת</div>
                <div class="quiz-option" onclick="answerQuiz(this, false)">ד. אין השפעה על הביצועים</div>
            </div>
        </div>

        <!-- Slide 3: Step-by-Step Definition -->
        <div id="slide3" class="slide">
            <div class="slide-header">
                <div class="slide-number">3</div>
                <h1 class="slide-title">מדריך הגדרה צעד אחר צעד</h1>
            </div>
            
            <div class="exercise-workspace">
                <h3>🛠️ 4 שלבים להגדרת RNN מושלמת</h3>
                
                <div class="step-indicator">
                    <div class="step active" id="step1">1. הגדרת בעיה</div>
                    <div class="step" id="step2">2. בחירת פרמטרים</div>
                    <div class="step" id="step3">3. יצירת מודל</div>
                    <div class="step" id="step4">4. בדיקת תקינות</div>
                </div>
                
                <div id="step-content">
                    <div class="concept-card">
                        <h4>🎯 שלב 1: הגדרת הבעיה</h4>
                        <p><strong>שאלות מנחות:</strong></p>
                        <ul>
                            <li>איזה סוג נתונים אני מעבד? (טקסט, מספרים, אותות)</li>
                            <li>מה אני רוצה לחזות? (מילה הבאה, סיווג, ערך מספרי)</li>
                            <li>איזה ארכיטקטורה מתאימה? (One-to-Many, Many-to-One, וכו')</li>
                        </ul>
                        <button class="exercise-button" onclick="nextStep()">שלב הבא →</button>
                    </div>
                </div>
            </div>
            
            <div class="live-demo">
                <h3>🎮 סימולטור הגדרת RNN</h3>
                <p>בחרו סוג משימה ונראה איך להגדיר RNN מתאים:</p>
                <div class="demo-controls">
                    <button class="exercise-button" onclick="simulateTask('sentiment')">ניתוח רגשות</button>
                    <button class="exercise-button" onclick="simulateTask('translation')">תרגום</button>
                    <button class="exercise-button" onclick="simulateTask('generation')">יצירת טקסט</button>
                    <button class="exercise-button" onclick="simulateTask('classification')">סיווג רצפים</button>
                </div>
                <div id="simulation-result" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Slide 4: Code Implementation -->
        <div id="slide4" class="slide">
            <div class="slide-header">
                <div class="slide-number">4</div>
                <h1 class="slide-title">יישום מעשי בקוד</h1>
            </div>
            
            <div class="code-workspace">
                <div class="code-header">🐍 מודל RNN בסיסי - PyTorch</div>
                <pre>
import torch
import torch.nn as nn

class CustomRNN(nn.Module):
    def __init__(self, input_size, hidden_size, output_size, num_layers=1):
        super(CustomRNN, self).__init__()
        
        # שמירת פרמטרים
        self.input_size = input_size
        self.hidden_size = hidden_size
        self.num_layers = num_layers
        
        # שכבת RNN
        self.rnn = nn.RNN(
            input_size=input_size,
            hidden_size=hidden_size,
            num_layers=num_layers,
            batch_first=True,  # (batch, seq, features)
            dropout=0.2 if num_layers > 1 else 0
        )
        
        # שכבת פלט
        self.fc = nn.Linear(hidden_size, output_size)
        self.dropout = nn.Dropout(0.2)
        
    def forward(self, x, hidden=None):
        # אתחול מצב נסתר אם לא סופק
        if hidden is None:
            hidden = self.init_hidden(x.size(0), x.device)
        
        # העברה דרך RNN
        rnn_out, hidden = self.rnn(x, hidden)
        
        # Dropout למניעת overfitting
        rnn_out = self.dropout(rnn_out)
        
        # העברה דרך שכבת פלט
        output = self.fc(rnn_out)
        
        return output, hidden
    
    def init_hidden(self, batch_size, device):
        """אתחול מצב נסתר"""
        return torch.zeros(self.num_layers, batch_size, 
                          self.hidden_size, device=device)

# דוגמה לשימוש
model = CustomRNN(input_size=10, hidden_size=50, output_size=5)
print(f"מודל נוצר: {model}")
                </pre>
            </div>
            
            <div class="interactive-section">
                <h3>🔧 בנאי RNN אינטראקטיבי</h3>
                <p>שנו את הפרמטרים וראו איך זה משפיע על המודל:</p>
                <div class="demo-controls">
                    <input type="number" class="control-input" placeholder="input_size" id="build_input_size" value="10">
                    <input type="number" class="control-input" placeholder="hidden_size" id="build_hidden_size" value="50">
                    <input type="number" class="control-input" placeholder="output_size" id="build_output_size" value="5">
                    <input type="number" class="control-input" placeholder="num_layers" id="build_num_layers" value="2">
                </div>
                <button class="exercise-button" onclick="buildModel()">בנה מודל!</button>
                <div id="model-info" style="margin-top: 20px;"></div>
            </div>
            
            <div class="code-workspace">
                <div class="code-header">🏗️ דוגמה מתקדמת - LSTM לעיבוד טקסט</div>
                <pre>
class TextLSTM(nn.Module):
    def __init__(self, vocab_size, embedding_dim, hidden_size, num_classes):
        super(TextLSTM, self).__init__()
        
        # שכבת הטמעה למילים
        self.embedding = nn.Embedding(vocab_size, embedding_dim)
        
        # שכבת LSTM (עדיפה על RNN פשוט)
        self.lstm = nn.LSTM(
            input_size=embedding_dim,
            hidden_size=hidden_size,
            num_layers=2,
            dropout=0.3,
            bidirectional=True,  # דו-כיווני לביצועים טובים יותר
            batch_first=True
        )
        
        # שכבת סיווג (שים לב: hidden_size * 2 בגלל bidirectional)
        self.classifier = nn.Linear(hidden_size * 2, num_classes)
        self.dropout = nn.Dropout(0.5)
        
    def forward(self, x):
        # הטמעת מילים: (batch, seq) → (batch, seq, embedding_dim)
        embedded = self.embedding(x)
        
        # LSTM: (batch, seq, embedding_dim) → (batch, seq, hidden_size * 2)
        lstm_out, (hidden, cell) = self.lstm(embedded)
        
        # שימוש בממוצע של כל הפלטים (Global Average Pooling)
        pooled = torch.mean(lstm_out, dim=1)  # (batch, hidden_size * 2)
        
        # Dropout וסיווג
        pooled = self.dropout(pooled)
        output = self.classifier(pooled)
        
        return output

# יצירת מודל לניתוח רגשות
sentiment_model = TextLSTM(
    vocab_size=10000,    # גודל מילון
    embedding_dim=100,   # ממד הטמעת מילים
    hidden_size=128,     # גודל מצב נסתר
    num_classes=3        # חיובי/שלילי/נייטרלי
)

print(f"מספר פרמטרים: {sum(p.numel() for p in sentiment_model.parameters()):,}")
                    </pre>
            </div>
        </div>

        <!-- Slide 5: Architecture Types -->
        <div id="slide5" class="slide">
            <div class="slide-header">
                <div class="slide-number">5</div>
                <h1 class="slide-title">ארכיטקטורות RNN</h1>
            </div>
            
            <div class="architecture-grid">
                <div class="arch-card one-to-one" onclick="explainArchitecture('one-to-one')">
                    <h4>🔸 One-to-One</h4>
                    <p>קלט קבוע → פלט קבוע</p>
                    <small>דוגמה: סיווג תמונה</small>
                    <div class="network-visualization" style="justify-content: center; margin: 15px 0;">
                        <div class="neuron-node" style="width: 40px; height: 40px; font-size: 0.8em;">x</div>
                        <div class="connection-arrow" style="font-size: 1.5em;">→</div>
                        <div class="neuron-node" style="width: 40px; height: 40px; font-size: 0.8em;">y</div>
                    </div>
                </div>
                
                <div class="arch-card one-to-many" onclick="explainArchitecture('one-to-many')">
                    <h4>🔹 One-to-Many</h4>
                    <p>קלט אחד → רצף פלטים</p>
                    <small>דוגמה: תיאור תמונה</small>
                    <div class="network-visualization" style="justify-content: center; margin: 15px 0;">
                        <div class="neuron-node" style="width: 40px; height: 40px; font-size: 0.8em;">x</div>
                        <div class="connection-arrow" style="font-size: 1.5em;">→</div>
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <div class="neuron-node" style="width: 30px; height: 30px; font-size: 0.7em;">y₁</div>
                            <div class="neuron-node" style="width: 30px; height: 30px; font-size: 0.7em;">y₂</div>
                            <div class="neuron-node" style="width: 30px; height: 30px; font-size: 0.7em;">y₃</div>
                        </div>
                    </div>
                </div>
                
                <div class="arch-card many-to-one" onclick="explainArchitecture('many-to-one')">
                    <h4>🔺 Many-to-One</h4>
                    <p>רצף קלטים → פלט אחד</p>
                    <small>דוגמה: ניתוח רגשות</small>
                    <div class="network-visualization" style="justify-content: center; margin: 15px 0;">
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <div class="neuron-node" style="width: 30px; height: 30px; font-size: 0.7em;">x₁</div>
                            <div class="neuron-node" style="width: 30px; height: 30px; font-size: 0.7em;">x₂</div>
                            <div class="neuron-node" style="width: 30px; height: 30px; font-size: 0.7em;">x₃</div>
                        </div>
                        <div class="connection-arrow" style="font-size: 1.5em;">→</div>
                        <div class="neuron-node" style="width: 40px; height: 40px; font-size: 0.8em;">y</div>
                    </div>
                </div>
                
                <div class="arch-card many-to-many" onclick="explainArchitecture('many-to-many')">
                    <h4>🔻 Many-to-Many</h4>
                    <p>רצף קלטים → רצף פלטים</p>
                    <small>דוגמה: תרגום שפות</small>
                    <div class="network-visualization" style="justify-content: center; margin: 15px 0;">
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <div class="neuron-node" style="width: 30px; height: 30px; font-size: 0.7em;">x₁</div>
                            <div class="neuron-node" style="width: 30px; height: 30px; font-size: 0.7em;">x₂</div>
                        </div>
                        <div class="connection-arrow" style="font-size: 1.5em;">→</div>
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <div class="neuron-node" style="width: 30px; height: 30px; font-size: 0.7em;">y₁</div>
                            <div class="neuron-node" style="width: 30px; height: 30px; font-size: 0.7em;">y₂</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="architecture-explanation" class="concept-card" style="display: none;">
                <h3 id="arch-title"></h3>
                <p id="arch-description"></p>
                <div id="arch-code"></div>
            </div>
            
            <div class="interactive-section">
                <h3>🎯 בחירת ארכיטקטורה לפי משימה</h3>
                <p>איזו ארכיטקטורה תבחרו עבור:</p>
                <div class="demo-controls">
                    <button class="exercise-button" onclick="matchArchitecture('email-spam')">זיהוי דואר זבל</button>
                    <button class="exercise-button" onclick="matchArchitecture('stock-prediction')">חיזוי מחירי מניות</button>
                    <button class="exercise-button" onclick="matchArchitecture('chatbot')">בוט שיחה</button>
                    <button class="exercise-button" onclick="matchArchitecture('music-generation')">יצירת מוסיקה</button>
                </div>
                <div id="architecture-match-result"></div>
            </div>
        </div>

        <!-- Slide 6: Hands-on Exercise -->
        <div id="slide6" class="slide">
            <div class="slide-header">
                <div class="slide-number">6</div>
                <h1 class="slide-title">תרגיל מעשי מונחה</h1>
            </div>
            
            <div class="exercise-workspace">
                <h3>🏆 משימה: בניית RNN לחיזוי רצף פיבונאצ'י</h3>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="exercise-progress"></div>
                </div>
                
                <div class="step-indicator">
                    <div class="step active" id="ex-step1">נתונים</div>
                    <div class="step" id="ex-step2">מודל</div>
                    <div class="step" id="ex-step3">אימון</div>
                    <div class="step" id="ex-step4">בדיקה</div>
                </div>
                
                <div id="exercise-content">
                    <div class="concept-card">
                        <h4>📊 שלב 1: יצירת נתוני פיבונאצ'י</h4>
                        <div class="code-workspace">
                            <div class="code-header">קוד ליצירת נתונים</div>
                            <pre>
def create_fibonacci_data(length=100, seq_len=5):
    """יוצר נתוני פיבונאצ'י לאימון RNN"""
    # יצירת רצף פיבונאצ'י
    fib = [0, 1]
    for i in range(2, length):
        fib.append(fib[i-1] + fib[i-2])
    
    # חלוקה לרצפים קצרים
    X, y = [], []
    for i in range(len(fib) - seq_len):
        X.append(fib[i:i+seq_len])      # 5 מספרים
        y.append(fib[i+seq_len])        # המספר הבא
    
    return torch.tensor(X, dtype=torch.float32), torch.tensor(y, dtype=torch.float32)

# יצירת הנתונים
X_train, y_train = create_fibonacci_data()
print(f"צורת נתונים: X={X_train.shape}, y={y_train.shape}")

# דוגמה
print(f"קלט: {X_train[0]} → יעד: {y_train[0]}")
                            </pre>
                        </div>
                        <button class="exercise-button" onclick="runDataCreation()">הרץ יצירת נתונים</button>
                        <div id="data-result"></div>
                    </div>
                </div>
            </div>
            
            <div class="live-demo">
                <h3>🔬 סימולטור אימון RNN</h3>
                <p>עקבו אחר התקדמות האימון בזמן אמת:</p>
                <div class="demo-controls">
                    <button class="exercise-button" onclick="startTraining()">התחל אימון</button>
                    <button class="exercise-button" onclick="stopTraining()">עצור אימון</button>
                    <button class="exercise-button" onclick="resetTraining()">איפוס</button>
                </div>
                <div id="training-visualization">
                    <canvas id="loss-chart" width="400" height="200" style="background: white; border-radius: 10px; margin: 20px 0;"></canvas>
                </div>
                <div id="training-status"></div>
            </div>
        </div>

        <!-- Slide 7: Assessment and Next Steps -->
        <div id="slide7" class="slide">
            <div class="slide-header">
                <div class="slide-number">7</div>
                <h1 class="slide-title">הערכה וסיכום</h1>
            </div>
            
            <div class="quiz-section">
                <h3>🎯 מבחן הערכה מהיר</h3>
                <div id="final-quiz">
                    <div class="quiz-question" data-question="1">
                        <p><strong>שאלה 1:</strong> איזה פרמטר קובע את גודל הזיכרון ב-RNN?</p>
                        <div class="quiz-option" onclick="answerFinalQuiz(this, false, 1)">input_size</div>
                        <div class="quiz-option" onclick="answerFinalQuiz(this, true, 1)">hidden_size</div>
                        <div class="quiz-option" onclick="answerFinalQuiz(this, false, 1)">output_size</div>
                        <div class="quiz-option" onclick="answerFinalQuiz(this, false, 1)">batch_size</div>
                    </div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="quiz-progress"></div>
                </div>
                
                <div id="quiz-score" class="success-indicator"></div>
            </div>
            
            <div class="main-objective">
                ✅ <strong>מטרת השיעור הושגה!</strong><br>
                אתם יודעים עכשיו להגדיר RNN מאפס ועד לבניית מודל עובד
            </div>
            
            <div class="architecture-grid">
                <div class="arch-card" style="background: linear-gradient(135deg, #00b894, #55efc4);">
                    <h4>✨ מה למדתם</h4>
                    <ul style="text-align: right; list-style: none;">
                        <li>🧠 מבנה ותפקוד RNN</li>
                        <li>⚙️ הגדרת פרמטרים</li>
                        <li>💻 יישום בPyTorch</li>
                        <li>🏗️ ארכיטקטורות שונות</li>
                    </ul>
                </div>
                
                <div class="arch-card" style="background: linear-gradient(135deg, #6c5ce7, #a29bfe);">
                    <h4>🚀 השלבים הבאים</h4>
                    <ul style="text-align: right; list-style: none;">
                        <li>📚 למדו על LSTM ו-GRU</li>
                        <li>🎯 יישמו על נתונים אמיתיים</li>
                        <li>🔍 חקרו Attention Mechanism</li>
                        <li>🌟 בנו פרויקט מעשי</li>
                    </ul>
                </div>
                
                <div class="arch-card" style="background: linear-gradient(135deg, #fd79a8, #fdcb6e);">
                    <h4>💡 טיפים לפרקטיקה</h4>
                    <ul style="text-align: right; list-style: none;">
                        <li>🎲 התחילו עם נתונים פשוטים</li>
                        <li>📊 עקבו אחר loss בזמן אמת</li>
                        <li>🔧 נסו פרמטרים שונים</li>
                        <li>⚠️ זכרו batch_first=True</li>
                    </ul>
                </div>
                
                <div class="arch-card" style="background: linear-gradient(135deg, #e17055, #fab1a0);">
                    <h4>📋 משימת בית</h4>
                    <ul style="text-align: right; list-style: none;">
                        <li>🏠 בנו RNN לחיזוי מחירי בית</li>
                        <li>📱 יישמו על נתוני טוויטר</li>
                        <li>🎵 נסו ליצור מוסיקה פשוטה</li>
                        <li>📝 כתבו דוח על התוצאות</li>
                    </ul>
                </div>
            </div>
            
            <div class="interactive-section">
                <h3>🎉 סיימתם בהצלחה!</h3>
                <p>איך אתם מרגישים לגבי RNN עכשיו?</p>
                <div class="demo-controls">
                    <button class="exercise-button" onclick="giveFeedback('confident')">בטוח ומוכן להמשיך! 💪</button>
                    <button class="exercise-button" onclick="giveFeedback('okay')">בסדר, אבל צריך תרגול 🤔</button>
                    <button class="exercise-button" onclick="giveFeedback('confused')">עדיין מבולבל 😕</button>
                </div>
                <div id="feedback-response"></div>
            </div>
        </div>
    </div>

    <script>
        // Global variables for exercise tracking
        let currentStep = 1;
        let exerciseProgress = 0;
        let quizScore = 0;
        let totalQuestions = 3;
        let trainingInterval;
        let epochCount = 0;
        
        // Answer checking functions
        function checkAnswer(answer) {
            const feedback = document.getElementById('answer-feedback');
            if (answer === 'מטריה') {
                feedback.innerHTML = '🎉 מצוין! השתמשתם בהקשר "גשם" כדי לבחור תשובה הגיונית!';
                feedback.classList.add('show');
                setTimeout(() => feedback.classList.remove('show'), 3000);
            } else {
                feedback.innerHTML = '🤔 חשבו שוב... מה לוקחים כשיורד גשם?';
                feedback.classList.add('show');
                setTimeout(() => feedback.classList.remove('show'), 3000);
            }
        }
        
        // Parameter explanation
        function explainParameter(param) {
            const explanations = {
                'input_size': 'מגדיר כמה features יש בכל צעד זמן. למשל: במילים זה ממד ה-embedding, במספרים זה מספר המשתנים.',
                'hidden_size': 'גודל וקטור הזיכרון הפנימי של הRNN. גדול יותר = יותר זיכרון אבל איטי יותר.',
                'num_layers': 'מספר שכבות RNN מוערמות. יותר שכבות = מורכבות גבוהה יותר.',
                'batch_first': 'קובע את סדר הממדים: True = (batch, sequence, features), False = (sequence, batch, features)'
            };
            alert(`💡 ${param}:\n\n${explanations[param]}`);
        }
        
        // Parameter updating
        function updateParameter(param, value) {
            document.getElementById(param + '_value').textContent = value;
            
            // Calculate model complexity
            const input_size = parseInt(document.getElementById('input_size_value').textContent);
            const hidden_size = parseInt(document.getElementById('hidden_size_value').textContent);
            const num_layers = parseInt(document.getElementById('num_layers_value').textContent);
            
            const complexity = input_size * hidden_size * num_layers;
            console.log(`מורכבות מודל: ${complexity.toLocaleString()} פרמטרים`);
        }
        
        // Quiz answering
        function answerQuiz(element, isCorrect) {
            // Reset all options
            const options = element.parentNode.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            
            if (isCorrect) {
                element.classList.add('correct');
                setTimeout(() => {
                    alert('🎉 נכון! hidden_size קובע כמה מידע הRNN יכול לזכור בין צעדי הזמן.');
                }, 500);
            } else {
                element.classList.add('incorrect');
                setTimeout(() => {
                    alert('❌ לא נכון. נסו שוב - איזה פרמטר קשור לזיכרון?');
                }, 500);
            }
        }
        
        // Step navigation - improved version
        function nextStep() {
            const steps = {
                1: {
                    title: '⚙️ שלב 2: בחירת פרמטרים',
                    content: `
                        <div class="concept-card">
                            <h4>🎛️ בחירת פרמטרים חכמה</h4>
                            <ul>
                                <li><strong>input_size:</strong> תלוי בסוג הנתונים (100 למילים, 1 למספרים)</li>
                                <li><strong>hidden_size:</strong> התחילו עם 50-128, הגדילו לפי הצורך</li>
                                <li><strong>num_layers:</strong> 1-2 לרוב מספיק, יותר מ-3 רק למשימות מורכבות</li>
                                <li><strong>dropout:</strong> 0.2-0.5 למניעת overfitting</li>
                            </ul>
                            <div class="interactive-section" style="margin: 20px 0;">
                                <h5>💡 טיפ: נסו את הכלי הזה לבחירת פרמטרים</h5>
                                <div class="demo-controls">
                                    <select class="control-input" id="task-type" onchange="suggestParameters()">
                                        <option value="">בחרו סוג משימה</option>
                                        <option value="text-classification">סיווג טקסט</option>
                                        <option value="sequence-prediction">חיזוי רצפים</option>
                                        <option value="time-series">סדרות זמן</option>
                                        <option value="language-model">מודל שפה</option>
                                    </select>
                                </div>
                                <div id="parameter-suggestions"></div>
                            </div>
                            <button class="exercise-button" onclick="nextStep()">שלב הבא →</button>
                        </div>
                    `
                },
                2: {
                    title: '🏗️ שלב 3: יצירת המודל',
                    content: `
                        <div class="concept-card">
                            <h4>💻 יצירת המודל בPyTorch</h4>
                            <div class="code-workspace">
                                <div class="code-header">תבנית בסיסית למודל RNN</div>
                                <pre>
model = nn.RNN(
    input_size=10,      # גודל קלט
    hidden_size=50,     # גודל זיכרון  
    num_layers=2,       # מספר שכבות
    batch_first=True,   # סדר: (batch, seq, features)
    dropout=0.2         # למניעת overfitting
)

# בדיקה מהירה
x = torch.randn(32, 15, 10)  # batch=32, seq=15, features=10
output, hidden = model(x)
print(f"קלט: {x.shape} → פלט: {output.shape}")
</pre>
                            </div>
                            <div class="interactive-section" style="margin: 20px 0;">
                                <h5>🔧 נסו לבנות מודל בעצמכם:</h5>
                                <div class="demo-controls">
                                    <input type="number" class="control-input" placeholder="input_size" id="step3_input_size" value="10">
                                    <input type="number" class="control-input" placeholder="hidden_size" id="step3_hidden_size" value="50">
                                    <input type="number" class="control-input" placeholder="num_layers" id="step3_num_layers" value="2">
                                </div>
                                <button class="exercise-button" onclick="buildStepModel()">בנה מודל!</button>
                                <div id="step3-result"></div>
                            </div>
                            <button class="exercise-button" onclick="nextStep()">שלב הבא →</button>
                        </div>
                    `
                },
                3: {
                    title: '✅ שלב 4: בדיקת תקינות',
                    content: `
                        <div class="concept-card">
                            <h4>🔍 וידוא שהמודל עובד</h4>
                            <div class="step-indicator" style="margin: 20px 0;">
                                <div class="step completed">✅ בדיקת גדלים</div>
                                <div class="step completed">✅ Forward pass</div>
                                <div class="step completed">✅ Backward pass</div>
                                <div class="step completed">✅ זיכרון</div>
                            </div>
                            <ul>
                                <li><strong>בדיקת גדלים:</strong> ודאו שהקלט תואם לתוצאה</li>
                                <li><strong>Forward pass:</strong> הריצו העברה קדימה קטנה</li>
                                <li><strong>Backward pass:</strong> בדקו שהגרדיאנטים מחושבים</li>
                                <li><strong>זיכרון:</strong> ודאו שיש מספיק זיכרון GPU/RAM</li>
                            </ul>
                            <div class="interactive-section" style="margin: 20px 0;">
                                <h5>🧪 הרצת בדיקת תקינות אוטומטית:</h5>
                                <button class="exercise-button" onclick="runModelTest()">🔬 הרץ בדיקה</button>
                                <div id="test-results"></div>
                            </div>
                            <div class="success-indicator show" style="margin: 20px 0;">
                                <h4>🎉 כל הכבוד! השלמתם את כל שלבי ההגדרה!</h4>
                                <p>עכשיו אתם מוכנים לאמן את המודל על נתונים אמיתיים</p>
                            </div>
                            <button class="exercise-button" onclick="resetSteps()">🔄 התחל מחדש</button>
                        </div>
                    `
                }
            };
            
            if (currentStep <= 3) {
                // Update step indicator  
                document.getElementById(`step${currentStep}`).classList.remove('active');
                document.getElementById(`step${currentStep}`).classList.add('completed');
                
                if (currentStep < 4) {
                    currentStep++;
                    if (currentStep <= 3) {
                        document.getElementById(`step${currentStep}`).classList.add('active');
                        document.getElementById('step-content').innerHTML = steps[currentStep-1].content;
                    }
                }
            }
        }
        
        // Parameter suggestions based on task type
        function suggestParameters() {
            const taskType = document.getElementById('task-type').value;
            const suggestions = {
                'text-classification': {
                    input_size: '100-300 (embedding dim)',
                    hidden_size: '128-256',
                    num_layers: '2-3',
                    note: 'לסיווג טקסט, רצוי LSTM עם bidirectional=True'
                },
                'sequence-prediction': {
                    input_size: '1-10 (מספר features)',
                    hidden_size: '50-128',
                    num_layers: '1-2',
                    note: 'לחיזוי רצפים מספריים, RNN פשוט לעיתים מספיק'
                },
                'time-series': {
                    input_size: '1-20 (מספר מדדים)',
                    hidden_size: '64-256',
                    num_layers: '2-4',
                    note: 'לסדרות זמן, שקלו GRU או LSTM עם attention'
                },
                'language-model': {
                    input_size: '200-512 (embedding dim)',
                    hidden_size: '256-1024',
                    num_layers: '3-6',
                    note: 'למודלי שפה, צריך מודל גדול וhidden_size גבוה'
                }
            };
            
            if (taskType && suggestions[taskType]) {
                const suggestion = suggestions[taskType];
                document.getElementById('parameter-suggestions').innerHTML = `
                    <div class="concept-card" style="margin-top: 15px;">
                        <h5>💡 המלצות פרמטרים עבור ${taskType}:</h5>
                        <ul>
                            <li><strong>input_size:</strong> ${suggestion.input_size}</li>
                            <li><strong>hidden_size:</strong> ${suggestion.hidden_size}</li>
                            <li><strong>num_layers:</strong> ${suggestion.num_layers}</li>
                        </ul>
                        <p><strong>טיפ:</strong> ${suggestion.note}</p>
                    </div>
                `;
            }
        }
        
        // Build model in step 3
        function buildStepModel() {
            const input_size = document.getElementById('step3_input_size').value;
            const hidden_size = document.getElementById('step3_hidden_size').value;
            const num_layers = document.getElementById('step3_num_layers').value;
            
            if (!input_size || !hidden_size || !num_layers) {
                alert('⚠️ אנא מלאו את כל השדות');
                return;
            }
            
            // Calculate parameters
            const rnn_params = (parseInt(input_size) + parseInt(hidden_size)) * parseInt(hidden_size) * parseInt(num_layers);
            const total_params = rnn_params + 100; // approximate
            
            document.getElementById('step3-result').innerHTML = `
                <div class="success-indicator show" style="margin-top: 15px;">
                    <h5>🎉 מודל נוצר!</h5>
                    <p><strong>פרמטרים:</strong> ~${total_params.toLocaleString()}</p>
                    <p><strong>זיכרון:</strong> ~${(total_params * 4 / 1024 / 1024).toFixed(1)}MB</p>
                    <p>✅ מוכן למעבר לשלב הבא!</p>
                </div>
            `;
        }
        
        // Run model test in step 4
        function runModelTest() {
            document.getElementById('test-results').innerHTML = `
                <div class="concept-card" style="margin-top: 15px;">
                    <h5>🔬 מריץ בדיקות...</h5>
                    <div class="progress-bar">
                        <div class="progress-fill" id="test-progress"></div>
                    </div>
                </div>
            `;
            
            // Simulate testing process
            let progress = 0;
            const testInterval = setInterval(() => {
                progress += 25;
                document.getElementById('test-progress').style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(testInterval);
                    document.getElementById('test-results').innerHTML = `
                        <div class="success-indicator show" style="margin-top: 15px;">
                            <h5>✅ כל הבדיקות עברו בהצלחה!</h5>
                            <ul style="text-align: right; list-style: none;">
                                <li>✅ גדלים תקינים: (32, 15, 10) → (32, 15, 50)</li>
                                <li>✅ Forward pass: 0.023 שניות</li>
                                <li>✅ Backward pass: גרדיאנטים מחושבים</li>
                                <li>✅ זיכרון: 45MB בשימוש</li>
                            </ul>
                            <p><strong>המודל מוכן לשימוש! 🚀</strong></p>
                        </div>
                    `;
                }
            }, 500);
        }
        
        function resetSteps() {
            currentStep = 1;
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active', 'completed');
            });
            document.getElementById('step1').classList.add('active');
            document.getElementById('step-content').innerHTML = `
                <div class="concept-card">
                    <h4>🎯 שלב 1: הגדרת הבעיה</h4>
                    <p><strong>שאלות מנחות:</strong></p>
                    <ul>
                        <li>איזה סוג נתונים אני מעבד? (טקסט, מספרים, אותות)</li>
                        <li>מה אני רוצה לחזות? (מילה הבאה, סיווג, ערך מספרי)</li>
                        <li>איזה ארכיטקטורה מתאימה? (One-to-Many, Many-to-One, וכו')</li>
                    </ul>
                    <button class="exercise-button" onclick="nextStep()">שלב הבא →</button>
                </div>
            `;
        }
        
        // Task simulation
        function simulateTask(task) {
            const simulations = {
                'sentiment': {
                    type: 'Many-to-One',
                    input_size: 100,
                    hidden_size: 128,
                    output_size: 3,
                    description: 'ניתוח רגשות: רצף מילים → סיווג (חיובי/שלילי/נייטרלי)'
                },
                'translation': {
                    type: 'Many-to-Many',
                    input_size: 200,
                    hidden_size: 256,
                    output_size: 200,
                    description: 'תרגום: רצף מילים בשפה א\' → רצף מילים בשפה ב\''
                },
                'generation': {
                    type: 'One-to-Many',
                    input_size: 1,
                    hidden_size: 512,
                    output_size: 1000,
                    description: 'יצירת טקסט: מילה ראשונה → רצף מילים חדש'
                },
                'classification': {
                    type: 'Many-to-One',
                    input_size: 50,
                    hidden_size: 64,
                    output_size: 10,
                    description: 'סיווג רצפים: רצף נתונים → קטגוריה'
                }
            };
            
            const sim = simulations[task];
            document.getElementById('simulation-result').innerHTML = `
                <div class="concept-card">
                    <h4>📋 תוצאות הסימולציה</h4>
                    <p><strong>סוג:</strong> ${sim.type}</p>
                    <p><strong>תיאור:</strong> ${sim.description}</p>
                    <p><strong>פרמטרים מומלצים:</strong></p>
                    <ul>
                        <li>input_size: ${sim.input_size}</li>
                        <li>hidden_size: ${sim.hidden_size}</li>
                        <li>output_size: ${sim.output_size}</li>
                    </ul>
                </div>
            `;
        }
        
        // Model building
        function buildModel() {
            const input_size = document.getElementById('build_input_size').value;
            const hidden_size = document.getElementById('build_hidden_size').value;
            const output_size = document.getElementById('build_output_size').value;
            const num_layers = document.getElementById('build_num_layers').value;
            
            // Validate inputs
            if (!input_size || !hidden_size || !output_size || !num_layers) {
                alert('⚠️ אנא מלאו את כל השדות');
                return;
            }
            
            // Calculate approximate parameter count
            const rnn_params = (parseInt(input_size) + parseInt(hidden_size)) * parseInt(hidden_size) * parseInt(num_layers);
            const fc_params = parseInt(hidden_size) * parseInt(output_size);
            const total_params = rnn_params + fc_params;
            
            document.getElementById('model-info').innerHTML = `
                <div class="success-indicator show">
                    <h4>🎉 מודל נבנה בהצלחה!</h4>
                    <p><strong>מספר פרמטרים משוער:</strong> ${total_params.toLocaleString()}</p>
                    <p><strong>גודל זיכרון:</strong> ~${(total_params * 4 / 1024 / 1024).toFixed(2)} MB</p>
                    <p><strong>מהירות אימון:</strong> ${total_params < 10000 ? 'מהיר' : total_params < 100000 ? 'בינוני' : 'איטי'}</p>
                    <div class="demo-controls" style="margin-top: 15px;">
                        <button class="exercise-button" onclick="testModel()">🧪 בדיקת תקינות המודל</button>
                    </div>
                </div>
            `;
        }
        
        // Model testing function
        function testModel() {
            const input_size = parseInt(document.getElementById('build_input_size').value);
            const hidden_size = parseInt(document.getElementById('build_hidden_size').value);
            const output_size = parseInt(document.getElementById('build_output_size').value);
            const num_layers = parseInt(document.getElementById('build_num_layers').value);
            
            // Simulate model testing
            setTimeout(() => {
                document.getElementById('model-info').innerHTML += `
                    <div class="concept-card" style="margin-top: 20px;">
                        <h4>🔍 תוצאות בדיקת תקינות</h4>
                        <div style="margin: 15px 0;">
                            <p>✅ <strong>בדיקת גדלים:</strong> input (32, 10, ${input_size}) → output (32, 10, ${output_size})</p>
                            <p>✅ <strong>Forward pass:</strong> עובד בהצלחה</p>
                            <p>✅ <strong>Backward pass:</strong> גרדיאנטים מחושבים</p>
                            <p>✅ <strong>זיכרון GPU:</strong> ${(Math.random() * 100 + 50).toFixed(0)}MB</p>
                        </div>
                        <div class="demo-controls">
                            <button class="exercise-button" onclick="showModelCode()">📝 הצג קוד המודל</button>
                            <button class="exercise-button" onclick="nextDefinitionStep()">➡️ המשך לצעד הבא</button>
                        </div>
                    </div>
                `;
            }, 1500);
        }
        
        // Show model code
        function showModelCode() {
            const input_size = document.getElementById('build_input_size').value;
            const hidden_size = document.getElementById('build_hidden_size').value;
            const output_size = document.getElementById('build_output_size').value;
            const num_layers = document.getElementById('build_num_layers').value;
            
            document.getElementById('model-info').innerHTML += `
                <div class="code-workspace" style="margin-top: 20px;">
                    <div class="code-header">הקוד שנוצר עבור המודל שלכם</div>
                    <pre>
import torch
import torch.nn as nn

class YourCustomRNN(nn.Module):
    def __init__(self):
        super(YourCustomRNN, self).__init__()
        
        self.rnn = nn.RNN(
            input_size=${input_size},
            hidden_size=${hidden_size},
            num_layers=${num_layers},
            batch_first=True,
            dropout=0.2 if ${num_layers} > 1 else 0
        )
        
        self.fc = nn.Linear(${hidden_size}, ${output_size})
        self.dropout = nn.Dropout(0.2)
        
    def forward(self, x):
        rnn_out, hidden = self.rnn(x)
        rnn_out = self.dropout(rnn_out)
        output = self.fc(rnn_out)
        return output, hidden

# יצירת המודל
model = YourCustomRNN()
print(f"מודל נוצר עם {sum(p.numel() for p in model.parameters())} פרמטרים")

# בדיקת תקינות
x = torch.randn(32, 10, ${input_size})  # (batch, seq, features)
output, hidden = model(x)
print(f"קלט: {x.shape} → פלט: {output.shape}")
</pre>
                </div>
            `;
        }
        
        // Next step in definition process
        function nextDefinitionStep() {
            alert('🎉 מעולה! עברתם בהצלחה את כל שלבי ההגדרה!\n\n✅ הגדרתם בעיה\n✅ בחרתם פרמטרים\n✅ יצרתם מודל\n✅ בדקתם תקינות\n\nעכשיו אתם מוכנים לאמן את המודל על נתונים אמיתיים! 🚀');
        }
        
        // Architecture explanation
        function explainArchitecture(type) {
            const explanations = {
                'one-to-one': {
                    title: '🔸 One-to-One Architecture',
                    description: 'קלט קבוע אחד מייצר פלט קבוע אחד. זה בעצם רשת נוירונים רגילה, לא באמת RNN.',
                    code: `
# דוגמה: סיווג תמונה
class ImageClassifier(nn.Module):
    def __init__(self):
        super().__init__()
        self.rnn = nn.RNN(input_size=1000, hidden_size=100, batch_first=True)
        self.fc = nn.Linear(100, 10)  # 10 קטגוריות
    
    def forward(self, x):
        # x: (batch, 1, 1000) - תמונה אחת
        output, hidden = self.rnn(x)
        return self.fc(output[:, -1, :])  # רק הפלט האחרון
                    `
                },
                'one-to-many': {
                    title: '🔹 One-to-Many Architecture', 
                    description: 'קלט אחד מייצר רצף של פלטים. מתאים ליצירת תוכן או תיאור.',
                    code: `
# דוגמה: תיאור תמונה
class ImageCaptioning(nn.Module):
    def __init__(self):
        super().__init__()
        self.rnn = nn.LSTM(input_size=2048, hidden_size=256, batch_first=True)
        self.fc = nn.Linear(256, vocab_size)
    
    def forward(self, image_features, max_length=20):
        outputs = []
        hidden = None
        
        for i in range(max_length):
            if i == 0:
                # תמונה בצעד הראשון
                output, hidden = self.rnn(image_features, hidden)
            else:
                # המילה הקודמת בצעדים הבאים
                output, hidden = self.rnn(prev_word, hidden)
            
            word_prob = self.fc(output)
            outputs.append(word_prob)
            prev_word = word_prob.argmax(dim=-1).unsqueeze(-1)
        
        return torch.stack(outputs, dim=1)
                    `
                },
                'many-to-one': {
                    title: '🔺 Many-to-One Architecture',
                    description: 'רצף של קלטים מייצר פלט אחד. מתאים לסיווג או ניתוח של רצפים שלמים.',
                    code: `
# דוגמה: ניתוח רגשות
class SentimentAnalysis(nn.Module):
    def __init__(self, vocab_size, embedding_dim=100, hidden_size=128):
        super().__init__()
        self.embedding = nn.Embedding(vocab_size, embedding_dim)
        self.lstm = nn.LSTM(embedding_dim, hidden_size, batch_first=True)
        self.fc = nn.Linear(hidden_size, 3)  # חיובי/שלילי/נייטרלי
    
    def forward(self, x):
        # x: (batch, seq_len) - רצף מילים
        embedded = self.embedding(x)  # (batch, seq_len, embedding_dim)
        lstm_out, (hidden, cell) = self.lstm(embedded)
        
        # שימוש במצב הנסתר הסופי
        sentiment = self.fc(hidden[-1])  # (batch, 3)
        return sentiment
                    `
                },
                'many-to-many': {
                    title: '🔻 Many-to-Many Architecture',
                    description: 'רצף קלטים מייצר רצף פלטים. מתאים לתרגום, תמלול או עיבוד רצפים.',
                    code: `
# דוגמה: תרגום שפות
class Translator(nn.Module):
    def __init__(self, input_vocab, output_vocab, hidden_size=256):
        super().__init__()
        # Encoder
        self.encoder_embedding = nn.Embedding(input_vocab, hidden_size)
        self.encoder = nn.LSTM(hidden_size, hidden_size, batch_first=True)
        
        # Decoder  
        self.decoder_embedding = nn.Embedding(output_vocab, hidden_size)
        self.decoder = nn.LSTM(hidden_size, hidden_size, batch_first=True)
        self.output_projection = nn.Linear(hidden_size, output_vocab)
    
    def forward(self, source, target=None):
        # Encoding
        src_embedded = self.encoder_embedding(source)
        encoder_out, (hidden, cell) = self.encoder(src_embedded)
        
        # Decoding
        if target is not None:  # אימון
            tgt_embedded = self.decoder_embedding(target)
            decoder_out, _ = self.decoder(tgt_embedded, (hidden, cell))
            output = self.output_projection(decoder_out)
        else:  # חיזוי
            output = self.generate(hidden, cell, max_length=50)
        
        return output
                    `
                }
            };
            
            const exp = explanations[type];
            const explanationDiv = document.getElementById('architecture-explanation');
            document.getElementById('arch-title').textContent = exp.title;
            document.getElementById('arch-description').textContent = exp.description;
            document.getElementById('arch-code').innerHTML = `<div class="code-workspace"><div class="code-header">קוד לדוגמה</div><pre>${exp.code}</pre></div>`;
            explanationDiv.style.display = 'block';
            explanationDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Architecture matching game
        function matchArchitecture(task) {
            const matches = {
                'email-spam': {
                    correct: 'Many-to-One',
                    explanation: 'זיהוי דואר זבל: רצף מילים באימייל → סיווג (זבל או לא זבל)'
                },
                'stock-prediction': {
                    correct: 'Many-to-One', 
                    explanation: 'חיזוי מחירי מניות: רצף מחירים היסטוריים → מחיר עתידי אחד'
                },
                'chatbot': {
                    correct: 'Many-to-Many',
                    explanation: 'בוט שיחה: רצף מילים בשאלה → רצף מילים בתשובה'
                },
                'music-generation': {
                    correct: 'One-to-Many',
                    explanation: 'יצירת מוסיקה: תו התחלתי → רצף תווים חדש'
                }
            };
            
            const match = matches[task];
            document.getElementById('architecture-match-result').innerHTML = `
                <div class="concept-card">
                    <h4>🎯 התשובה הנכונה: ${match.correct}</h4>
                    <p>${match.explanation}</p>
                </div>
            `;
        }
        
        // Exercise functions
        function runDataCreation() {
            // Simulate data creation
            document.getElementById('data-result').innerHTML = `
                <div class="success-indicator show">
                    <h4>✅ נתונים נוצרו בהצלחה!</h4>
                    <p><strong>רצף לדוגמה:</strong> [0, 1, 1, 2, 3] → 5</p>
                    <p><strong>סך הכל:</strong> 95 דוגמאות אימון</p>
                    <button class="exercise-button" onclick="nextExerciseStep()">המשך למודל →</button>
                </div>
            `;
            updateExerciseProgress(25);
        }
        
        function nextExerciseStep() {
            const steps = {
                2: `
                    <div class="concept-card">
                        <h4>🏗️ שלב 2: בניית המודל</h4>
                        <div class="code-workspace">
                            <div class="code-header">מודל RNN לפיבונאצ'י</div>
class FibonacciRNN(nn.Module):
    def __init__(self):
        super().__init__()
        self.lstm = nn.LSTM(
            input_size=1,      # מספר אחד בכל צעד
            hidden_size=50,    # זיכרון בגודל 50
            num_layers=2,      # 2 שכבות לעומק
            dropout=0.2,
            batch_first=True
        )
        self.fc = nn.Linear(50, 1)  # פלט מספר אחד
    
    def forward(self, x):
        # x shape: (batch, seq_len, 1)
        lstm_out, _ = self.lstm(x)
        # רק הפלט האחרון לחיזוי
        prediction = self.fc(lstm_out[:, -1, :])
        return prediction

model = FibonacciRNN()
print(f"מספר פרמטרים: {sum(p.numel() for p in model.parameters())}")
                        </div>
                        <button class="exercise-button" onclick="nextExerciseStep()">המשך לאימון →</button>
                    </div>
                `,
                3: `
                    <div class="concept-card">
                        <h4>⚙️ שלב 3: אימון המודל</h4>
                        <div class="code-workspace">
                            <div class="code-header">לולאת אימון</div>
# הגדרת optimizer ו-loss
optimizer = torch.optim.Adam(model.parameters(), lr=0.001)
criterion = nn.MSELoss()

# אימון
model.train()
for epoch in range(100):
    optimizer.zero_grad()
    
    # Forward pass
    predictions = model(X_train.unsqueeze(-1))  # הוספת ממד features
    loss = criterion(predictions.squeeze(), y_train)
    
    # Backward pass
    loss.backward()
    optimizer.step()
    
    if epoch % 10 == 0:
        print(f'Epoch {epoch}, Loss: {loss.item():.6f}')
                        </div>
                        <button class="exercise-button" onclick="nextExerciseStep()">המשך לבדיקה →</button>
                    </div>
                `,
                4: `
                    <div class="concept-card">
                        <h4>🧪 שלב 4: בדיקת המודל</h4>
                        <div class="code-workspace">
                            <div class="code-header">בדיקה על נתונים חדשים</div>
# בדיקה על רצף חדש
test_sequence = [5, 8, 13, 21, 34]  # הבא צריך להיות 55
test_input = torch.tensor(test_sequence, dtype=torch.float32).unsqueeze(0).unsqueeze(-1)

model.eval()
with torch.no_grad():
    prediction = model(test_input)
    predicted_value = prediction.item()

print(f"רצף: {test_sequence}")
print(f"חיזוי: {predicted_value:.1f}")
print(f"אמיתי: 55")
print(f"שגיאה: {abs(55 - predicted_value):.1f}")
                        </div>
                        <div class="success-indicator show">
                            <h4>🎉 תרגיל הושלם בהצלחה!</h4>
                            <p>בניתם RNN שלם מאפס ועד לבדיקה!</p>
                        </div>
                    </div>
                `
            };
            
            const currentExStep = getCurrentExerciseStep();
            if (currentExStep < 4) {
                const nextStep = currentExStep + 1;
                updateExerciseStep(nextStep);
                document.getElementById('exercise-content').innerHTML = steps[nextStep];
                updateExerciseProgress(nextStep * 25);
            }
        }
        
        function getCurrentExerciseStep() {
            for (let i = 1; i <= 4; i++) {
                if (document.getElementById(`ex-step${i}`).classList.contains('active')) {
                    return i;
                }
            }
            return 1;
        }
        
        function updateExerciseStep(step) {
            // Reset all steps
            for (let i = 1; i <= 4; i++) {
                const stepEl = document.getElementById(`ex-step${i}`);
                stepEl.classList.remove('active', 'completed');
                if (i < step) {
                    stepEl.classList.add('completed');
                } else if (i === step) {
                    stepEl.classList.add('active');
                }
            }
        }
        
        function updateExerciseProgress(percentage) {
            document.getElementById('exercise-progress').style.width = percentage + '%';
        }
        
        // Training simulation
        function startTraining() {
            if (trainingInterval) return; // Already training
            
            epochCount = 0;
            const canvas = document.getElementById('loss-chart');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw axes
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(50, 170);
            ctx.lineTo(350, 170); // X axis
            ctx.moveTo(50, 30);
            ctx.lineTo(50, 170);  // Y axis
            ctx.stroke();
            
            // Labels
            ctx.fillStyle = '#2c3e50';
            ctx.font = '12px Arial';
            ctx.fillText('Epochs', 180, 195);
            ctx.save();
            ctx.translate(20, 100);
            ctx.rotate(-Math.PI/2);
            ctx.fillText('Loss', 0, 0);
            ctx.restore();
            
            let losses = [];
            
            trainingInterval = setInterval(() => {
                epochCount++;
                
                // Simulate decreasing loss with some noise
                const baseLoss = 2.0 * Math.exp(-epochCount * 0.1) + 0.1;
                const noise = (Math.random() - 0.5) * 0.2;
                const loss = Math.max(0.05, baseLoss + noise);
                losses.push(loss);
                
                // Update status
                document.getElementById('training-status').innerHTML = `
                    <div class="concept-card">
                        <h4>📊 מצב אימון</h4>
                        <p><strong>Epoch:</strong> ${epochCount}/100</p>
                        <p><strong>Loss:</strong> ${loss.toFixed(4)}</p>
                        <p><strong>מגמה:</strong> ${loss < 0.5 ? '⬇️ יורד (טוב!)' : '📈 גבוה (עדיין לומד)'}</p>
                    </div>
                `;
                
                // Draw loss curve
                if (losses.length > 1) {
                    ctx.strokeStyle = '#e74c3c';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    
                    for (let i = 0; i < losses.length; i++) {
                        const x = 50 + (i * 300) / 100;
                        const y = 170 - (losses[i] * 140) / 2.5; // Scale to fit
                        
                        if (i === 0) {
                            ctx.moveTo(x, y);
                        } else {
                            ctx.lineTo(x, y);
                        }
                    }
                    ctx.stroke();
                }
                
                if (epochCount >= 100 || loss < 0.05) {
                    stopTraining();
                    document.getElementById('training-status').innerHTML += `
                        <div class="success-indicator show">
                            <h4>🎉 אימון הושלם בהצלחה!</h4>
                            <p>המודל למד לחזות פיבונאצ'י!</p>
                        </div>
                    `;
                }
            }, 100);
        }
        
        function stopTraining() {
            if (trainingInterval) {
                clearInterval(trainingInterval);
                trainingInterval = null;
            }
        }
        
        function resetTraining() {
            stopTraining();
            epochCount = 0;
            const canvas = document.getElementById('loss-chart');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            document.getElementById('training-status').innerHTML = '';
        }
        
        // Final quiz
        let currentQuizQuestion = 1;
        const quizQuestions = [
            {
                question: "איזה פרמטר קובע את גודל הזיכרון ב-RNN?",
                options: ["input_size", "hidden_size", "output_size", "batch_size"],
                correct: 1,
                explanation: "hidden_size קובע את גודל וקטור הזיכרון הפנימי של הRNN"
            },
            {
                question: "איזו ארכיטקטורה מתאימה לניתוח רגשות?",
                options: ["One-to-One", "One-to-Many", "Many-to-One", "Many-to-Many"],
                correct: 2,
                explanation: "Many-to-One: רצף מילים (משפט) → סיווג רגש אחד"
            },
            {
                question: "מה המשמעות של batch_first=True?",
                options: ["הbatch נמצא ראשון בקוד", "סדר הממדים: (batch, seq, features)", "הbatch מעובד ראשון", "הbatch הוא הפרמטר הראשון"],
                correct: 1,
                explanation: "batch_first=True אומר שסדר הממדים הוא (batch, sequence, features)"
            }
        ];
        
        function answerFinalQuiz(element, isCorrect, questionNum) {
            const options = element.parentNode.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
                opt.style.pointerEvents = 'none'; // Disable further clicks
            });
            
            if (isCorrect) {
                element.classList.add('correct');
                quizScore++;
            } else {
                element.classList.add('incorrect');
                // Show correct answer
                const correctIndex = quizQuestions[questionNum-1].correct;
                options[correctIndex].classList.add('correct');
            }
            
            // Show explanation
            setTimeout(() => {
                alert(`💡 הסבר: ${quizQuestions[questionNum-1].explanation}`);
                nextQuizQuestion();
            }, 1000);
        }
        
        function nextQuizQuestion() {
            currentQuizQuestion++;
            updateQuizProgress();
            
            if (currentQuizQuestion <= quizQuestions.length) {
                // Load next question
                setTimeout(() => {
                    loadQuizQuestion(currentQuizQuestion);
                }, 2000);
            } else {
                // Show final score
                showFinalScore();
            }
        }
        
        function loadQuizQuestion(questionNum) {
            if (questionNum > quizQuestions.length) return;
            
            const question = quizQuestions[questionNum - 1];
            const quizHTML = `
                <div class="quiz-question" data-question="${questionNum}">
                    <p><strong>שאלה ${questionNum}:</strong> ${question.question}</p>
                    ${question.options.map((option, index) => 
                        `<div class="quiz-option" onclick="answerFinalQuiz(this, ${index === question.correct}, ${questionNum})">${option}</div>`
                    ).join('')}
                </div>
            `;
            
            document.getElementById('final-quiz').innerHTML = quizHTML;
        }
        
        function updateQuizProgress() {
            const progress = (currentQuizQuestion / quizQuestions.length) * 100;
            document.getElementById('quiz-progress').style.width = progress + '%';
        }
        
        function showFinalScore() {
            const percentage = (quizScore / quizQuestions.length) * 100;
            let message = '';
            
            if (percentage >= 80) {
                message = '🏆 מצוין! אתם מבינים RNN בצורה מעולה!';
            } else if (percentage >= 60) {
                message = '👍 טוב! אתם בכיוון הנכון, תרגלו עוד קצת.';
            } else {
                message = '📚 כדאי לחזור על החומר ולתרגל יותר.';
            }
            
            document.getElementById('quiz-score').innerHTML = `
                <h4>📊 תוצאות המבחן</h4>
                <p><strong>ציון:</strong> ${quizScore}/${quizQuestions.length} (${percentage.toFixed(0)}%)</p>
                <p>${message}</p>
            `;
            document.getElementById('quiz-score').classList.add('show');
        }
        
        // Feedback system
        function giveFeedback(type) {
            const responses = {
                'confident': {
                    message: '🚀 נהדר! אתם מוכנים לצאת לעולם ולבנות פרויקטי RNN מדהימים!',
                    suggestions: [
                        '🎯 נסו פרויקט עם נתוני טוויטר',
                        '📈 בנו מערכת חיזוי מחירי מניות',
                        '🤖 צרו בוט שיחה פשוט',
                        '📚 למדו על Transformer (הדור הבא)'
                    ]
                },
                'okay': {
                    message: '💪 זה נורמלי! RNN זה נושא מתקדם. עם תרגול תגיעו לשליטה מלאה.',
                    suggestions: [
                        '🔄 חזרו על הדוגמאות במצגת',
                        '💻 תרגלו עם נתונים פשוטים',
                        '👥 עבדו בקבוצות עם חברים',
                        '❓ שאלו שאלות בפורום'
                    ]
                },
                'confused': {
                    message: '🤗 זה בסדר גמור! RNN זה נושא מורכב. בואו נעזור לכם.',
                    suggestions: [
                        '📖 קראו שוב את החלק התיאורטי',
                        '🎥 צפו בסרטוני יוטיוב נוספים',
                        '👨‍🏫 בקשו עזרה מהמרצה',
                        '⏰ קחו הפסקה וחזרו מחר'
                    ]
                }
            };
            
            const response = responses[type];
            document.getElementById('feedback-response').innerHTML = `
                <div class="concept-card">
                    <h4>💬 תגובה אישית</h4>
                    <p>${response.message}</p>
                    <h5>🎯 המלצות לצעדים הבאים:</h5>
                    <ul>
                        ${response.suggestions.map(suggestion => `<li>${suggestion}</li>`).join('')}
                    </ul>
                </div>
            `;
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Smooth scrolling for navigation
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    target.scrollIntoView({ behavior: 'smooth' });
                });
            });
            
            // Initialize first quiz question
            loadQuizQuestion(1);
            
            // Add scroll animations
            const slides = document.querySelectorAll('.slide');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, { threshold: 0.1 });
            
            slides.forEach(slide => {
                slide.style.opacity = '0';
                slide.style.transform = 'translateY(50px)';
                slide.style.transition = 'all 0.6s ease';
                observer.observe(slide);
            });
        });
        
        // Mobile responsiveness
        function adjustForMobile() {
            if (window.innerWidth < 768) {
                document.querySelectorAll('.demo-controls').forEach(control => {
                    control.style.gridTemplateColumns = '1fr';
                });
                
                document.querySelectorAll('.architecture-grid').forEach(grid => {
                    grid.style.gridTemplateColumns = '1fr';
                });
            }
        }
        
        window.addEventListener('resize', adjustForMobile);
        adjustForMobile(); // Call on load
    </script>
</body>
</html>