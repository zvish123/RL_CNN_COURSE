<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>דף עבודה אינטראקטיבי - SQL</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        h1 {
            color: #667eea;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .feature-badge {
            display: inline-block;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin: 5px;
        }

        .info-box {
            background: #e3f2fd;
            border-right: 5px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .exercise {
            background: #f9f9f9;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .exercise-number {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-left: 10px;
        }

        .difficulty {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: bold;
            margin-right: 10px;
        }

        .easy { background: #4caf50; color: white; }
        .medium { background: #ff9800; color: white; }

        textarea {
            width: 100%;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            direction: ltr;
            text-align: left;
            resize: vertical;
            min-height: 100px;
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 15px rgba(118, 75, 162, 0.3);
        }

        .button-container {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        .btn-check {
            background: linear-gradient(135deg, #4caf50, #45a049);
            color: white;
        }

        .btn-solution {
            background: linear-gradient(135deg, #2196f3, #0b7dda);
            color: white;
        }

        .btn-reset {
            background: linear-gradient(135deg, #ff9800, #e68900);
            color: white;
        }

        .feedback {
            margin-top: 15px;
            padding: 20px;
            border-radius: 10px;
            font-weight: bold;
            animation: slideDown 0.4s ease;
            display: none;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback-success {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-right: 6px solid #4caf50;
            color: #2e7d32;
        }

        .feedback-error {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            border-right: 6px solid #f44336;
            color: #c62828;
        }

        .feedback-solution {
            background: linear-gradient(135deg, #fff9c4, #fff59d);
            border-right: 6px solid #fbc02d;
            color: #f57f17;
        }

        .feedback code {
            display: block;
            margin-top: 10px;
            padding: 15px;
            background: #2d2d2d;
            color: #50fa7b;
            border-radius: 8px;
            direction: ltr;
            text-align: left;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .stats-box {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .stats-box h3 {
            margin-bottom: 15px;
        }

        .stat-item {
            display: inline-block;
            margin: 10px 20px;
            font-size: 1.2em;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            h1 {
                font-size: 1.8em;
            }
            .btn {
                padding: 10px 18px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📝 דף עבודה אינטראקטיבי - SQL</h1>
        <p class="subtitle">
            <span class="feature-badge">✓ בדיקה אוטומטית</span>
            <span class="feature-badge">💡 הצגת פתרונות</span>
            <span class="feature-badge">📊 מעקב התקדמות</span>
        </p>

        <div class="stats-box" id="stats">
            <h3>📊 סטטיסטיקת ההתקדמות שלך</h3>
            <div class="stat-item">
                <span class="stat-number" id="correct-count">0</span>
                <span>נכונות</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="total-count">0</span>
                <span>סה"כ נבדקו</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="success-rate">0%</span>
                <span>אחוז הצלחה</span>
            </div>
        </div>

        <div class="info-box">
            <strong>🎯 איך להשתמש בדף זה:</strong>
            <ol style="margin-right: 30px; margin-top: 10px;">
                <li>כתוב את פתרון השאילתה SQL בתיבת הטקסט</li>
                <li>לחץ על <strong>"✓ בדוק תשובה"</strong> לבדיקה אוטומטית</li>
                <li>אם נתקעת, לחץ על <strong>"💡 הצג פתרון"</strong></li>
                <li>לחץ על <strong>"↺ נקה"</strong> כדי להתחיל מחדש</li>
            </ol>
        </div>

        <!-- תרגיל 1 -->
        <div class="exercise">
            <span class="exercise-number">תרגיל 1</span>
            <span class="difficulty easy">קל</span>
            <p><strong>שלוף את כל התלמידים:</strong></p>
            <div class="answer-box">
                <textarea id="answer-1"></textarea>
                <div class="button-container">
                    <button class="btn btn-check" onclick="checkAnswer(1)">✓ בדוק תשובה</button>
                    <button class="btn btn-solution" onclick="showSolution(1)">💡 הצג פתרון</button>
                    <button class="btn btn-reset" onclick="resetAnswer(1)">↺ נקה</button>
                </div>
                <div class="feedback" id="feedback-1"></div>
            </div>
        </div>

        <!-- תרגיל 2 -->
        <div class="exercise">
            <span class="exercise-number">תרגיל 2</span>
            <span class="difficulty easy">קל</span>
            <p><strong>שלוף רק את השמות הפרטיים והמשפחה של כל התלמידים:</strong></p>
            <div class="answer-box">
                <textarea id="answer-2"></textarea>
                <div class="button-container">
                    <button class="btn btn-check" onclick="checkAnswer(2)">✓ בדוק תשובה</button>
                    <button class="btn btn-solution" onclick="showSolution(2)">💡 הצג פתרון</button>
                    <button class="btn btn-reset" onclick="resetAnswer(2)">↺ נקה</button>
                </div>
                <div class="feedback" id="feedback-2"></div>
            </div>
        </div>

        <!-- תרגיל 3 -->
        <div class="exercise">
            <span class="exercise-number">תרגיל 3</span>
            <span class="difficulty easy">קל</span>
            <p><strong>שלוף את כל התלמידים מעל גיל 16:</strong></p>
            <div class="answer-box">
                <textarea id="answer-3"></textarea>
                <div class="button-container">
                    <button class="btn btn-check" onclick="checkAnswer(3)">✓ בדוק תשובה</button>
                    <button class="btn btn-solution" onclick="showSolution(3)">💡 הצג פתרון</button>
                    <button class="btn btn-reset" onclick="resetAnswer(3)">↺ נקה</button>
                </div>
                <div class="feedback" id="feedback-3"></div>
            </div>
        </div>

        <!-- תרגיל 4 -->
        <div class="exercise">
            <span class="exercise-number">תרגיל 4</span>
            <span class="difficulty medium">בינוני</span>
            <p><strong>שלוף את שמות התלמידים בכיתות 10 או 12 (השתמש ב-IN):</strong></p>
            <div class="answer-box">
                <textarea id="answer-4"></textarea>
                <div class="button-container">
                    <button class="btn btn-check" onclick="checkAnswer(4)">✓ בדוק תשובה</button>
                    <button class="btn btn-solution" onclick="showSolution(4)">💡 הצג פתרון</button>
                    <button class="btn btn-reset" onclick="resetAnswer(4)">↺ נקה</button>
                </div>
                <div class="feedback" id="feedback-4"></div>
            </div>
        </div>

        <!-- תרגיל 5 -->
        <div class="exercise">
            <span class="exercise-number">תרגיל 5</span>
            <span class="difficulty medium">בינוני</span>
            <p><strong>שלוף את שמות התלמידים שהשם הפרטי שלהם מתחיל באות 'י':</strong></p>
            <div class="answer-box">
                <textarea id="answer-5"></textarea>
                <div class="button-container">
                    <button class="btn btn-check" onclick="checkAnswer(5)">✓ בדוק תשובה</button>
                    <button class="btn btn-solution" onclick="showSolution(5)">💡 הצג פתרון</button>
                    <button class="btn btn-reset" onclick="resetAnswer(5)">↺ נקה</button>
                </div>
                <div class="feedback" id="feedback-5"></div>
            </div>
        </div>

        <!-- תרגיל 6 -->
        <div class="exercise">
            <span class="exercise-number">תרגיל 6</span>
            <span class="difficulty easy">קל</span>
            <p><strong>חשוב כמה תלמידים יש בטבלה:</strong></p>
            <div class="answer-box">
                <textarea id="answer-6"></textarea>
                <div class="button-container">
                    <button class="btn btn-check" onclick="checkAnswer(6)">✓ בדוק תשובה</button>
                    <button class="btn btn-solution" onclick="showSolution(6)">💡 הצג פתרון</button>
                    <button class="btn btn-reset" onclick="resetAnswer(6)">↺ נקה</button>
                </div>
                <div class="feedback" id="feedback-6"></div>
            </div>
        </div>

        <!-- תרגיל 7 -->
        <div class="exercise">
            <span class="exercise-number">תרגיל 7</span>
            <span class="difficulty easy">קל</span>
            <p><strong>חשוב את הגיל הממוצע של כל התלמידים:</strong></p>
            <div class="answer-box">
                <textarea id="answer-7"></textarea>
                <div class="button-container">
                    <button class="btn btn-check" onclick="checkAnswer(7)">✓ בדוק תשובה</button>
                    <button class="btn btn-solution" onclick="showSolution(7)">💡 הצג פתרון</button>
                    <button class="btn btn-reset" onclick="resetAnswer(7)">↺ נקה</button>
                </div>
                <div class="feedback" id="feedback-7"></div>
            </div>
        </div>

        <!-- תרגיל 8 -->
        <div class="exercise">
            <span class="exercise-number">תרגיל 8</span>
            <span class="difficulty medium">בינוני</span>
            <p><strong>עדכן את גילו של התלמיד עם student_id = 101 ל-17:</strong></p>
            <div class="answer-box">
                <textarea id="answer-8"></textarea>
                <div class="button-container">
                    <button class="btn btn-check" onclick="checkAnswer(8)">✓ בדוק תשובה</button>
                    <button class="btn btn-solution" onclick="showSolution(8)">💡 הצג פתרון</button>
                    <button class="btn btn-reset" onclick="resetAnswer(8)">↺ נקה</button>
                </div>
                <div class="feedback" id="feedback-8"></div>
            </div>
        </div>

        <!-- תרגיל 9 -->
        <div class="exercise">
            <span class="exercise-number">תרגיל 9</span>
            <span class="difficulty medium">בינוני</span>
            <p><strong>עדכן את הכיתה של כל התלמידים בגיל 18 ל-12:</strong></p>
            <div class="answer-box">
                <textarea id="answer-9"></textarea>
                <div class="button-container">
                    <button class="btn btn-check" onclick="checkAnswer(9)">✓ בדוק תשובה</button>
                    <button class="btn btn-solution" onclick="showSolution(9)">💡 הצג פתרון</button>
                    <button class="btn btn-reset" onclick="resetAnswer(9)">↺ נקה</button>
                </div>
                <div class="feedback" id="feedback-9"></div>
            </div>
        </div>

        <!-- תרגיל 10 -->
        <div class="exercise">
            <span class="exercise-number">תרגיל 10</span>
            <span class="difficulty medium">בינוני</span>
            <p><strong>מחק את כל התלמידים מתחת לגיל 16:</strong></p>
            <div class="answer-box">
                <textarea id="answer-10"></textarea>
                <div class="button-container">
                    <button class="btn btn-check" onclick="checkAnswer(10)">✓ בדוק תשובה</button>
                    <button class="btn btn-solution" onclick="showSolution(10)">💡 הצג פתרון</button>
                    <button class="btn btn-reset" onclick="resetAnswer(10)">↺ נקה</button>
                </div>
                <div class="feedback" id="feedback-10"></div>
            </div>
        </div>

        <div class="info-box" style="margin-top: 40px; text-align: center;">
            <h3 style="color: #667eea; margin-bottom: 15px;">🎉 כל הכבוד על ההתקדמות!</h3>
            <p style="font-size: 1.1em;">המשך לתרגל - ככל שתתרגל יותר, תשתפר מהר יותר! 💪</p>
        </div>
    </div>

    <script>
        // מאגר הפתרונות
        const solutions = {
            1: {
                answers: [
                    "select * from students",
                    "select * from students;",
                    "select*from students"
                ],
                display: "SELECT * FROM Students;",
                hint: "השתמש ב-SELECT * FROM לשליפת כל העמודות"
            },
            2: {
                answers: [
                    "select first_name, last_name from students",
                    "select first_name,last_name from students;",
                    "select last_name, first_name from students"
                ],
                display: "SELECT first_name, last_name FROM Students;",
                hint: "ציין את שמות העמודות בנפרד מופרדים בפסיק"
            },
            3: {
                answers: [
                    "select * from students where age > 16",
                    "select * from students where age>16;",
                    "select*from students where age > 16"
                ],
                display: "SELECT * FROM Students WHERE age > 16;",
                hint: "השתמש ב-WHERE עם תנאי age > 16"
            },
            4: {
                answers: [
                    "select first_name, last_name from students where grade in (10, 12)",
                    "select first_name, last_name from students where grade in(10,12);",
                    "select first_name,last_name from students where grade in (10, 12)"
                ],
                display: "SELECT first_name, last_name FROM Students WHERE grade IN (10, 12);",
                hint: "IN מאפשר לבחור מספר ערכים: WHERE grade IN (10, 12)"
            },
            5: {
                answers: [
                    "select first_name, last_name from students where first_name like 'י%'",
                    "select first_name,last_name from students where first_name like'י%';",
                    "select * from students where first_name like 'י%'"
                ],
                display: "SELECT first_name, last_name FROM Students WHERE first_name LIKE 'י%';",
                hint: "LIKE 'י%' מחפש כל שם שמתחיל ב-י"
            },
            6: {
                answers: [
                    "select count(*) from students",
                    "select count(*) from students;",
                    "select count(student_id) from students"
                ],
                display: "SELECT COUNT(*) FROM Students;",
                hint: "COUNT(*) סופר את מספר השורות בטבלה"
            },
            7: {
                answers: [
                    "select avg(age) from students",
                    "select avg(age) from students;",
                    "select avg(age)from students"
                ],
                display: "SELECT AVG(age) FROM Students;",
                hint: "AVG(age) מחשב את הממוצע של עמודת age"
            },
            8: {
                answers: [
                    "update students set age = 17 where student_id = 101",
                    "update students set age=17 where student_id=101;",
                    "update students set age = 17 where student_id=101"
                ],
                display: "UPDATE Students SET age = 17 WHERE student_id = 101;",
                hint: "UPDATE טבלה SET עמודה = ערך WHERE תנאי"
            },
            9: {
                answers: [
                    "update students set grade = 12 where age = 18",
                    "update students set grade=12 where age=18;",
                    "update students set grade = 12 where age=18"
                ],
                display: "UPDATE Students SET grade = 12 WHERE age = 18;",
                hint: "עדכן את grade ל-12 עבור כל מי שגילו 18"
            },
            10: {
                answers: [
                    "delete from students where age < 16",
                    "delete from students where age<16;",
                    "delete from students where age < 16"
                ],
                display: "DELETE FROM Students WHERE age < 16;",
                hint: "DELETE FROM טבלה WHERE תנאי - זהירות! תמיד השתמש ב-WHERE"
            }
        };

        // מעקב סטטיסטיקות
        let stats = {
            correct: 0,
            total: 0
        };

        // נרמול SQL
        function normalizeSQL(sql) {
            return sql.trim()
                .replace(/\s+/g, ' ')
                .replace(/\s*;\s*$/, '')
                .replace(/\s*,\s*/g, ',')
                .replace(/\s*=\s*/g, '=')
                .replace(/\s*>\s*/g, '>')
                .replace(/\s*<\s*/g, '<')
                .toLowerCase();
        }

        // בדיקת תשובה
        function checkAnswer(num) {
            const textarea = document.getElementById('answer-' + num);
            const userAnswer = normalizeSQL(textarea.value);
            
            if (!userAnswer) {
                showFeedback(num, 'error', '❌ אנא כתוב תשובה לפני הבדיקה');
                return;
            }

            const solution = solutions[num];
            if (!solution) {
                showFeedback(num, 'error', '⚠️ בדיקה אוטומטית לא זמינה לתרגיל זה');
                return;
            }

            const isCorrect = solution.answers.some(ans => normalizeSQL(ans) === userAnswer);
            
            stats.total++;
            
            if (isCorrect) {
                stats.correct++;
                showFeedback(num, 'success', '✅ מצוין! התשובה נכונה! 🎉');
                textarea.style.borderColor = '#4caf50';
                textarea.style.background = '#e8f5e9';
            } else {
                showFeedback(num, 'error', '❌ התשובה לא נכונה. ' + solution.hint);
                textarea.style.borderColor = '#f44336';
                textarea.style.background = '#ffebee';
            }
            
            updateStats();
        }

        // הצגת פתרון
        function showSolution(num) {
            const solution = solutions[num];
            if (!solution) {
                showFeedback(num, 'error', '⚠️ פתרון לא זמין לתרגיל זה');
                return;
            }
            
            showFeedback(num, 'solution', 
                '<strong>💡 הפתרון הנכון:</strong><code>' + 
                solution.display + '</code><br><br><em>' + solution.hint + '</em>');
        }

        // הצגת פידבק
        function showFeedback(num, type, message) {
            const feedback = document.getElementById('feedback-' + num);
            feedback.className = 'feedback feedback-' + type;
            feedback.innerHTML = message;
            feedback.style.display = 'block';
            
            // גלילה לפידבק
            feedback.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // איפוס תשובה
        function resetAnswer(num) {
            const textarea = document.getElementById('answer-' + num);
            const feedback = document.getElementById('feedback-' + num);
            
            textarea.value = '';
            textarea.style.borderColor = '#667eea';
            textarea.style.background = 'white';
            feedback.style.display = 'none';
        }

        // עדכון סטטיסטיקות
        function updateStats() {
            document.getElementById('correct-count').textContent = stats.correct;
            document.getElementById('total-count').textContent = stats.total;
            
            const rate = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
            document.getElementById('success-rate').textContent = rate + '%';
        }

        // אתחול
        updateStats();
    </script>
</body>
</html>