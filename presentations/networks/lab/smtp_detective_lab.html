<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMTP Detective Lab ğŸ•µï¸ - ×“×£ ×¢×‘×•×“×” ××™× ×˜×¨××§×˜×™×‘×™</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #666;
            font-size: 1.2em;
        }

        .student-info {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-right: 5px solid #667eea;
        }

        .student-info h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .info-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 10px;
        }

        .info-field {
            display: flex;
            flex-direction: column;
        }

        .info-field label {
            font-weight: bold;
            color: #555;
            margin-bottom: 5px;
        }

        .info-field input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }

        .info-field input:focus {
            outline: none;
            border-color: #667eea;
        }

        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f9f9f9;
            border-radius: 15px;
            border-right: 5px solid #764ba2;
        }

        .section-title {
            color: #764ba2;
            font-size: 1.8em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .level-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.5em;
            font-weight: bold;
            color: white;
        }

        .level-basic {
            background: #48bb78;
        }

        .level-intermediate {
            background: #ed8936;
        }

        .level-advanced {
            background: #e53e3e;
        }

        .level-bonus {
            background: #9f7aea;
        }

        .task {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .task-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-left: 10px;
        }

        .task-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .task-description {
            color: #666;
            margin-bottom: 15px;
            padding: 10px;
            background: #f0f4ff;
            border-radius: 5px;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
            direction: ltr;
            text-align: left;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .code-textarea {
            background: #282c34;
            color: #abb2bf;
            font-family: 'Courier New', monospace;
            min-height: 200px;
        }

        .short-answer {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
        }

        .short-answer:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .reflection-section {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 30px;
            border-radius: 15px;
            margin-top: 40px;
            border: 3px solid #fdcb6e;
        }

        .reflection-section h2 {
            color: #d63031;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .reflection-question {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .reflection-question h4 {
            color: #e17055;
            margin-bottom: 10px;
        }

        .submit-container {
            text-align: center;
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
        }

        .submit-btn {
            background: white;
            color: #667eea;
            padding: 15px 50px;
            font-size: 1.3em;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .tips-box {
            background: #e8f5e9;
            border-right: 5px solid #4caf50;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .tips-box h4 {
            color: #2e7d32;
            margin-bottom: 10px;
        }

        .warning-box {
            background: #fff3cd;
            border-right: 5px solid #ff9800;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .warning-box h4 {
            color: #e65100;
            margin-bottom: 10px;
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: #ddd;
            z-index: 1000;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
            }
            .submit-btn {
                display: none;
            }
        }

        .char-counter {
            text-align: left;
            color: #999;
            font-size: 0.9em;
            margin-top: 5px;
            direction: ltr;
        }

        .file-upload {
            margin-top: 10px;
        }

        .file-upload label {
            display: inline-block;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .file-upload label:hover {
            background: #5568d3;
        }

        .file-upload input[type="file"] {
            display: none;
        }

        .file-name {
            margin-top: 5px;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸ•µï¸ SMTP Detective Lab</h1>
            <p class="subtitle">××¢×‘×“×ª ×—×§×™×¨×” ×•×¤×™×ª×•×— - ×¤×¨×•×˜×•×§×•×œ SMTP</p>
            <p style="color: #999; margin-top: 10px;">×‘×™×”"×¡ ×‘×œ×™×š | ×©×›×‘×”: ×™"×-×™"×‘ | ××¡×œ×•×œ: ××‘×˜×—×ª ××™×“×¢ ×•×¨×©×ª×•×ª</p>
        </div>

        <!-- Student Information -->
        <div class="student-info">
            <h3>ğŸ“‹ ×¤×¨×˜×™ ×ª×œ××™×“/×”</h3>
            <div class="info-row">
                <div class="info-field">
                    <label>×©× ××œ×:</label>
                    <input type="text" id="studentName" placeholder="×”×›× ×¡/×™ ××ª ×©××š ×”××œ×" required>
                </div>
                <div class="info-field">
                    <label>×›×™×ª×”:</label>
                    <input type="text" id="studentClass" placeholder="×œ×“×•×’××”: ×™×´×1" required>
                </div>
            </div>
            <div class="info-row">
                <div class="info-field">
                    <label>×ª××¨×™×š:</label>
                    <input type="date" id="submissionDate" required>
                </div>
                <div class="info-field">
                    <label>××™××™×™×œ:</label>
                    <input type="email" id="studentEmail" placeholder="your.email@example.com">
                </div>
            </div>
        </div>

        <!-- Introduction -->
        <div class="tips-box">
            <h4>ğŸ’¡ ×”×•×¨××•×ª ×›×œ×œ×™×•×ª</h4>
            <ul>
                <li>×§×¨××• ×‘×¢×™×•×Ÿ ××ª ×›×œ ×”××©×™××•×ª ×œ×¤× ×™ ×©×ª×ª×—×™×œ×•</li>
                <li>×¨×©××• ××ª ×”×§×•×“ ×©×œ×›× ×‘××–×•×¨×™ ×”×§×•×“ ×”××™×•×¢×“×™×</li>
                <li>× ×™×ª×Ÿ ×œ×©××•×¨ ××ª ×”×¢×‘×•×“×” ×‘×××¦×¢×•×ª Ctrl+S (×”×“×¤×¡×” ×œ-PDF)</li>
                <li>×œ×¤× ×™ ×”×”×’×©×” - ×•×“××• ×©××™×œ××ª× ××ª ×›×œ ×”×¡×¢×™×¤×™×</li>
                <li><strong>×–×›×¨×•:</strong> ×‘×“×§×• ××ª ×”×§×•×“ ×©×œ×›× ×¨×§ ×‘×¡×‘×™×‘×” ××‘×•×“×“×ª!</li>
            </ul>
        </div>

        <div class="warning-box">
            <h4>âš ï¸ ××–×”×¨×ª ××‘×˜×—×”</h4>
            <p><strong>×—×©×•×‘ ×××•×“:</strong> ×›×œ ×”× ×™×¡×•×™×™× ×¢× SMTP ×¦×¨×™×›×™× ×œ×”×ª×‘×¦×¢ ×¨×§ ×‘×¡×‘×™×‘×” ××‘×•×“×“×ª (Virtual Machine ××• ×©×¨×ª×™ ×‘×“×™×§×” ××§×•××™×™× ×›××• MailHog). ××™×Ÿ ×œ×¡×¨×•×§ ××• ×œ×©×œ×•×— ××™×™×œ×™× ×œ×©×¨×ª×™× ×—×™×¦×•× ×™×™× ×œ×œ× ××™×©×•×¨ ××¤×•×¨×©!</p>
        </div>

        <!-- Section 1: Basic Level -->
        <div class="section">
            <h2 class="section-title">
                â­ ×—×œ×§ ×': ××©×™××•×ª ×‘×¡×™×¡×™×•×ª
                <span class="level-badge level-basic">BASIC</span>
            </h2>

            <div class="task">
                <div class="task-title">
                    <span class="task-number">1</span>
                    ×”×©×œ××ª ×¤×•× ×§×¦×™×™×ª send_email_raw - ×©×œ×™×—×ª ××™×™×œ ××œ×
                </div>
                <div class="task-description">
                    <strong>××˜×¨×ª ×”××©×™××”:</strong> ×œ×‘× ×•×ª client ×©×œ SMTP ×©××ª×—×‘×¨ ×œ×©×¨×ª ×•×©×•×œ×— ××™×™×œ ××œ× ×ª×•×š ×©×™××•×© ×‘×¤×§×•×“×•×ª SMTP ×”×‘×¡×™×¡×™×•×ª.<br>
                    <a href="https://drive.google.com/uc?export=download&id=1hjbUzS4z6V9tP8RBHAKgTnelyG33L9Pc" download>
                    â¬‡ï¸ ×”×•×¨×“ ××ª ×§×•×“ ×”×©×¨×ª
                    </a>
                    <br><br><strong>××” ×¦×¨×™×š ×œ×¢×©×•×ª?</strong>
                    <ol style="margin: 10px 0; padding-right: 20px;">
                        <li><strong>×œ×§×¨×•× ××ª ×ª×’×•×‘×ª ×”×©×¨×ª ×”×¨××©×•× ×™×ª</strong> (220 Service Ready)</li>
                        <li><strong>×œ×©×œ×•×— HELO/EHLO</strong> ×¢× ×©× ×”×“×•××™×™×Ÿ ×©×œ ×”×œ×§×•×— ×©×œ×›×</li>
                        <li><strong>×œ×©×œ×•×— MAIL FROM</strong> ×¢× ×›×ª×•×‘×ª ×”×©×•×œ×— (×‘×ª×•×š <>)</li>
                        <li><strong>×œ×©×œ×•×— RCPT TO</strong> ×¢× ×›×ª×•×‘×ª ×”× ××¢×Ÿ (×‘×ª×•×š <>)</li>
                        <li><strong>×œ×©×œ×•×— DATA</strong> ×•×œ×—×›×•×ª ×œ×ª×’×•×‘×” 354</li>
                        <li><strong>×œ×©×œ×•×— ××ª ×”-Headers</strong>: From, To, Subject</li>
                        <li><strong>×œ×©×œ×•×— ×©×•×¨×” ×¨×™×§×”</strong> (\r\n\r\n) - ××¤×¨×™×“×” ×‘×™×Ÿ headers ×œ-body</li>
                        <li><strong>×œ×©×œ×•×— ××ª ×ª×•×›×Ÿ ×”×”×•×“×¢×”</strong> (body)</li>
                        <li><strong>×œ×¡×™×™× ×¢× × ×§×•×“×” ×‘×©×•×¨×” × ×¤×¨×“×ª</strong> (\r\n.\r\n)</li>
                        <li><strong>×œ×©×œ×•×— QUIT</strong> ×œ×¡×’×™×¨×ª ×”×—×™×‘×•×¨</li>
                    </ol>
                    
                    <strong>âš ï¸ ×—×©×•×‘ ×œ×–×›×•×¨:</strong>
                    <ul style="margin: 10px 0; padding-right: 20px;">
                        <li>×›×œ ×¤×§×•×“×” ×¦×¨×™×›×” ×œ×”×¡×ª×™×™× ×‘-\r\n (Carriage Return + Line Feed)</li>
                        <li>××—×¨×™ ×›×œ ×¤×§×•×“×” - ×ª×§×¨××• ××ª ×ª×’×•×‘×ª ×”×©×¨×ª (recv) ×•×ª×‘×“×§×• ××ª ×§×•×“ ×”×ª×’×•×‘×”</li>
                        <li>×§×•×“×™× ×©××ª×—×™×œ×™× ×‘-2 (250, 220, 354) = ×”×¦×œ×—×”</li>
                        <li>×§×•×“×™× ×©××ª×—×™×œ×™× ×‘-4 ××• 5 = ×©×’×™××”</li>
                    </ul>
                    
                    <strong>ğŸ’¡ ×“×•×’××” ×œ×©×™×—×” ××•×¦×œ×—×ª:</strong><br>
                    <code style="background: #f0f0f0; padding: 5px; display: block; margin: 10px 0; direction: ltr; text-align: left;">
                    S: 220 mail.server.com Ready<br>
                    C: EHLO client.local<br>
                    S: 250 Hello<br>
                    C: MAIL FROM:&lt;sender@example.com&gt;<br>
                    S: 250 OK<br>
                    C: RCPT TO:&lt;receiver@example.com&gt;<br>
                    S: 250 OK<br>
                    C: DATA<br>
                    S: 354 Start mail input<br>
                    C: From: sender@example.com<br>
                    C: To: receiver@example.com<br>
                    C: Subject: Test<br>
                    C: <br>
                    C: Hello World!<br>
                    C: .<br>
                    S: 250 Message accepted<br>
                    C: QUIT<br>
                    S: 221 Bye
                    </code>
                </div>
                <label style="font-weight: bold; margin-bottom: 10px; display: block;">×”×§×•×“ ×©×œ×š (Python):</label>
                <textarea class="code-textarea" id="task1_code" placeholder="# ×”×“×‘×§/×›×ª×•×‘ ××ª ×”×§×•×“ ×”××œ× ×›××Ÿ
from scapy.all import *
import socket

def send_email_raw(smtp_server, from_addr, to_addr, subject, body):
    # ×”×©×œ× ××ª ×”×§×•×“...
    pass
"></textarea>
                <div class="char-counter"><span id="task1_count">0</span> characters</div>
                
                <label style="font-weight: bold; margin: 15px 0 10px 0; display: block;">×”×¡×‘×¨ ×§×¦×¨ ×¢×œ ×”×§×•×“ ×©×œ×š:</label>
                <textarea id="task1_explanation" placeholder="×”×¡×‘×¨/×™ ×›×™×¦×“ ×”×§×•×“ ×©×œ×š ×¢×•×‘×“ ×•××” ×›×œ ×—×œ×§ ×¢×•×©×”..."></textarea>
            </div>

            <div class="task">
                <div class="task-title">
                    <span class="task-number">2</span>
                    ×™×¦×™×¨×ª ×œ×•×’×¨ ×œ×©×™×—×ª SMTP - ×ª×™×¢×•×“ ××œ× ×©×œ ×”×ª×§×©×•×¨×ª
                </div>
                <div class="task-description">
                    <strong>××˜×¨×ª ×”××©×™××”:</strong> ×œ×‘× ×•×ª ××¢×¨×›×ª logging ×©×¨×•×©××ª ××ª ×›×œ ×”×©×™×—×” ×‘×™×Ÿ ×”×œ×§×•×— ×œ×©×¨×ª ×œ×§×•×‘×¥, ×›×š ×©× ×•×›×œ ×œ× ×ª×— ×•×œ×‘×“×•×§ ××•×ª×” ××—×¨ ×›×š.
                    
                    <br><br><strong>××” ×¦×¨×™×š ×œ×”×•×¤×™×¢ ×‘×œ×•×’?</strong>
                    <ol style="margin: 10px 0; padding-right: 20px;">
                        <li><strong>Timestamp</strong> - ×ª××¨×™×š ×•×©×¢×” ××“×•×™×§×™× (×©×™××•×© ×‘-datetime)</li>
                        <li><strong>×›×™×•×•×Ÿ</strong> - ×”×× ×–×” Clientâ†’Server ××• Serverâ†’Client</li>
                        <li><strong>×”×ª×•×›×Ÿ</strong> - ×”×¤×§×•×“×” ××• ×”×ª×’×•×‘×” ×”××œ××”</li>
                        <li><strong>×§×•×“ ×ª×’×•×‘×”</strong> (××•×¤×¦×™×•× ×œ×™) - ×× ×–×• ×ª×’×•×‘×ª ×©×¨×ª, ×œ×—×œ×¥ ××ª ×”×§×•×“ (250, 354 ×•×›×•')</li>
                    </ol>
                    
                    <strong>ğŸ’¡ ×¤×•×¨××˜ ××•××œ×¥ ×œ×œ×•×’:</strong><br>
                    <code style="background: #f0f0f0; padding: 5px; display: block; margin: 10px 0; direction: ltr; text-align: left; font-size: 0.9em;">
                    [2025-01-12 14:35:21] SERVER â†’ CLIENT: 220 mail.example.com SMTP Ready<br>
                    [2025-01-12 14:35:21] CLIENT â†’ SERVER: EHLO client.local<br>
                    [2025-01-12 14:35:22] SERVER â†’ CLIENT: 250 Hello client.local<br>
                    [2025-01-12 14:35:22] CLIENT â†’ SERVER: MAIL FROM:&lt;test@example.com&gt;<br>
                    [2025-01-12 14:35:22] SERVER â†’ CLIENT: 250 OK<br>
                    ...
                    </code>
                    
                    <strong>ğŸ”§ ×˜×™×¤×™× ×˜×›× ×™×™×:</strong>
                    <ul style="margin: 10px 0; padding-right: 20px;">
                        <li>×”×©×ª××©×• ×‘-<code>datetime.now()</code> ×œ×§×‘×œ×ª ×–××Ÿ × ×•×›×—×™</li>
                        <li>×¤×ª×—×• ×§×•×‘×¥ ×¢× <code>open('smtp_log.txt', 'a')</code> - 'a' = append mode</li>
                        <li>××¤×©×¨ ×œ×”×•×¡×™×£ ×¦×‘×¢×™×/×¡××œ×™×: ğŸ“¤ ×œ×œ×§×•×— â† ×©×¨×ª, ğŸ“¥ ×œ×©×¨×ª â† ×œ×§×•×—</li>
                        <li>×©××¨×• ××ª ×”×§×•×‘×¥ ×¢× encoding='utf-8' ×œ×ª××™×›×” ×‘×¢×‘×¨×™×ª</li>
                    </ul>
                    
                    <strong>ğŸ“ ×“×•×’××ª ×§×•×“ ×œ×”×ª×—×œ×”:</strong><br>
                    <code style="background: #282c34; color: #abb2bf; padding: 10px; display: block; margin: 10px 0; direction: ltr; text-align: left; border-radius: 5px;">
from datetime import datetime<br>
<br>
def log_smtp(direction, message, log_file='smtp_log.txt'):<br>
&nbsp;&nbsp;&nbsp;&nbsp;timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")<br>
&nbsp;&nbsp;&nbsp;&nbsp;# ×”×©×œ×™××• ××ª ×”×§×•×“...
                    </code>
                </div>
                <label style="font-weight: bold; margin-bottom: 10px; display: block;">×”×§×•×“ ×©×œ×š:</label>
                <textarea class="code-textarea" id="task2_code" placeholder="# ×›×ª×•×‘/×™ ××ª ×¤×•× ×§×¦×™×™×ª ×”×œ×•×’×¨ ×›××Ÿ
def log_smtp_conversation(direction, message):
    # ×”×§×•×“ ×©×œ×š...
    pass
"></textarea>
                
                <label style="font-weight: bold; margin: 15px 0 10px 0; display: block;">×“×•×’××” ×œ×¤×œ×˜ ×©×œ ×”×œ×•×’ ×©×œ×š:</label>
                <textarea id="task2_output" placeholder="×”×“×‘×§/×™ ×“×•×’××” ×©×œ ×§×•×‘×¥ ×”×œ×•×’ ×©× ×•×¦×¨..."></textarea>
            </div>
        </div>

        <!-- Section 2: Intermediate Level -->
        <div class="section">
            <h2 class="section-title">
                â­â­ ×—×œ×§ ×‘': ××©×™××•×ª ×‘×¨××” ×‘×™× ×•× ×™×ª
                <span class="level-badge level-intermediate">INTERMEDIATE</span>
            </h2>

            <div class="task">
                <div class="task-title">
                    <span class="task-number">3</span>
                    Parser ×œ×—×™×œ×•×¥ ×›×ª×•×‘×•×ª ××™×™×œ ×-PCAP - × ×™×ª×•×— ×ª×¢×‘×•×¨×ª ×¨×©×ª
                </div>
                <div class="task-description">
                    <strong>××˜×¨×ª ×”××©×™××”:</strong> ×œ×›×ª×•×‘ ×ª×•×›× ×” ×©×§×•×¨××ª ×§×•×‘×¥ PCAP (×ª×¢×‘×•×¨×ª ×¨×©×ª ×©× ×œ×›×“×”) ×•××—×œ×¦×ª ××× ×• ××ª ×›×œ ×›×ª×•×‘×•×ª ×”××™×™×œ ×©×œ ×”×©×•×œ×—×™× ×•×”××§×‘×œ×™×.
                     <a href="https://drive.google.com/uc?export=download&id=17ZSpM2yX0-QVZK0nYa5dSZM_P7uCUMoo" download>
                    â¬‡ï¸ ×”×•×¨×“ ××ª ×§×•×‘×¥ pcap
                    </a>
                    <br><br><strong>××” ×¦×¨×™×š ×œ×¢×©×•×ª?</strong>
                    <ol style="margin: 10px 0; padding-right: 20px;">
                        <li><strong>×œ×§×¨×•× ××ª ×§×•×‘×¥ ×”-PCAP</strong> ×¢× Scapy (<code>rdpcap()</code>)</li>
                        <li><strong>×œ×¡× ×Ÿ ×¨×§ ×—×‘×™×œ×•×ª SMTP</strong> - ×¤×•×¨×˜ 25, 587, ××• 465</li>
                        <li><strong>×œ×—×¤×© ×¤×§×•×“×•×ª MAIL FROM ×•-RCPT TO</strong> ×‘-payload ×©×œ ×”×—×‘×™×œ×•×ª</li>
                        <li><strong>×œ×—×œ×¥ ××ª ×›×ª×•×‘×•×ª ×”××™×™×œ</strong> ××ª×•×š ×”×¤×§×•×“×•×ª (×‘×™×Ÿ < ×œ->)</li>
                        <li><strong>×œ×”×¦×™×’ ××ª ×”×ª×•×¦××•×ª</strong> - ×¨×©×™××” ×©×œ ×©×•×œ×—×™× ×•××§×‘×œ×™× ×™×™×—×•×“×™×™×</li>
                    </ol>
                    
                    <strong>ğŸ” ××™×š ×œ×–×”×•×ª ×›×ª×•×‘×•×ª ××™×™×œ ×‘×¤×§×•×“×•×ª SMTP?</strong>
                    <ul style="margin: 10px 0; padding-right: 20px;">
                        <li><code>MAIL FROM:&lt;sender@example.com&gt;</code> - ×›×ª×•×‘×ª ×”×©×•×œ×—</li>
                        <li><code>RCPT TO:&lt;receiver@example.com&gt;</code> - ×›×ª×•×‘×ª ×”× ××¢×Ÿ</li>
                        <li>×¦×¨×™×š ×œ×—×œ×¥ ××” ×©× ××¦× ×‘×™×Ÿ &lt; ×œ-&gt;</li>
                    </ul>
                    
                    <strong>ğŸ’¡ ×˜×™×¤×™×:</strong>
                    <ul style="margin: 10px 0; padding-right: 20px;">
                        <li>×‘×“×§×• ×× ×™×© ×©×›×‘×ª TCP ×•×’× ×©×›×‘×ª Raw (payload) ×‘×—×‘×™×œ×”</li>
                        <li>×”-payload ×”×•× bytes - ×¦×¨×™×š ×œ×¢×©×•×ª <code>.decode('utf-8', errors='ignore')</code></li>
                        <li>×”×©×ª××©×• ×‘-regex ××• ×‘-split() ×›×“×™ ×œ×—×œ×¥ ×›×ª×•×‘×•×ª</li>
                        <li>×©×™××• ×œ×‘ - ×—×‘×™×œ×” ××—×ª ×¢×©×•×™×” ×œ×”×›×™×œ ××¡×¤×¨ ×©×•×¨×•×ª</li>
                        <li>×”×©×ª××©×• ×‘-set() ×›×“×™ ×œ×”×™×× ×¢ ××›×¤×™×œ×•×™×•×ª</li>
                    </ul>
                    
                    <strong>ğŸ“ ×©×œ×“ ×§×•×“ ×œ×”×ª×—×œ×”:</strong><br>
                    <code style="background: #282c34; color: #abb2bf; padding: 10px; display: block; margin: 10px 0; direction: ltr; text-align: left; border-radius: 5px;">
from scapy.all import *<br>
import re<br>
<br>
def extract_emails_from_pcap(pcap_file):<br>
&nbsp;&nbsp;&nbsp;&nbsp;packets = rdpcap(pcap_file)<br>
&nbsp;&nbsp;&nbsp;&nbsp;senders = set()<br>
&nbsp;&nbsp;&nbsp;&nbsp;receivers = set()<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;for pkt in packets:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if TCP in pkt and Raw in pkt:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ×‘×“×•×§ ×× ×–×” ×¤×•×¨×˜ SMTP<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if pkt[TCP].dport == 25 or pkt[TCP].sport == 25:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;payload = pkt[Raw].load.decode('utf-8', errors='ignore')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ×—×¤×©×• MAIL FROM ×•-RCPT TO...<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ×”×©×œ×™××• ××ª ×”×§×•×“!<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return senders, receivers
                    </code>
                    
                    <strong>ğŸ¯ ×¤×•×¨××˜ ×ª×•×¦××” ××•××œ×¥:</strong><br>
                    <code style="background: #f0f0f0; padding: 5px; display: block; margin: 10px 0; direction: ltr; text-align: left;">
=== SMTP Email Addresses Found ===<br>
<br>
Senders (3):<br>
  - alice@company.com<br>
  - bob@company.com<br>
  - admin@server.local<br>
<br>
Receivers (5):<br>
  - john@example.com<br>
  - mary@example.com<br>
  - support@company.com<br>
  ...<br>
<br>
Total unique emails: 8
                    </code>
                </div>
                <textarea class="code-textarea" id="task3_code" placeholder="# ×›×ª×•×‘/×™ ××ª ×”-parser ×›××Ÿ
from scapy.all import *

def extract_emails_from_pcap(pcap_file):
    # ×”×§×•×“ ×©×œ×š...
    pass
"></textarea>
                
                <label style="font-weight: bold; margin: 15px 0 10px 0; display: block;">×ª×•×¦××•×ª ×”×¨×¦×”:</label>
                <textarea id="task3_results" placeholder="×”×“×‘×§/×™ ××ª ×ª×•×¦××•×ª ×”×”×¨×¦×” - ×¨×©×™××ª ×›×ª×•×‘×•×ª ×”××™×™×œ ×©× ××¦××•..."></textarea>
            </div>

            <div class="task">
                <div class="task-title">
                    <span class="task-number">4</span>
                    ×–×™×”×•×™ ×”××™×™×œ ×”××¨×•×š ×‘×™×•×ª×¨ - × ×™×ª×•×— ×’×•×“×œ ×”×•×“×¢×•×ª
                </div>
                <div class="task-description">
                    <strong>××˜×¨×ª ×”××©×™××”:</strong> ×œ××¦×•× ××ª ×”×”×•×“×¢×” ×¢× ×”-body (×ª×•×›×Ÿ) ×”××¨×•×š ×‘×™×•×ª×¨ ×‘×§×•×‘×¥ PCAP, ×•×œ×”×¦×™×’ ××™×“×¢ ×¢×œ×™×”.
                    
                    <br><br><strong>××” ×¦×¨×™×š ×œ×¢×©×•×ª?</strong>
                    <ol style="margin: 10px 0; padding-right: 20px;">
                        <li><strong>×œ×–×”×•×ª ××ª ×’×‘×•×œ×•×ª ×”××™×™×œ</strong>:
                            <ul>
                                <li>×”-body ××ª×—×™×œ ××—×¨×™ ×¤×§×•×“×ª DATA ×•×”×ª×’×•×‘×” 354</li>
                                <li>×”-body ××¡×ª×™×™× ×¢× × ×§×•×“×” ×‘×©×•×¨×” × ×¤×¨×“×ª (\r\n.\r\n)</li>
                            </ul>
                        </li>
                        <li><strong>×œ×—×œ×¥ ××ª ×›×œ ×”-bodies</strong> ×©×œ ×”××™×™×œ×™× ××”-PCAP</li>
                        <li><strong>×œ××“×•×“ ××ª ××•×¨×š ×›×œ body</strong> (×‘×ª×•×•×™× ××• ×‘×‘×™×™×˜×™×)</li>
                        <li><strong>×œ××¦×•× ××ª ×”××¨×•×š ×‘×™×•×ª×¨</strong> ×•×œ×©××•×¨ ××ª ×”××™×“×¢ ×¢×œ×™×•</li>
                        <li><strong>×œ×”×¦×™×’ ×¤×¨×˜×™×</strong>: ××•×¨×š, ×§×˜×¢ ×¨××©×•×Ÿ ××”×ª×•×›×Ÿ, ××™ ×©×œ×— ×œ××™</li>
                    </ol>
                    
                    <strong>ğŸ” ××™×š ×œ×–×”×•×ª ××ª ×”-body ×‘××™×™×œ?</strong>
                    <ul style="margin: 10px 0; padding-right: 20px;">
                        <li>×”-body ××•×¤×™×¢ ××—×¨×™ <strong>×©×•×¨×” ×¨×™×§×”</strong> ×©×‘××” ××—×¨×™ ×”-headers</li>
                        <li>Headers ×›×•×œ×œ×™×: From:, To:, Subject:, Date:, ×•×›×•'</li>
                        <li>××—×¨×™ ×©×•×¨×” ×¨×™×§×” (\r\n\r\n) ××ª×—×™×œ ×”-body</li>
                        <li>×”-body ××¡×ª×™×™× ×¢× \r\n.\r\n</li>
                    </ul>
                    
                    <strong>ğŸ’¡ ××¡×˜×¨×˜×’×™×” ××•××œ×¦×ª:</strong>
                    <ul style="margin: 10px 0; padding-right: 20px;">
                        <li><strong>×©×œ×‘ 1:</strong> ×¡× ×Ÿ ×—×‘×™×œ×•×ª SMTP ×©××›×™×œ×•×ª DATA</li>
                        <li><strong>×©×œ×‘ 2:</strong> ××¡×•×£ ××ª ×›×œ ×”×—×‘×™×œ×•×ª ×©××’×™×¢×•×ª ××—×¨×™ DATA ×¢×“ ×”-\r\n.\r\n</li>
                        <li><strong>×©×œ×‘ 3:</strong> ×”×¤×¨×“ ××ª ×”-headers ××”-body ×œ×¤×™ \r\n\r\n</li>
                        <li><strong>×©×œ×‘ 4:</strong> ××“×•×“ ××•×¨×š ×”-body ×‘×œ×‘×“ (×œ× ×›×•×œ×œ headers!)</li>
                        <li><strong>×©×œ×‘ 5:</strong> ×©××•×¨ ××ª ×”××§×¡×™××•× ×•××ª ×”××™×“×¢ ×”×¨×œ×•×•× ×˜×™</li>
                    </ul>
                    
                    <strong>ğŸ“ ×©×œ×“ ×§×•×“ ×œ×”×ª×—×œ×”:</strong><br>
                    <code style="background: #282c34; color: #abb2bf; padding: 10px; display: block; margin: 10px 0; direction: ltr; text-align: left; border-radius: 5px;">
from scapy.all import *<br>
<br>
def find_longest_email(pcap_file):<br>
&nbsp;&nbsp;&nbsp;&nbsp;packets = rdpcap(pcap_file)<br>
&nbsp;&nbsp;&nbsp;&nbsp;max_length = 0<br>
&nbsp;&nbsp;&nbsp;&nbsp;longest_email = {}<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;current_email = ""<br>
&nbsp;&nbsp;&nbsp;&nbsp;collecting = False<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;for pkt in packets:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if TCP in pkt and Raw in pkt:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;payload = pkt[Raw].load.decode('utf-8', errors='ignore')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ×–×”×” DATA command<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if '354' in payload:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collecting = True<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current_email = ""<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ××¡×•×£ ××ª ×ª×•×›×Ÿ ×”××™×™×œ...<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ×”×©×œ×™××• ××ª ×”×§×•×“!<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;return max_length, longest_email
                    </code>
                    
                    <strong>ğŸ¯ ×¤×•×¨××˜ ×ª×©×•×‘×” ××•××œ×¥:</strong><br>
                    <code style="background: #f0f0f0; padding: 5px; display: block; margin: 10px 0; direction: ltr; text-align: left;">
=== Longest Email Found ===<br>
Length: 2,584 bytes<br>
From: alice@company.com<br>
To: bob@example.com<br>
Subject: Monthly Report - December 2024<br>
<br>
First 200 characters of body:<br>
"Dear Bob,<br>
<br>
Please find attached the comprehensive monthly report for December...<br>
..."<br>
                    </code>
                </div>
                <textarea class="code-textarea" id="task4_code" placeholder="# ×›×ª×•×‘/×™ ××ª ×”×§×•×“ ×œ×–×™×”×•×™ ×”××™×™×œ ×”××¨×•×š ×‘×™×•×ª×¨"></textarea>
                
                <label style="font-weight: bold; margin: 15px 0 10px 0; display: block;">××”×• ××•×¨×š ×”××™×™×œ ×”××¨×•×š ×‘×™×•×ª×¨ ×©××¦××ª?</label>
                <input type="text" class="short-answer" id="task4_answer" placeholder="×œ×“×•×’××”: 2,584 bytes">
            </div>

            <div class="task">
                <div class="task-title">
                    <span class="task-number">5</span>
                    ×¡×¤×™×¨×ª ××™×™×œ×™× ×œ×¤×™ ×–××Ÿ - × ×™×ª×•×— ×“×¤×•×¡×™ ×ª×¢×‘×•×¨×”
                </div>
                <div class="task-description">
                    <strong>××˜×¨×ª ×”××©×™××”:</strong> ×œ×™×¦×•×¨ ×”×™×¡×˜×•×’×¨××” ××• ×˜×‘×œ×” ×©××¨××” ×›××” ××™×™×œ×™× × ×©×œ×—×• ×‘×›×œ ×“×§×”/×©×¢×”, ×›×“×™ ×œ×–×”×•×ª ×“×¤×•×¡×™ ×©×™××•×© ×•×©×¢×•×ª ×¢×•××¡.
                    
                    <br><br><strong>××” ×¦×¨×™×š ×œ×¢×©×•×ª?</strong>
                    <ol style="margin: 10px 0; padding-right: 20px;">
                        <li><strong>×œ×—×œ×¥ ××ª ×–××Ÿ ×”×©×œ×™×—×”</strong> ×©×œ ×›×œ ××™×™×œ ××”×—×‘×™×œ×•×ª:
                            <ul>
                                <li>×›×œ ×—×‘×™×œ×” ×‘-Scapy ×™×© ×œ×” <code>pkt.time</code> (timestamp ×©×œ ×”×œ×›×™×“×”)</li>
                                <li>××¤×©×¨ ×’× ×œ×—×¤×© Date header ×‘×ª×•×š ×”××™×™×œ</li>
                            </ul>
                        </li>
                        <li><strong>×œ×§×‘×¥ ×œ×¤×™ ×™×—×™×“×ª ×–××Ÿ</strong>:
                            <ul>
                                <li>××¤×©×¨×•×ª 1: ×œ×¤×™ ×“×§×” (minute)</li>
                                <li>××¤×©×¨×•×ª 2: ×œ×¤×™ ×©×¢×” (hour)</li>
                                <li>××¤×©×¨×•×ª 3: ×œ×¤×™ 5 ×“×§×•×ª (5-minute buckets)</li>
                            </ul>
                        </li>
                        <li><strong>×œ×¡×¤×•×¨ ×›××” ××™×™×œ×™× ×‘×›×œ bucket</strong></li>
                        <li><strong>×œ×”×¦×™×’ ××ª ×”×ª×•×¦××•×ª</strong>:
                            <ul>
                                <li>×˜×‘×œ×” ×˜×§×¡×˜×•××œ×™×ª</li>
                                <li>××• ×’×¨×£ ×¢× matplotlib/plotly</li>
                            </ul>
                        </li>
                    </ol>
                    
                    <strong>ğŸ• ××™×š ×œ×¢×‘×•×“ ×¢× Timestamps?</strong>
                    <ul style="margin: 10px 0; padding-right: 20px;">
                        <li><code>pkt.time</code> ××—×–×™×¨ Unix timestamp (float)</li>
                        <li>×œ×”××™×¨ ×œ×ª××¨×™×š: <code>datetime.fromtimestamp(pkt.time)</code></li>
                        <li>×œ×¢×’×œ ×œ×“×§×”: <code>dt.replace(second=0, microsecond=0)</code></li>
                        <li>×œ×”××™×¨ ×œ×©×¢×”: <code>dt.replace(minute=0, second=0, microsecond=0)</code></li>
                    </ul>
                    
                    <strong>ğŸ’¡ ×©×ª×™ ×’×™×©×•×ª ×œ×¡×¤×™×¨×”:</strong><br>
                    <br><strong>×’×™×©×” 1 - Dictionary ×¤×©×•×˜:</strong>
                    <code style="background: #282c34; color: #abb2bf; padding: 10px; display: block; margin: 10px 0; direction: ltr; text-align: left; border-radius: 5px;">
from datetime import datetime<br>
from collections import defaultdict<br>
<br>
email_counts = defaultdict(int)<br>
<br>
for pkt in packets:<br>
&nbsp;&nbsp;&nbsp;&nbsp;if is_smtp_data(pkt):  # ×¤×•× ×§×¦×™×” ×©×–×™×”×™×ª ×©×–×” DATA<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dt = datetime.fromtimestamp(pkt.time)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minute = dt.strftime("%Y-%m-%d %H:%M")<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email_counts[minute] += 1
                    </code>
                    
                    <strong>×’×™×©×” 2 - ×¢× Pandas (××ª×§×“×):</strong>
                    <code style="background: #282c34; color: #abb2bf; padding: 10px; display: block; margin: 10px 0; direction: ltr; text-align: left; border-radius: 5px;">
import pandas as pd<br>
import matplotlib.pyplot as plt<br>
<br>
timestamps = [datetime.fromtimestamp(pkt.time) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for pkt in packets if is_smtp_data(pkt)]<br>
<br>
df = pd.DataFrame({'time': timestamps})<br>
df.set_index('time', inplace=True)<br>
counts = df.resample('1T').size()  # '1T' = 1 minute<br>
<br>
counts.plot(kind='bar', figsize=(15, 6))<br>
plt.xlabel('Time')<br>
plt.ylabel('Number of Emails')<br>
plt.title('Email Traffic Over Time')<br>
plt.show()
                    </code>
                    
                    <strong>ğŸ¯ ×“×•×’××” ×œ×ª×•×¦××” ×˜×§×¡×˜×•××œ×™×ª:</strong><br>
                    <code style="background: #f0f0f0; padding: 5px; display: block; margin: 10px 0; direction: ltr; text-align: left;">
=== Email Traffic Analysis ===<br>
<br>
Time Period: 2024-12-15 09:00 - 12:00<br>
<br>
Emails per minute:<br>
09:15 | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (8)<br>
09:16 | â–ˆâ–ˆ (2)<br>
09:17 | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (5)<br>
09:18 | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (15) â† Peak!<br>
09:19 | â–ˆâ–ˆâ–ˆâ–ˆ (4)<br>
...<br>
<br>
Statistics:<br>
Total emails: 156<br>
Average per minute: 5.2<br>
Peak time: 09:18 (15 emails)<br>
Quietest time: 11:45 (0 emails)
                    </code>
                    
                    <strong>ğŸ† ×‘×•× ×•×¡ - ×©××œ×•×ª ××¢× ×™×™× ×•×ª ×œ×—×§×•×¨:</strong>
                    <ul style="margin: 10px 0; padding-right: 20px;">
                        <li>×‘××™×–×• ×©×¢×” ×™×© ×”×›×™ ×”×¨×‘×” ×ª×¢×‘×•×¨×”?</li>
                        <li>×”×× ×™×© "×¤×¨×¦×™ ×©×œ×™×—×”" (bursts) ×©×œ ×”×¨×‘×” ××™×™×œ×™× ×‘×¨×’×¢ ××¡×•×™×?</li>
                        <li>×”×× ×™×© ×“×¤×•×¡ ×—×©×•×“? (×œ×“×•×’××” - 100 ××™×™×œ×™× ×‘×“×§×” ××—×ª = spam?)</li>
                        <li>×”×× ×™×© ××ª×× ×‘×™×Ÿ ×©×¢×” ××¡×•×™××ª ×œ××©×œ×—×™× ××¡×•×™××™×?</li>
                    </ul>
                </div>
                <textarea class="code-textarea" id="task5_code" placeholder="# ×›×ª×•×‘/×™ ××ª ×”×§×•×“ ×œ×¡×¤×™×¨×” ×•×•×™×–×•××œ×™×–×¦×™×”"></textarea>
                
                <label style="font-weight: bold; margin: 15px 0 10px 0; display: block;">×ª×•×¦××•×ª / ×’×¨×£:</label>
                <textarea id="task5_visualization" placeholder="×ª××¨/×™ ××ª ×”×ª×•×¦××•×ª ××• ×”×“×‘×§/×™ ×œ×™× ×§ ×œ×ª××•× ×ª ×”×’×¨×£..."></textarea>
            </div>
        </div>

        <!-- Thinking Questions -->
        <div class="section">
            <h2 class="section-title">ğŸ¤” ×©××œ×•×ª ×œ××—×©×‘×”</h2>

            <div class="task">
                <div class="task-title">××“×•×¢ SMTP ×”×•× ×˜×§×¡×˜×•××œ×™ ×•×œ× ×‘×™× ××¨×™?</div>
                <textarea id="question1" placeholder="×”×¡×‘×¨/×™ ××ª ×”×™×ª×¨×•× ×•×ª ×•×”×—×¡×¨×•× ×•×ª ×©×œ ×¤×¨×•×˜×•×§×•×œ ×˜×§×¡×˜×•××œ×™..."></textarea>
            </div>

            <div class="task">
                <div class="task-title">××™×š ××¤×©×¨ ×œ×–×™×™×£ ××™×™×œ? ××”×Ÿ ×¤×¨×¦×•×ª ×”××‘×˜×—×”?</div>
                <textarea id="question2" placeholder="×ª××¨/×™ ××ª ×”×©×™×˜×•×ª ×œ×–×™×•×£ ×•××ª ×”×—×•×œ×©×•×ª ×‘-SMTP ×”×‘×¡×™×¡×™..."></textarea>
            </div>

            <div class="task">
                <div class="task-title">××“×•×¢ ×¦×¨×™×š SPF, DKIM, ×•-DMARC?</div>
                <textarea id="question3" placeholder="×”×¡×‘×¨/×™ ××™×š ×›×œ ×¤×¨×•×˜×•×§×•×œ ×¤×•×ª×¨ ×‘×¢×™×•×ª ×©×œ SMTP..."></textarea>
            </div>

            <div class="task">
                <div class="task-title">××™×š ×©×¨×ª ×“×•××¨ ×™×•×“×¢ ×œ××Ÿ ×œ×©×œ×•×— ××™×™×œ?</div>
                <textarea id="question4" placeholder="×”×¡×‘×¨/×™ ×¢×œ ×ª×¤×§×™×“ DNS MX records ×‘×©×œ×™×—×ª ×“×•××¨..."></textarea>
            </div>
        </div>

        <!-- Reflection Section -->
        <div class="reflection-section">
            <h2>ğŸ’­ ×¨×¤×œ×§×¦×™×” ××™×©×™×ª</h2>
            
            <div class="reflection-question">
                <h4>1. ××” ×”×™×” ×”××ª×’×¨ ×”×›×™ ××¢× ×™×™×Ÿ/×§×©×” ×‘×ª×¨×’×™×œ ×”×–×”? ×œ××”?</h4>
                <textarea id="reflection1" placeholder="×©×ª×£/×©×ª×¤×™ ××ª ×”××—×©×‘×•×ª ×©×œ×š..."></textarea>
            </div>

            <div class="reflection-question">
                <h4>2. ××™×–×” ××•×©×’ ××• ×˜×›× ×™×§×” ×—×“×©×” ×œ××“×ª ×‘×ª×¨×’×™×œ? ××™×š ×ª×•×›×œ/×™ ×œ×”×©×ª××© ×‘×–×” ×‘×¢×ª×™×“?</h4>
                <textarea id="reflection2" placeholder="×ª××¨/×™ ××” ×œ××“×ª ×•×›×™×¦×“ ×–×” ×¨×œ×•×•× ×˜×™..."></textarea>
            </div>

            <div class="reflection-question">
                <h4>3. ××™×œ×• ×©××œ×•×ª ×¢×œ×• ×œ×š ×ª×•×š ×›×“×™ ×”×¢×‘×•×“×”? ××” ×¢×•×“ ×”×™×™×ª ×¨×•×¦×” ×œ×—×§×•×¨?</h4>
                <textarea id="reflection3" placeholder="×©××œ×•×ª ××¢××™×§×•×ª, × ×•×©××™× × ×•×¡×¤×™× ×©××¢× ×™×™× ×™× ××•×ª×š..."></textarea>
            </div>

            <div class="reflection-question">
                <h4>4. ××™×š ×”×ª×¨×’×™×œ ×”×–×” ×©×™× ×” ××ª ×”×”×‘× ×” ×©×œ×š ×œ×’×‘×™ ××‘×˜×—×ª ×“×•××¨ ××œ×§×˜×¨×•× ×™?</h4>
                <textarea id="reflection4" placeholder="×”×× ×”×ª×¨×’×™×œ ×©×™× ×” ××ª ×”×“×¨×š ×©×‘×” ××ª×”/××ª ×—×•×©×‘/×ª ×¢×œ ××‘×˜×—×”?"></textarea>
            </div>

            <div class="reflection-question">
                <h4>5. ×“×¨×’/×™ ××ª ×¨××ª ×”×§×•×©×™ ×©×œ ×”×ª×¨×’×™×œ (1-10) ×•×”×¡×‘×¨/×™:</h4>
                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 10px;">
                    <label>×“×™×¨×•×’ ×§×•×©×™:</label>
                    <input type="range" id="difficulty" min="1" max="10" value="5" style="flex: 1;">
                    <span id="difficultyValue" style="font-weight: bold; font-size: 1.2em;">5</span>
                </div>
                <textarea id="reflection5" placeholder="×”×¡×‘×¨/×™ ×œ××” × ×ª×ª ××ª ×”×“×™×¨×•×’ ×”×–×”..."></textarea>
            </div>

            <div class="reflection-question">
                <h4>6. ××©×•×‘ ×œ×©×™×¤×•×¨: ××” ×”×™×™×ª ××©× ×”/××•×¡×™×£/××•×¨×™×“ ×‘×ª×¨×’×™×œ?</h4>
                <textarea id="reflection6" placeholder="×”××©×•×‘ ×©×œ×š ×—×©×•×‘ ×œ× ×•! ××™×š ××¤×©×¨ ×œ×©×¤×¨ ××ª ×”×ª×¨×’×™×œ?"></textarea>
            </div>
        </div>

        <!-- File Upload Section -->
        <div class="section">
            <h2 class="section-title">ğŸ“ ×§×‘×¦×™× × ×•×¡×¤×™×</h2>
            <div class="task">
                <div class="task-description">
                    ×× ×™×© ×œ×š ×§×‘×¦×™× × ×•×¡×¤×™× (×§×•×“, screenshots, PCAP files, logs ×•×›×•'), ×”×¢×œ×” ××•×ª× ×›××Ÿ:
                </div>
                <div class="file-upload">
                    <label for="fileUpload">ğŸ“ ×‘×—×¨ ×§×‘×¦×™× ×œ×”×¢×œ××”</label>
                    <input type="file" id="fileUpload" multiple>
                    <div class="file-name" id="fileList"></div>
                </div>
            </div>
        </div>

        <!-- Submit Button -->
        <div class="submit-container">
            <h3 style="color: white; margin-bottom: 20px;">âœ… ×¡×™×™××ª? ×”×’×©/×”×’×™×©×™ ××ª ×”×¢×‘×•×“×”!</h3>
            <button class="submit-btn" onclick="submitWork()">×”×’×© ×¢×‘×•×“×” ğŸš€</button>
            <p style="color: white; margin-top: 15px; font-size: 0.9em;">
                ×œ×¤× ×™ ×”×”×’×©×”, ×•×•×“×/×™ ×©××™×œ××ª ××ª ×›×œ ×”×¡×¢×™×¤×™× ×”×—×•×‘×” ×•×”×¨×¤×œ×§×¦×™×•×ª
            </p>
        </div>
    </div>

    <script>
        // Set today's date
        document.getElementById('submissionDate').valueAsDate = new Date();

        // Character counters
        const textareas = document.querySelectorAll('textarea');
        textareas.forEach(textarea => {
            textarea.addEventListener('input', function() {
                const counterId = this.id + '_count';
                const counter = document.getElementById(counterId);
                if (counter) {
                    counter.textContent = this.value.length;
                }
            });
        });

        // Difficulty slider
        const difficultySlider = document.getElementById('difficulty');
        const difficultyValue = document.getElementById('difficultyValue');
        difficultySlider.addEventListener('input', function() {
            difficultyValue.textContent = this.value;
        });

        // File upload handler
        document.getElementById('fileUpload').addEventListener('change', function() {
            const fileList = document.getElementById('fileList');
            if (this.files.length > 0) {
                const fileNames = Array.from(this.files).map(f => f.name).join(', ');
                fileList.textContent = `× ×‘×—×¨×• ${this.files.length} ×§×‘×¦×™×: ${fileNames}`;
            } else {
                fileList.textContent = '';
            }
        });

        // Progress bar on scroll
        window.addEventListener('scroll', function() {
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const progress = (scrollTop / (documentHeight - windowHeight)) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        });

        // Auto-save to localStorage
        function autoSave() {
            const formData = {};
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                if (input.id) {
                    formData[input.id] = input.value;
                }
            });
            localStorage.setItem('smtpLabData', JSON.stringify(formData));
        }

        // Load saved data
        function loadSavedData() {
            const saved = localStorage.getItem('smtpLabData');
            if (saved) {
                const formData = JSON.parse(saved);
                Object.keys(formData).forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = formData[id];
                    }
                });
                if (confirm('× ××¦××” ×¢×‘×•×“×” ×©××•×¨×”. ×”×× ×œ×˜×¢×•×Ÿ ××•×ª×”?')) {
                    // Data already loaded
                } else {
                    localStorage.removeItem('smtpLabData');
                }
            }
        }

        // Auto-save every 30 seconds
        setInterval(autoSave, 30000);

        // Load saved data on page load
        window.addEventListener('load', loadSavedData);

        // Submit function
        function submitWork() {
            // Validate required fields
            const studentName = document.getElementById('studentName').value;
            const studentClass = document.getElementById('studentClass').value;
            const submissionDate = document.getElementById('submissionDate').value;

            if (!studentName || !studentClass || !submissionDate) {
                alert('×× × ××œ×/×™ ××ª ×›×œ ×¤×¨×˜×™ ×”×ª×œ××™×“/×” ×œ×¤× ×™ ×”×”×’×©×”!');
                return;
            }

            // Check if at least some tasks are completed
            const task1 = document.getElementById('task1_code').value;
            const reflection1 = document.getElementById('reflection1').value;

            if (!task1 || task1.trim() === '' || !reflection1 || reflection1.trim() === '') {
                if (!confirm('× ×¨××” ×©×œ× ××™×œ××ª ×—×œ×§ ××”×¡×¢×™×¤×™×. ×”×× ××ª×” ×‘×˜×•×—/×” ×©×‘×¨×¦×•× ×š ×œ×”×’×™×©?')) {
                    return;
                }
            }

            // Collect all data
            const submissionData = {
                studentInfo: {
                    name: studentName,
                    class: studentClass,
                    date: submissionDate,
                    email: document.getElementById('studentEmail').value
                },
                basicTasks: {
                    task1_code: document.getElementById('task1_code').value,
                    task1_explanation: document.getElementById('task1_explanation').value,
                    task2_code: document.getElementById('task2_code').value,
                    task2_output: document.getElementById('task2_output').value
                },
                intermediateTasks: {
                    task3_code: document.getElementById('task3_code').value,
                    task3_results: document.getElementById('task3_results').value,
                    task4_code: document.getElementById('task4_code').value,
                    task4_answer: document.getElementById('task4_answer').value,
                    task5_code: document.getElementById('task5_code').value,
                    task5_visualization: document.getElementById('task5_visualization').value
                },
                thinkingQuestions: {
                    question1: document.getElementById('question1').value,
                    question2: document.getElementById('question2').value,
                    question3: document.getElementById('question3').value,
                    question4: document.getElementById('question4').value
                },
                reflection: {
                    reflection1: document.getElementById('reflection1').value,
                    reflection2: document.getElementById('reflection2').value,
                    reflection3: document.getElementById('reflection3').value,
                    reflection4: document.getElementById('reflection4').value,
                    difficulty: document.getElementById('difficulty').value,
                    reflection5: document.getElementById('reflection5').value,
                    reflection6: document.getElementById('reflection6').value
                },
                submissionTime: new Date().toISOString()
            };

            // Create formatted text output
            let output = '='.repeat(80) + '\n';
            output += 'SMTP DETECTIVE LAB - ×”×’×©×ª ×¢×‘×•×“×”\n';
            output += '='.repeat(80) + '\n\n';
            output += `×ª×œ××™×“/×”: ${submissionData.studentInfo.name}\n`;
            output += `×›×™×ª×”: ${submissionData.studentInfo.class}\n`;
            output += `×ª××¨×™×š ×”×’×©×”: ${submissionData.studentInfo.date}\n`;
            output += `××™××™×™×œ: ${submissionData.studentInfo.email || '×œ× ×¦×•×™×Ÿ'}\n`;
            output += `×–××Ÿ ×”×’×©×”: ${new Date().toLocaleString('he-IL')}\n`;
            output += '\n' + '='.repeat(80) + '\n\n';

            // Add all sections
            output += 'ğŸ“‹ ×—×œ×§ ×\': ××©×™××•×ª ×‘×¡×™×¡×™×•×ª\n';
            output += '-'.repeat(80) + '\n';
            output += `××©×™××” 1 - ×§×•×“:\n${submissionData.basicTasks.task1_code}\n\n`;
            output += `××©×™××” 1 - ×”×¡×‘×¨:\n${submissionData.basicTasks.task1_explanation}\n\n`;
            output += `××©×™××” 2 - ×§×•×“:\n${submissionData.basicTasks.task2_code}\n\n`;
            output += `××©×™××” 2 - ×¤×œ×˜:\n${submissionData.basicTasks.task2_output}\n\n`;

            // Add more sections...
            output += '\n' + '='.repeat(80) + '\n';
            output += 'ğŸ’­ ×¨×¤×œ×§×¦×™×•×ª:\n';
            output += '-'.repeat(80) + '\n';
            for (let i = 1; i <= 6; i++) {
                output += `×¨×¤×œ×§×¦×™×” ${i}:\n${submissionData.reflection['reflection' + i]}\n\n`;
            }
            output += `×“×™×¨×•×’ ×§×•×©×™: ${submissionData.reflection.difficulty}/10\n\n`;

            // Download as text file
            const blob = new Blob([output], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `SMTP_Lab_${studentName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);

            // Also save as JSON for backup
            const jsonBlob = new Blob([JSON.stringify(submissionData, null, 2)], { type: 'application/json' });
            const jsonUrl = window.URL.createObjectURL(jsonBlob);
            const jsonA = document.createElement('a');
            jsonA.href = jsonUrl;
            jsonA.download = `SMTP_Lab_${studentName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(jsonA);
            jsonA.click();
            document.body.removeChild(jsonA);
            window.URL.revokeObjectURL(jsonUrl);

            // Clear localStorage
            localStorage.removeItem('smtpLabData');

            // Show success message
            alert('âœ… ×”×¢×‘×•×“×” ×”×•×’×©×” ×‘×”×¦×œ×—×”!\n\n×”×•×¨×“×• 2 ×§×‘×¦×™×:\n1. ×§×•×‘×¥ ×˜×§×¡×˜ ×¢× ×›×œ ×”×ª×©×•×‘×•×ª\n2. ×§×•×‘×¥ JSON ×œ×’×™×‘×•×™\n\n×”×¢×‘×¨/×™ ××ª ×”×§×‘×¦×™× ×œ××•×¨×” ××• ×”×¢×œ×” ×œ×¤×œ×˜×¤×•×¨××” ×”××ª××™××”.');
        }

        // Print function
        function printWorksheet() {
            window.print();
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl+S to save
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                autoSave();
                alert('âœ… ×”×¢×‘×•×“×” × ×©××¨×” ×‘××•×¤×Ÿ ××•×˜×•××˜×™!');
            }
            // Ctrl+P to print
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                printWorksheet();
            }
        });
    </script>
</body>
</html>