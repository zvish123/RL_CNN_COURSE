<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××” ×§×•×¨×” ×‘×¤×•×¨×˜ ×”×¡×•×“×™? - ×ª×¨×©×™× ××™× ×˜×¨××§×˜×™×‘×™</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            color: #764ba2;
            border-bottom: 3px solid #667eea;
            padding-bottom: 15px;
        }
        .stage {
            margin: 30px 0;
            padding: 25px;
            border-radius: 10px;
            position: relative;
        }
        .stage-number {
            position: absolute;
            top: -15px;
            right: 20px;
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3em;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .stage-initial {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        .stage-knocking {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        .stage-opening {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: #333;
        }
        .stage-connected {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #333;
        }
        .stage-closed {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
        }
        .port-status {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            margin: 10px 5px;
            font-size: 1.1em;
        }
        .port-closed {
            background: #ff4444;
            color: white;
        }
        .port-open {
            background: #44ff44;
            color: #333;
        }
        .port-listening {
            background: #ffaa44;
            color: #333;
        }
        .diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
        }
        .entity {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            min-width: 150px;
        }
        .entity-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        .arrow {
            font-size: 3em;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .code-box {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            direction: ltr;
            text-align: left;
            overflow-x: auto;
        }
        .highlight {
            background: yellow;
            color: black;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
        }
        .info-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            border-right: 5px solid #2196f3;
            margin: 15px 0;
            color: black;
        }
        .warning-box {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-right: 5px solid #ffc107;
            margin: 15px 0;
            color: black;
        }
        .timeline {
            position: relative;
            padding-right: 50px;
            margin: 30px 0;
        }
        .timeline::before {
            content: '';
            position: absolute;
            right: 20px;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #667eea;
        }
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            right: -38px;
            top: 15px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            border: 4px solid white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Port knocking - ××” ×§×•×¨×” ×‘×¤×•×¨×˜ ×”×¡×•×“×™? </h1>

        <!-- ×©×œ×‘ ×”×ª×—×œ×ª×™ -->
        <div class="stage stage-initial">
            <div class="stage-number">0</div>
            <h2>ğŸ”’ ×”××¦×‘ ×”×”×ª×—×œ×ª×™</h2>
            <p><strong>×”×¤×•×¨×˜ ×”×¡×•×“×™ ×¡×’×•×¨ ×œ×—×œ×•×˜×™×Ÿ!</strong></p>
            
            <div class="diagram">
                <div class="entity">
                    <div class="entity-icon">ğŸ’»</div>
                    <strong>Client</strong>
                </div>
                <div class="arrow">âŒ</div>
                <div class="entity">
                    <div class="entity-icon">ğŸ–¥ï¸</div>
                    <strong>Server</strong><br>
                    <span class="port-status port-closed">ğŸ”’ Port 9999: CLOSED</span>
                </div>
            </div>

            <div class="info-box">
                <strong>××” ×–×” ××•××¨ "×¡×’×•×¨"?</strong><br>
                ×”×©×¨×ª <u>×œ× ×××–×™×Ÿ</u> ×¢×œ ×¤×•×¨×˜ 9999 ×‘-socket ×¨×’×™×œ.<br>
                ×× ×ª× ×¡×” ×œ×”×ª×—×‘×¨ â†’ <code>Connection Refused</code>
            </div>

            <pre class="code-box">
# ×‘×©×œ×‘ ×–×”, ×–×” ×œ× ×§×™×™×:
server_socket = socket.socket()
server_socket.bind(('', 9999))  # âŒ ×œ× ×§×•×¨×”!
server_socket.listen()           # âŒ ×œ× ×§×™×™×!
            </pre>
        </div>

        <!-- ×©×œ×‘ ×”×“×¤×™×§×•×ª -->
        <div class="stage stage-knocking">
            <div class="stage-number">1</div>
            <h2>ğŸšª ×”×“×¤×™×§×•×ª ××ª×—×™×œ×•×ª!</h2>
            
            <div class="timeline">
                <div class="timeline-item">
                    <strong>â±ï¸ t=0.0s:</strong> Client ×©×•×œ×— SYN â†’ Port 8111<br>
                    <span class="highlight">âœ“ Server: "××•×§×™×™, ×“×¤×™×§×” 1 ×-127.0.0.1"</span>
                </div>
                <div class="timeline-item">
                    <strong>â±ï¸ t=0.5s:</strong> Client ×©×•×œ×— SYN â†’ Port 8055<br>
                    <span class="highlight">âœ“ Server: "×“×¤×™×§×” 2 ×-127.0.0.1, ×›×œ ×”×›×‘×•×“!"</span>
                </div>
                <div class="timeline-item">
                    <strong>â±ï¸ t=1.0s:</strong> Client ×©×•×œ×— SYN â†’ Port 8071<br>
                    <span class="highlight">ğŸ¯ Server: "×¨×¦×£ ×©×œ×! ××•×¨×©×”!"</span>
                </div>
            </div>

            <div class="info-box">
                <strong>××™×š ×”×©×¨×ª "×¨×•××”" ××ª ×”×“×¤×™×§×•×ª?</strong><br>
                ×”×©×¨×ª ××©×ª××© ×‘-<strong>Scapy Sniffer</strong> ×©×¨×¥ ×›×œ ×”×–××Ÿ ×‘×¨×§×¢:
            </div>

            <pre class="code-box">
from scapy.all import *

def knock_detector(packet):
    if packet.haslayer(TCP):
        if packet[TCP].flags == 'S':  # SYN packet
            src_ip = packet[IP].src
            dst_port = packet[TCP].dport
            
            if dst_port in [8111, 8055, 8071]:
                print(f"ğŸšª KNOCK from {src_ip} on port {dst_port}")
                record_knock(src_ip, dst_port)
                
                if sequence_complete(src_ip):
                    <span class="highlight">authorize_ip(src_ip)  # ğŸ”“ ×¤×ª×™×—×”!</span>

# Sniffer ×¨×¥ ×ª××™×“:
sniff(filter="tcp", prn=knock_detector)
            </pre>

            <div class="warning-box">
                <strong>âš ï¸ ×—×©×•×‘ ×œ×”×‘×™×Ÿ:</strong><br>
                ×”×©×¨×ª ×œ× ×‘×××ª ×¤×•×ª×— socket ×¢×œ 8111, 8055, 8071!<br>
                ×”×•× ×¨×§ <strong>×××–×™×Ÿ ×œ×—×‘×™×œ×•×ª TCP</strong> ×‘×¨××ª ×”×¨×©×ª ×¢× Scapy.
            </div>
        </div>

        <!-- ×©×œ×‘ ×”×¤×ª×™×—×” -->
        <div class="stage stage-opening">
            <div class="stage-number">2</div>
            <h2>ğŸ”“ ×”×¤×•×¨×˜ × ×¤×ª×—!</h2>
            
            <div class="diagram">
                <div class="entity">
                    <div class="entity-icon">ğŸ’»</div>
                    <strong>Client</strong><br>
                    <span style="color: green;">âœ… Authorized</span>
                </div>
                <div class="arrow" style="color: #43e97b;">âœ“</div>
                <div class="entity">
                    <div class="entity-icon">ğŸ–¥ï¸</div>
                    <strong>Server</strong><br>
                    <span class="port-status port-open">ğŸ”“ Port 9999: OPEN!</span>
                </div>
            </div>

            <p><strong>××” ×§×•×¨×” ×›×¢×ª ×‘×©×¨×ª?</strong></p>
            
            <pre class="code-box">
# ×”×©×¨×ª ×¢×•×©×” ×–××ª ×¨×•×¥ ×‘×¨×§×¢ ×›×œ ×”×–××Ÿ:
def secret_server():
    server_socket = socket.socket()
    server_socket.bind(('', 9999))
    <span class="highlight">server_socket.listen(5)  # ğŸ”“ ×××–×™×Ÿ!</span>
    
    while True:
        client, addr = server_socket.accept()
        client_ip = addr[0]
        
        <span class="highlight">if is_authorized(client_ip):  # ğŸ” ×‘×“×™×§×”!</span>
            print(f"âœ… {client_ip} ××•×¨×©×” - ×‘×¨×•×š ×”×‘×!")
            serve_secret_content(client)
        else:
            print(f"ğŸš« {client_ip} ×œ× ××•×¨×©×”!")
            client.close()
            </pre>

            <div class="info-box">
                <strong>× ×§×•×“×” ×—×©×•×‘×”:</strong><br>
                ×”×¤×•×¨×˜ 9999 ×”×™×” <strong>×¤×ª×•×— ×›×œ ×”×–××Ÿ</strong> ××‘×—×™× ×” ×˜×›× ×™×ª (socket.listen),<br>
                ××‘×œ ×”×©×¨×ª <strong>×‘×•×“×§ ×”×¨×©××•×ª</strong> ×œ×¤× ×™ ×©×××¤×©×¨ ×’×™×©×”!<br><br>
                ×–×” ×›××• ×©×•××¨ ×‘×›× ×™×¡×”: ×”×“×œ×ª ×¤×ª×•×—×”, ××‘×œ ×”×•× ×‘×•×“×§ ×¨×©×™××ª ××•×–×× ×™×.
            </div>

            <p><strong>××” ×××•×—×¡×Ÿ ×‘×©×¨×ª?</strong></p>
            <pre class="code-box">
# ××™×œ×•×Ÿ ×©×œ IP ××•×¨×©×™×:
authorized_ips = {
    "127.0.0.1": datetime(2025, 1, 25, 15, 30, 0),  # ×¤×’ ×ª×•×§×£ ×‘-15:30
    "192.168.1.100": datetime(2025, 1, 25, 15, 45, 0)
}

def is_authorized(ip):
    if ip in authorized_ips:
        if datetime.now() < authorized_ips[ip]:
            return True  # âœ… ×¢×“×™×™×Ÿ ×‘×ª×•×§×£
        else:
            del authorized_ips[ip]  # â° ×¤×’ ×ª×•×§×£
            return False
    return False
            </pre>
        </div>

        <!-- ×©×œ×‘ ×”×—×™×‘×•×¨ -->
        <div class="stage stage-connected">
            <div class="stage-number">3</div>
            <h2>ğŸ‰ ×”×œ×§×•×— ××ª×—×‘×¨!</h2>
            
            <div class="diagram">
                <div class="entity">
                    <div class="entity-icon">ğŸ’»</div>
                    <strong>Client</strong><br>
                    <code style="font-size: 0.9em;">socket.connect(9999)</code>
                </div>
                <div class="arrow" style="color: green;">âŸ·</div>
                <div class="entity">
                    <div class="entity-icon">ğŸ–¥ï¸</div>
                    <strong>Server</strong><br>
                    <span class="port-status port-listening">ğŸ“¡ ××§×‘×œ ×—×™×‘×•×¨</span>
                </div>
            </div>

            <p><strong>××” ×§×•×¨×” ×¢×›×©×™×•?</strong></p>
            
            <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h3 style="color: #667eea; margin-top: 0;">×¨×¦×£ ×ª×§×©×•×¨×ª TCP ×ª×§×™×Ÿ:</h3>
                <ol style="font-size: 1.1em; line-height: 2;">
                    <li><strong>Client:</strong> SYN â†’ Server (port 9999)</li>
                    <li><strong>Server:</strong> ×‘×•×“×§ <code>is_authorized(client_ip)</code> âœ…</li>
                    <li><strong>Server:</strong> SYN-ACK â†’ Client</li>
                    <li><strong>Client:</strong> ACK â†’ Server</li>
                    <li><strong>ğŸŠ ×—×™×‘×•×¨ ××•×¦×œ×—!</strong></li>
                </ol>
            </div>

            <pre class="code-box">
# ×‘×œ×§×•×—:
client_socket = socket.socket()
client_socket.connect(('localhost', 9999))  # âœ… ×¢×•×‘×“!

welcome = client_socket.recv(4096).decode()
print(welcome)
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘    ğŸ‰ ACCESS GRANTED TO SECRET SERVER! ğŸ‰ â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

client_socket.send("SECRET".encode())
secret = client_socket.recv(4096).decode()
print(secret)
# ğŸ” The secret message is: "Cybersecurity is awesome!"
            </pre>

            <div class="info-box">
                <strong>××” ×”×œ×§×•×— ×™×›×•×œ ×œ×¢×©×•×ª?</strong><br>
                - ×œ×§×‘×œ ××™×“×¢ ×¡×•×“×™<br>
                - ×œ×‘×¦×¢ ×¤×§×•×“×•×ª ××™×•×—×“×•×ª<br>
                - ×œ×’×©×ª ×œ×©×™×¨×•×ª×™× ××•×’×‘×œ×™×<br><br>
                <strong>×”×›×œ ×ª×œ×•×™ ×‘××” ×©×”×©×¨×ª ××¡×¤×§!</strong>
            </div>
        </div>

        <!-- ×©×œ×‘ ×”×¡×’×™×¨×” -->
        <div class="stage stage-closed">
            <div class="stage-number">4</div>
            <h2>ğŸ”’ ×”×¤×•×¨×˜ × ×¡×’×¨ ××•×˜×•××˜×™×ª</h2>
            
            <p><strong>××—×¨×™ 30 ×©× ×™×•×ª (××• ×¤×¨××˜×¨ ××—×¨):</strong></p>
            
            <div class="diagram">
                <div class="entity">
                    <div class="entity-icon">ğŸ’»</div>
                    <strong>Client</strong><br>
                    <span style="color: red;">â° Authorization expired</span>
                </div>
                <div class="arrow" style="color: red;">âŒ</div>
                <div class="entity">
                    <div class="entity-icon">ğŸ–¥ï¸</div>
                    <strong>Server</strong><br>
                    <span class="port-status port-closed">ğŸ”’ Port 9999: PROTECTED</span>
                </div>
            </div>

            <pre class="code-box">
# ×”×©×¨×ª ×‘×•×“×§ ×›×œ ×”×–××Ÿ:
def clean_expired_authorizations():
    current_time = datetime.now()
    
    for ip in list(authorized_ips.keys()):
        if current_time > authorized_ips[ip]:
            <span class="highlight">del authorized_ips[ip]  # â° ××—×™×§×”!</span>
            print(f"âŒ Authorization expired for {ip}")

# ×× ×”×œ×§×•×— ×™× ×¡×” ×œ×”×ª×—×‘×¨ ×¢×›×©×™×•:
client_socket.connect(('localhost', 9999))
# Server: ğŸš« 127.0.0.1 is NOT AUTHORIZED!
# â†’ Connection closed
            </pre>

            <div class="warning-box">
                <strong>âš ï¸ ×—×©×•×‘:</strong><br>
                ×”×¤×•×¨×˜ ×¢×¦××• ×¢×“×™×™×Ÿ "×¤×ª×•×—" ××‘×—×™× ×” ×˜×›× ×™×ª (×”×©×¨×ª ×××–×™×Ÿ),<br>
                ××‘×œ ×”×”×¨×©××•×ª ×¤×’×• â†’ ×”×’×™×©×” <strong>× ×“×—×™×ª</strong>.<br><br>
                ×¦×¨×™×š ×œ×“×¤×•×§ ×©×•×‘ ×›×“×™ ×œ×§×‘×œ ×’×™×©×” ×—×“×©×”!
            </div>
        </div>

        <!-- ×¡×™×›×•× -->
        <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 30px; border-radius: 15px; margin-top: 40px;">
            <h2 style="text-align: center; margin-top: 0;">ğŸ“š ×¡×™×›×•× - ××” ×‘×××ª ×§×•×¨×”?</h2>
            
            <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h3>ğŸ¯ ×”×ª×©×•×‘×” ×”×§×¦×¨×”:</h3>
                <p style="font-size: 1.2em; line-height: 1.8;">
                    <strong>×”×¤×•×¨×˜ ×”×¡×•×“×™ (9999) ×¤×ª×•×— ×›×œ ×”×–××Ÿ ××‘×—×™× ×” ×˜×›× ×™×ª,</strong><br>
                    ××‘×œ ×”×©×¨×ª <strong>×‘×•×“×§ ×¨×©×™××ª ×”×¨×©××•×ª</strong> ×œ×¤× ×™ ×©×××¤×©×¨ ×’×™×©×”.<br><br>
                    ×¨×§ ××™ ×©×“×¤×§ ×‘×¨×¦×£ ×”× ×›×•×Ÿ × ×›× ×¡ ×œ×¨×©×™××ª ×”×”×¨×©××•×ª.<br>
                    ×”×¨×©××” ×ª×§×¤×” ×œ-30 ×©× ×™×•×ª ×‘×œ×‘×“.
                </p>
            </div>

            <h3>ğŸ”§ ×©× ×™ ×¨×›×™×‘×™× ×¢×™×§×¨×™×™×:</h3>
            <ol style="font-size: 1.1em; line-height: 2;">
                <li><strong>Scapy Sniffer</strong> (Thread 1):
                    <ul>
                        <li>×××–×™×Ÿ ×œ×—×‘×™×œ×•×ª SYN ×¢×œ ×¤×•×¨×˜×™× 8111, 8055, 8071</li>
                        <li>××–×”×” ×¨×¦×¤×™× × ×›×•× ×™×</li>
                        <li>××•×¡×™×£ IPs ×œ×¨×©×™××ª ×”×¨×©××•×ª</li>
                    </ul>
                </li>
                <li><strong>Secret Server</strong> (Thread 2):
                    <ul>
                        <li>×××–×™×Ÿ ×¢×œ ×¤×•×¨×˜ 9999 ×¢× socket ×¨×’×™×œ</li>
                        <li>××§×‘×œ ×—×™×‘×•×¨×™×</li>
                        <li>×‘×•×“×§ ×× ×”-IP ××•×¨×©×”</li>
                        <li>×××¤×©×¨/×“×•×—×” ×’×™×©×” ×‘×”×ª××</li>
                    </ul>
                </li>
            </ol>

            <h3>ğŸ’¡ ×œ××” ×–×” ×˜×•×‘?</h3>
            <ul style="font-size: 1.1em; line-height: 2;">
                <li>âœ… Port Scanner ×œ× ×™×¨××” ×©×™×¨×•×ª ×¤×¢×™×œ</li>
                <li>âœ… Brute Force ×§×©×” ×××•×“</li>
                <li>âœ… "Security by Obscurity" + Authentication</li>
                <li>âœ… ×©×›×‘×ª ×”×’× ×” × ×•×¡×¤×ª ××¢×‘×¨ ×œ×¡×™×¡××”</li>
            </ul>
        </div>

        <div style="text-align: center; margin-top: 40px; padding: 20px; background: #f5f5f5; border-radius: 10px;">
            <h2 style="color: #667eea;">ğŸ“ ×¢×›×©×™×• ×–×” ×”×–××Ÿ ×œ× ×¡×•×ª ×‘×¢×¦××š!</h2>
            <p style="font-size: 1.2em;">
                ×”×¨×¥ ××ª <code>port_knocking_server.py</code> ×•-<code>port_knocking_client.py</code><br>
                ×•×¨××” ××ª ×”×§×¡× ×§×•×¨×”! âœ¨
            </p>
        </div>
    </div>
</body>
</html>
